ltw java lang verify error bad return type generics local variables
would good able insert enclosing class name enclosing member joinpoint support additional message insert keys declare error warning
xlintfile option great fit controlling message across multiple build projects specifically my case from plugin management section maven parent pom problem you need local file configure per message output levels ignore warning error when you really want specify build script shared file alternative xlintfile would handy able change xlint warning level per message using command line options example ajc xlint advice did match ignore would override xlint default properties file advice did match message regards rob ajc option change xlint level per message without xlintfile
when enable jmx remote management jvm along aspect load time weaving ltw our aspect doesn appear get woven jvm arguments dvisualvm display name jdbc timing aspect test dcom sun management jmxremote ssl false dcom sun management jmxremote authenticate false dcom sun management jmxremote port 1024 javaagent jars jar dorg aspectj weaver loadtime com trgr cobalt aspects timing jdbc jdbcmonitor xml note don enable jmx remote management remove dcom sun management jmxremote jvm arguments aspect works fine ltw working when jmx enabled
can introduce annotation onto introduced method from trait patterned aspect
prototyped tested jsp class loaders see thread aspectj jsp load mailing list done through system property would easier via aop xml however would first time we have aop xml setting affects global operation loadtime weaving when any classloader actually got far enough load aop xmls would discover setting from point would set our jsp class loader case would mean either some non jsp class loader run early enough discover setting turn off all jsp class loaders first jsp class loader discover setting turn off all other jsp class loaders think we can live mode operation configure set classloader which weavers should created ltw scenario
aspect development tools e37x release 20120704 0900 seems super some method can correctly resolved constructor added itd can compiled problem runtime exception raised class which ll add new constructor public class child extends parent public string parent john public child string parent parent parent public string get parent return parent we can see child extends parent class parent has method get age public class parent private string name john private int age 50 public int get age return age add new constructor child my aspect public aspect my test public child new string parent int age parent system out println get age super get age system out println child name parent above aspect code trigger exception exception thread main java lang method error com test child ajc super dispatch com test child get age my test ajc post inter constructor my test com test child my test aj 13 com test child init child java main program main main program java 14 limitation aspect only way resolve issue also attach src compiled binary files constructor added itd cannot invoke method its super class
org aspectj ajdt internal core builder aj state get delegate reference type call print stack trace ajdt build server exception being printed causing some noise can you replace call call imessage handler build stack trace being printed want mute
am using aspect occasionally see following exception which believe related multiple threads initializing some internal state java util concurrent modification exception null java util array list itr check unknown source na 11 java util array list itr next unknown source na 11 org aspectj weaver reference type find derivative type reference type java 1122 jar org aspectj weaver type factory create type type factory java 44 jar org aspectj weaver resolved type parameterize resolved type java 2479 jar org aspectj weaver reference type get declared interfaces reference type java 673 jar org aspectj weaver resolved type get direct supertypes resolved type java 82 jar org aspectj weaver patterns type pattern matches subtypes type pattern java 178 jar org aspectj weaver patterns exact type pattern matches subtypes exact type pattern java 74 jar org aspectj weaver patterns type pattern matches statically type pattern java 130 jar org aspectj weaver patterns kinded pointcut fast match kinded pointcut java 130 jar org aspectj weaver internal tools pointcut expression impl could match join points type pointcut expression impl java 84 jar org aop aspectj aspect jexpression pointcut matches aspect jexpression pointcut java 250 spring aop jar release org aop support aop utils can apply aop utils java 208 spring aop jar release org aop support aop utils can apply aop utils java 262 spring aop jar release org aop support aop utils find advisors can apply aop utils java 294 spring aop jar release org aop framework autoproxy abstract advisor auto proxy creator find advisors can apply abstract advisor auto proxy creator java 118 spring aop jar release java util concurrent modification exception when multiple threads enter weaver
getting unhandled runtime exception from sts release java lang runtime exception org aspectj asm asm manager same type asm manager java 897 org aspectj asm asm manager remove targetting type asm manager java 711 org aspectj weaver bcel bcel weaver weave bcel weaver java 1033 org aspectj ajdt internal compiler aj pipelining compiler adapter weave queued entries aj pipelining compiler adapter java 514 org aspectj ajdt internal compiler aj pipelining compiler adapter queue weavin ndation domain src main java com scispike foundation domain trait persistence persistable aspect aj com scispike foundation domain trait persistence andy clement can reproduced our private foundation repo dev branch commit after clicking ok exception dialog error marker package statement text internal compiler error java lang runtime exception exception whilst walking up from target com scispike foundation domain trait persistence kind package declaration hid foundation domain src main java com scispike foundation domain trait persistence persistable aspect aj com scispike foundation domain trait persistence org aspectj asm asm manager same type asm manager java 897 do project clean exception reproduced everything compiles ok next edit repros exception unhandled runtime exception
assertion failed resolved type java 614
way which pertarget aspects compiled ajc check given target already has aspect thread safe when two different threads trigger advice target object first time same time sometimes aspect target gets created twice following code demonstrates problem following pertarget aspect add itself synchronized set another class constructor aspect pertarget pertarget execution void foo public pertarget main aspects add add instance set main before execution void foo empty advice trigger creation class creates 10000 target objects has two separate threads call method causes aspect instantiated each object aspects add themselves aspects set set size printed when all threads have finished import java util collections import java util identity hash map import java util set public class main public static set aspects collections synchronized set collections new set from map new identity hash map public static void main string args throws interrupted exception int 10000 final main new main create new target aspect runnable new runnable public void run foo trigger advice thread t1 new thread thread t2 new thread t1 start t2 start t1 join t2 join system out println aspects size should 10000 private void foo when compiled ajc run main method prints values over 10000 something like 10030 10060 typically which means some target objects get multiple aspect instances my own application sometimes also saw some threads accessing partially built aspect instances quite rare however wasn able make test case ajc version current stable used aspect compiler built friday jan 2010 21 53 37 gmt eclipse compiler 785 r33x sun vm version java tm se runtime environment build 20 b02 java hot spot tm 64 bit server vm build 16 b01 mixed mode investigated source problem ajc compiler generates following decompiled method aspect class public static void ajc per object bind object obj obj instanceof ajc might have aspect ajc might have aspect obj per object get null ajc might have aspect obj per object set new pertarget which obviously thread safe pertarget aspect thread safe
ok get supported what want here matching existence supplied header among headers string feature request might order syntax specifying how you want match array would needed bug reporting trying save program gets error pops up dialog should just become another error marker might compiler has change what throws end eclipse ide ends up breaking from user standpoint request mapping headers type string public aspect fail pointcut testable execution public request mapping headers test test com example java lang runtime exception org aspectj weaver patterns wild annotation type pattern resolve annotation values wild annotation type pattern java 231 org aspectj weaver patterns wild annotation type pattern resolve bindings wild annotation type pattern java 325 org aspectj weaver patterns wild type pattern resolve bindings wild type pattern java 657 org aspectj weaver patterns signature pattern resolve bindings signature pattern java 81 org worker java 53 compile error runtime exception thrown compiler limitation annotation value support implemented type java lang string wild annotation type pattern java 231
java throws out memory call class get generic superclass woven class
bad generics signature generated
error java lang null pointer exception error org aspectj weaver patterns exact annotation type pattern matches exact annotation type pattern java 137 error org aspectj weaver patterns exact annotation type pattern matches exact annotation type pattern java 96 error org aspectj weaver patterns any annotation type pattern matches exactly any annotation type pattern java 55 error org aspectj weaver patterns type pattern matches statically type pattern java 132 error org aspectj weaver patterns declare parents match declare parents java 63 error org aspectj weaver patterns declare parents find matching new parents declare parents java 358 error org aspectj ajdt internal compiler lookup aj lookup environment do declare parents aj lookup environment java 885 error org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 766 error org aspectj ajdt internal compiler lookup aj lookup environment weave intertypes aj lookup environment java 424 error org aspectj ajdt internal compiler lookup aj lookup environment weave intertypes aj lookup environment java 410 error org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 261 npe exact annotation type pattern matches
usage requires clause causes all aspects have have requires clauses loaded regardless whether specified required class exists here scenario why happens let assume we have bunch aspects a1 a2 a3 etc all requires clauses all referencing classes can satisfied class loader weaving adaptor register aspects goes over aspects definition one one reaches aspect a1 detects has requires clause so invokes bcel world add aspect requires causes aspect a1 its required class registered internal aspect required types map code calls bcel weaver add library aspect a1 argument which turn calls add replace aspect which invokes has unsatisfied dependency has unsatisfied dependency has been written run only once checks has already run so does nothing otherwise removes from aspect required types map all types can resolved thus leaving only those cannot resolved other words assumes after having run once any remaining type must unsatified thus when invoked a1 being 1st time resolves required type a1 leaves aspect required types map empty also marks further running required when class loader weaving adaptor register aspects loop reaches a2 call bcel world add aspect requires since a2 also declares requires clause causes a2 its referenced class mapped aspect required types map however when bcel weaver add library aspect called a2 code reaches has unsatisfied dependency code assumes has already run which has a1 so does check indeed a2 referenced class can satisfied which we assume can other words all subsequent aspects a2 a3 etc declared having unsatisified dependencies which don quick bugfix seems rather simple every time bcel world add aspect requires method called should mark aspect required types processed false order force re evaluation case has unsatisfied dependency called using aspect requires clause causes all aspects requires clauses loaded regardless
from mailing list have following problem following aspect aspect public class counter aspect extends abstract moskito aspect around value execution annotation method public object count method proceeding join point pjp count method throws throwable return count pjp method producer id method subsystem method category around value execution annotation method public object count parameter proceeding join point pjp count parameter method throws throwable return count parameter pjp method producer id method subsystem method category around value execution within clazz public object count class proceeding join point pjp count clazz throws throwable return count pjp clazz producer id clazz subsystem clazz category private object count parameter proceeding join point pjp string producer id string subsystem string category throws throwable works however since have two similar aspects differ only using some internal classes made my super class using generics public class abstract moskito aspect extends istats aspect public class counter aspect extends abstract moskito aspect counter stats breaks build instantly very unhelpful error message error failed execute goal org codehaus mojo aspectj maven plugin compile default project moskito aop compiler errors error error around value execution annotation method error error users another projects moskito moskito aop java net anotheria moskito aop aspect counter aspect java 24 parameter pjp bound all branches pointcut error error around value execution annotation method error error users another projects moskito moskito aop java net anotheria moskito aop aspect counter aspect java 29 parameter pjp bound all branches pointcut error error around value execution within clazz error error users another projects moskito moskito aop java net anotheria moskito aop aspect counter aspect java 34 parameter pjp bound all branches pointcut what am doing wrong here weird error about unbound formals when mixing generics annotation style
when compiling java aspect can compute invalid stack map table verifier throw class found exception when generated class loaded example class parent class child extends parent class child extends parent public object method bad stack map table boolean value return value new child string new child string javap shows computed stack map table stack map table number entries frame type 15 same frame type 71 same locals stack item stack class parent when should stack map table number entries frame type 15 same frame type 71 same locals stack item stack class parent invalid stack map table generated java
added support more cache backing
current caching mechanism assumes same class encountered its cached weaved version can used however mechanism uses only fully qualified class name identify class does take account fact class bytes may have changed user re compiled re deployed some changes same class weaved aspects mechanism does take account modified classes
npe eclipse type munger munge new method
note real project private git repo bug has been shared andy clement privately reporting bug andy requested much info feel can have case where declare parents declare type instructions being applied because type patterns which use annotations whose properties enumerated types matching below find relevant artifacts shapes lines aspect persistable jpa aspect matching should declare parents declare type change annotation properties type string change type patterns use string literals see matches comments annotation store type jpa jpa id type long long matching works properly enums public enum store type mongo jdo jpa public enum id type long string annotation public interface persistable store type default store type mongo doesn match matches string default mongo id type id default id type string doesn match matches string id default string aspect public abstract privileged aspect persistable aspect public interface extends trait interfaces persistence persistable long version void version long version public interface extends long id long void id long long id public interface extends string id string void id string string id declare type configurable public privileged aspect persistable jpa aspect extends persistable aspect public interface jl extends public interface js extends declare parents persistable id id type long store type jpa implements jl declare parents persistable id id type string store type jpa implements js declare type persistable jpa jl entity declare type persistable jpa js entity declare parents type matching annotation properties enum types
declare parents pattern below getting runtime error compiler completes ok inconsistent classfile encountered undefined type parameter id referenced from within persistable aspect remove generics part interface declaration error goes away here pattern interface package example trait imports public interface persistable id extends serializable object get oid id get id string get id string long get version annotation package example anno imports target type retention runtime trait public interface persistable string default mongo store type enum default store type mongo string id default string id type id enum default id type string aspect package example aspect imports public privileged aspect persistable aspect public interface id extends serializable extends example trait persistable id public interface extends long public interface extends string declare parents persistable id long implements declare parents persistable id string implements remaining code itds introducing vars methods inconsistent classfile encountered undefined type parameter xxx referenced from within yyy
some support members aspects were getting synthetic attributes added twice once when compiled once when used aspect library some jvms appear flag verify error fix simply check before adding make sure attribute isn added twice double synthetic attributes some around advice members
from mailing list import org aspectj lang join point import org aspectj lang annotation after throwing import org aspectj lang annotation aspect aspect public class after throwing pointcut execution throwing after throwing throwing public void biz logger exception join point join point throwable do some stuff class biz loggable npe when pointcut annotation style advice
softening exception try resources
java lang runtime exception org aspectj weaver name mangler make visibility name name mangler java 297 org aspectj weaver name mangler inter method name mangler java 242 org aspectj weaver ajc member maker inter method ajc member maker java 538 org aspectj ajdt internal compiler problem aj problem reporter method must override aj problem reporter java 385 org aspectj org eclipse jdt internal compiler ast method declaration resolve statements job java 241 org eclipse core internal jobs worker run worker java 54 compile error runtime exception thrown protected inter types allowed runtime exception when trying compile broken code
error must implement abstract inter type declaration even though build fine
please see attached example project get following strange compiler error type mismatch cannot convert from inner inner baspect aj aspect jinnerclass generic type bug src de example line 12 type mismatch error when using inner classes contained generic types within itds
although cores useful may situations where you working around whatever reporting perhaps unable pick up later version aj includes fix situations might helpful make creation cores optional through sys prop make ajcore file creation optional
build identifier since updated version aspect development tools e37x 20120529 0900 get during compile java lang null pointer exception org aspectj weaver bcel bcel type munger create bridge method bcel type munger java 1325 org aspectj weaver bcel bcel type munger create any bridge methods covariance bcel type munger java 1272 org aspectj weaver bcel bcel type munger munge new method bcel type munger java 971 org aspectj weaver bcel bcel type munger munge bcel type munger java 108 org aspectj weaver bcel bcel class weaver weave bcel class weave before had aspect development tools e37x 20120507 1400 same project compiled without exception reproducible always npe bcel type munger create bridge method
build identifier ajdt version e37x 20110628 1900 aspect version 12 eclipse build id m20120208 0800 around advice targetting generic constructor call package visability generic privileged abstract apsect which extends abstract generic aspect gives compiler error when around advice method call made method defined aspect superaspect abstract defined methods only affects around advice only when aspect package visible privileged workaround either make aspect public remove privileged compiler output compile error illegal state exception thrown use generic type type stack trace java lang illegal state exception use generic type type org aspectj weaver resolved type munger init resolved type munger java 72 org aspectj weaver privileged access munger init privileged access munger java 31 org aspectj weaver crosscutting members add privileged accesses crosscutting members java 232 org aspectj weaver resolved type collect crosscutting members resolved type java 756 org aspectj weaver crosscutting members set add replace aspect crosscutting members set java 89 org aspectj weaver crosscutting members set add replace aspect crosscutting members set java 69 org aspectj weaver bcel bcel weaver prepare weave bcel weaver java 512 org aspectj ajdt internal compiler aj pipelining compiler adapter ensure weaver initialized aj pipelining compiler adapter java 529 org aspectj ajdt internal compiler aj pipelining compiler adapter weave queued entries aj pipelining compiler adapter java 509 org aspectj ajdt internal compiler aj pipelining compiler adapter queue weaving aj pipelining compiler adapter java 447 org aspectj ajdt internal compiler aj pipelining compiler adapter after processing aj pipelining compiler adapter java 432 org aspectj ajdt internal compiler compiler adapter ajc after org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 98 org aspectj org eclipse jdt internal compiler compiler process compiler java 652 org aspectj org eclipse jdt internal compiler compiler compile compiler java 392 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 1021 org aspectj ajdt internal core builder aj build manager perform build aj build manager java 305 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 185 org aspectj ajde core internal ajde core build manager perform build ajde core build manager java 127 org aspectj ajde core aj compiler build aj compiler java 91 org eclipse ajdt core builder ajbuilder build ajbuilder java 257 org eclipse core internal events build manager run build manager java 728 org eclipse core runtime safe runner run safe runner java 42 org eclipse core internal events build manager basic build build manager java 199 org eclipse core internal events build manager basic build build manager java 239 org eclipse core internal events build manager run build manager java 292 org eclipse core runtime safe runner run safe runner java 42 org eclipse core internal events build manager basic build build manager java 295 org eclipse core internal events build manager basic build loop build manager java 351 org eclipse core internal events build manager build build manager java 374 org eclipse core internal events auto build job do build auto build job java 143 org eclipse core internal events auto build job run auto build job java 241 org eclipse core internal jobs worker run worker java 54 session data eclipse build id m20120208 0800 java version 22 java vendor sun microsystems inc boot loader constants os win32 arch x86 64 ws win32 nl nl nl command line arguments data workspace os win32 ws win32 arch x86 64 reproducible always steps reproduce empty aspect project create file foo java import java util linked list public class foo public linked list bar new linked list return null create file foo aspect aj containing import java util abstract list import java util list abstract aspect foo aspect parent extends list protected int get number int return abstract privileged aspect foo aspect extends abstract list extends foo aspect parent pointcut pc call new around pc get number method call super aspect fails method method call abstract local defined method fails local method method call local private method fails math random works hash code works return null private void local method protected abstract method uncomment one more three commentted functions calls around advice compiler reproduce error note example list which generic object just illustration hierachy problem occured production code when doing same non generic hierachal objects way easiest issolate reproduce bug fastest package level abstract generic privileged aspect which extends abstract generic aspect gives illigal state exception method call around advice
build identifier version build id m20120208 0800 am using aspect m1 changed examples build xml use source compliance level verbose true follows iajc destdir classes dir verbose true source argfiles list when run using ant bean get following line iajc ignored source aspectj1 doc examples build xml 136 have tried running compiler ajc directly specifying source works am trying use large development project uses aspect has been migrated over java project uses ant do builds so critical iajc support project can built any java features used source files which defeats whole purpose moving java reproducible always steps reproduce change examples build xml use source compliance level verbose true follows iajc destdir classes dir verbose true source argfiles list run using ant bean get following line iajc ignored source aspectj1 doc examples build xml 136 iajc does support source compliance level
from mailing list goes wrong java public class public static void main string args system out println new get class get name r1 java public class r1 extends raj aj public aspect raj private thread local object aspect new thread local object pointcut create execution new object around create system out println aspect aspect get aspect get null return proceed else aspect set return new r1 compile command cygdrive program files java aspectj 12 bin ajc bat source outxml outjar araj jar classpath aspectjrt jar raj aj run cygdrive program files java aspectj 12 bin aj5 bat classpath araj jar errors apr 06 2012 37 40 pm org aspectj weaver tools jdk14trace error severe register definition failed java lang runtime exception problem processing attributes raj org aspectj weaver bcel bcel object type ensure aspect jattributes unpacked bcel object type java 385 attribute problems java compilation
build identifier version indigo service release build id 20120216 1857 java lang null pointer exception org aspectj org eclipse jdt internal compiler ast switch statement analyse code switch statement java 118 org aspectj org eclipse jdt internal compiler ast method declaration analyse code method declaration java 104 org aspectj org eclipse jdt internal compiler ast type declaration internal analyse code type declaration java 730 org aspectj org eclipse jdt internal compiler ast type declaration analyse build job run auto build job java 241 org eclipse core internal jobs worker run worker java 54 compile error null pointer exception thrown null reproducible always steps reproduce after updating eclipse plugin aspect throws nullpointer after its ide plugin update
build identifier 12 able reduce aspect ltw startup overhead app working from 95 seconds down 47 seconds just switching target call pointcut evaluation expense comparator seems make sense me target more expensive since requires type matching under profiler exact type pattern matches instanceof what shows up very expensive whereas call can evaluate very quickly most cases since just fails match method name sure specific my particular usage cutting 50 ltw startup very nice improvement you think change doesn make sense everyone can work patch makes configurable somehow thanks reproducible always performance improve pointcut calculation
performance regression 12
build identifier 11 static context map compilation weaving context keeps strong references thread instances which turn strongly reference context class loader which prevents all kinds stuff from unloading my particular use case am running unit tests each own weaving urlclass loader class loaders never released running several unit tests once leads perm gen out memory error using xx heap dump out memory analyzing resulting heap dump eclipse memory analyzer points compilation weaving context context map am able work around issue executing following end each unit test clear out context map compilation weaving context set multi threaded false compilation weaving context reset compilation weaving context set multi threaded true am also able resolve issue more patching compilation weaving context changing context map thread local reproducible always memory leak compilation weaving context leading perm gen oome
build identifier 20110916 0149 using import org aspectj lang annotation aspect import org aspectj lang annotation declare parents aspect public class aspect test private interface private static class ximpl declare parents value java lang runnable java util concurrent callable default impl ximpl class private impl throws org aspectj weaver bcexception org aspectj weaver patterns exact type pattern resolve bindings exact type pattern java 312 org aspectj weaver patterns type pattern resolve bindings type pattern java 121 org aspectj weaver bcel aj attributes handle declare parents annotation aj attributes java 746 org aspectj weaver bcel aj attributes read aj5class attributes aj attributes java 384 org aspectj weaver bcel bcel object type ens program files java jre6 lib ext sunjce provider jar users xxx software eclipse j2ee plugins org eclipse equinox launcher v20110502 jar current workaround use multiple declare parents annotations different variables reproducible always steps reproduce create new class given code details save compile eclipse org aspectj weaver bcexception compiling declare parents value using
you have type multiple type params like foo signature lfoo tt handling working type factory signature passed actually build foo having lost second type parameter breaks code later has expectations number params array index out bounds exception when building map type construction signature makes mistakes wildcards
java lang null pointer exception org aspectj weaver patterns exact annotation type pattern matches exact annotation type pattern java 128 org aspectj weaver patterns exact annotation type pattern matches exact annotation type pattern java 96 org aspectj weaver patterns annotation type pattern matches annotation type pattern java 42 org aspectj weaver patterns any annotation type pattern matches exactly any annotation type pattern java 55 org aspectj weaver patterns type pattern matches statically type pattern java 132 org aspectj weaver patterns type pattern matches type pattern java 146 org aspectj weaver patterns signature pattern could ever match signature pattern java 999 org aspectj weaver patterns declare annotation could ever match declare annotation java 483 org aspectj weaver bcel bcel class weaver get matching subset bcel class weaver java 1065 org aspectj weaver bcel bcel class weaver weave declare field bcel class weaver java 1301 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 445 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 100 org aspectj weaver bcel bcel weaver weave bcel weaver java 1687 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1631 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1394 org aspectj weaver bcel bcel weaver weave bcel weaver java 1180 org aspectj ajdt internal compiler aj pipelining compiler adapter weave queued entries aj pipelining compiler adapter java 514 org aspectj ajdt internal compiler aj pipelining compiler adapter queue weaving aj pipelining compiler adapter java 447 org aspectj ajdt internal compiler aj pipelining compiler adapter after processing aj pipelining compiler adapter java 432 org aspectj ajdt internal compiler compiler adapter ajc after org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 98 org aspectj org eclipse jdt internal compiler compiler process compiler java 652 org aspectj org eclipse jdt internal compiler compiler compile compiler java 392 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 1021 org aspectj ajdt internal core builder aj build manager perform build aj build manager java 268 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 181 org aspectj ajdt ajc ajdt command do command ajdt command java 112 org aspectj ajdt ajc ajdt command run command ajdt command java 60 org aspectj tools ajc main run main java 371 neo4j npe
build identifier upon using eclipse rename resource dialog rename my project src main resources meta inf spring email properties file scheduler properties same directory eclipse displayed aspect internal compiler error dialog stack trace java io file found exception java io file input stream open native method java io file input stream init file input stream java 120 org aspectj ajdt internal core builder aj build manager copy resources from file aj build manager java 528 org aspectj ajdt internal core builder aj build manager copy resources destination aj build manager java 466 org aspectj ajdt internal core builder aj build manager perform build aj build manager java 363 error file found exception thrown users aswan projects foo src main resources meta inf spring email properties file directory reproducible couldn reproduce steps reproduce npe aj build manager java 528 after non java aj file renamed
build identifier 20100617 1415 activated nullpointer exception breakpoint recently stumpled upon thrown npe document parser parse method line 106 public static definition parse final url url throws exception input stream null try cache parsed files contains key url string return parsed files get url string definition def null lightparser def simple aopparser parse url else def sax parsing url cache def get aspect class names size parsed files put url string def return def finally try close catch throwable parsing file works fine merely input stream seems used anymore reproducible always nullpointer exception while parsing definition file aop xml document parser
npe when saving aspect aspectj internal compiler error
file grails util build settings contains bytecode where constructors recursive you can compile java groovy generates some code where switches value ctor certain value recursive ctor call made imagine never happens practice because bytecode trips up aspect code which inlines calls before weaving since gets infinite loop now just keep track ctors making recursive call so don get trapped infinite loop constructor inlining can fail some groovy built code
race condition java lang type resolved type converter potentially exposed through spring aop
java lang null pointer exception org aspectj weaver bcel bcel shadow delete new dup bcel shadow java 179 org aspectj weaver bcel bcel shadow prepare mungers bcel shadow java 303 org aspectj weaver shadow implement shadow java 543 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 3147 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 490 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 100 org aspectj weaver bcel bcel weaver weave bcel weaver java 1687 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1631 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1394 org aspectj weaver bcel bcel weaver weave bcel weaver java 1180 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 467 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 318 org aspectj weaver loadtime aj pre process aj java 96 npe delete new dup
build identifier 11 kind problem can occur complex class loader hierarchies since really problem we should make debug level message so write log messages un necessarily reproducible always steps reproduce create application has some weaved class loaders hierarchy recommend some urlclass loader derived ones add same jar only aop xml file more than one loader along hierarchy make loader default context thread loader start running some code need demote warning ignoring duplicate definition from warning debug
when overweaving possible class get second weaver state attribute second one valid hasn been correctly configured isn normally problem because next thing happens class defined vm another weave step occurs malformed attribute cause weave fail kind message bad weaver state kind 115 solution avoid adding duplicate when overweaving overweaving can attribute duplicate attributes one which deserialize correctly
raised spring insight team observed system where using special classloader subclassing weaving url classloader see fail weave aspect overweaving overweaving misbehaving when subclassing weaving urlclass loader
build identifier 11 message repeated every time new class loader being use load weaving using dorg aspectj tracing factory default since value system property need display its value more than once even check more than once could lazily initialized cached reproducible always steps reproduce use dorg aspectj tracing factory default daspectj overweaving true properties place some jar contains aop xml some aspects weaving options where can loaded visible from several class loaders runt application check stdout output repeated output aspectj aspectj overweaving true overweaving switched
build identifier 20110218 0911 java lang null pointer exception org aspectj weaver bcel utility append conversion utility java 272 org aspectj weaver bcel bcel var append convertable array load bcel var java 81 org aspectj weaver bcel bcel var create convertable array load bcel var java 101 org aspectj weaver bcel bcel shadow make closure class return constructor bcel shadow java 3066 org aspectj weaver bcel bcel shadow weave around closure bcel shadow java 2830 org aspectj weaver bcel bcel advice implement bcel advice java 342 org aspectj weaver shadow implement mungers shadow java 630 org aspectj weaver shadow implement shadow java 544 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 3147 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 490 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 100 org aspectj weaver bcel bcel weaver weave bcel weaver java 1687 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1631 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1394 org aspectj weaver bcel bcel weaver weave bcel weaver java 1180 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 467 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 318 org eclipse equinox weaving aspectj loadtime osgi weaving adaptor weave class unknown source org eclipse equinox weaving aspectj aspect jweaving service pre process unknown source org eclipse equinox weaving adaptors weaving adaptor weave class unknown source org eclipse equinox weaving hooks weaving hook process class unknown source org eclipse osgi baseadaptor loader classpath manager define class classpath manager java 575 org eclipse osgi baseadaptor loader classpath manager find class impl classpath manager java 550 org eclipse osgi baseadaptor loader classpath manager find local class impl classpath manager java 481 org eclipse osgi baseadaptor loader classpath manager find local class lock class loader classpath manager java 469 org eclipse osgi baseadaptor loader classpath manager find local class classpath manager java 449 org eclipse osgi internal baseadaptor default class loader find local class default class loader java 216 org eclipse osgi internal loader bundle loader find local class bundle loader java 393 org eclipse osgi internal loader bundle loader find class internal bundle loader java 469 org eclipse osgi internal loader bundle loader find class bundle loader java 422 org eclipse osgi internal loader bundle loader find class bundle loader java 410 org eclipse osgi internal baseadaptor default class loader load class default class loader java 107 java lang class loader load class class loader java 247 org eclipse osgi internal loader bundle loader load class bundle loader java 338 org eclipse osgi framework internal core bundle host load class bundle host java 232 org eclipse osgi framework internal core abstract bundle load class abstract bundle java 1197 org osgi util bundle delegating class loader find class bundle delegating class loader java 99 org osgi util bundle delegating class loader load class bundle delegating class loader java 157 java lang class loader load class class loader java 247 org util class utils name class utils java 257 org beans factory support abstract bean definition resolve bean class abstract bean definition java 408 org beans factory support abstract bean factory do resolve bean class abstract bean factory java 1271 org beans factory support abstract bean factory resolve bean class abstract bean factory java 1242 org beans factory support abstract autowire capable bean factory predict bean type abstract autowire capable bean factory java 576 org beans factory support abstract bean factory factory bean abstract bean factory java 1319 org beans factory support default listable bean factory get bean names type default listable bean factory java 315 org osgi context support abstract delegated execution application context invoke bean factory post processors abstract delegated execution application context java 391 org osgi context support abstract delegated execution application context invoke bean factory post processors abstract delegated execution application context java 364 org osgi context support abstract delegated execution application context run abstract delegated execution application context java 256 org osgi util internal privileged utils execute custom tccl privileged utils java 87 org osgi context support abstract delegated execution application context start refresh abstract delegated execution application context java 222 org osgi extender internal dependencies startup dependency waiter application context executor stage one dependency waiter application context executor java 225 org osgi extender internal dependencies startup dependency waiter application context executor refresh dependency waiter application context executor java 178 org osgi context support abstract delegated execution application context refresh abstract delegated execution application context java 159 org osgi extender internal activator lifecycle manager run lifecycle manager java 223 java lang thread run thread java 662 reproducible sometimes aspect reports abort trouble while class startup
discovered whilst working steve ash build few projects consuming more than 2gigs heap recover memory steve activated type demotion didn appear help much due steve projects using aspectpath aspectpath scanning discover aspects making any types discovered aspectpath permanent types expendable never demoted evicted types were all being made permanent case were aspect never being demoted turns out were roo petclinic added spel dependency aspectpath parsed simple expression just further exaggerate problem leaving 213 types fixed area typemap correctly scanning aspectpath demoting non aspects reduced 90 world type map fixed expendable problems
register definition failed null pointer exception
build identifier i20100608 0911 generic type used pointcut bound target must omit actual type name thus causes raw type must parametrized compiler warning suppress ajwarning suppress warning annotations does turn off reproducible always steps reproduce code snippets pointcut ivolist update ivolist list target list call void update list public interface ivolist extends ivalue object extends list serializable void update list list new list public interface ivalue object extends comparable ivalue object serializable cant suppress raw types warning pointcut
code public class city private string name private country country separate file public aspect traffic calculator public static class city traffic calculator function city time extreme create extreme traffic function city time basic create basic traffic private static function city time create extreme traffic return null private static function city time create basic traffic return null public static class time try full build following exception java lang null pointer exception org aspectj ajdt internal compiler ast intertype member class declaration resolve type intertype member class declaration java 238 org aspectj ajdt internal compiler ast intertype member class declaration build intertype member class declaration java 246 org aspectj ajdt internal compiler ast aspect declaration process intertype member types aspect declaration java 1039 org aspectj ajdt internal compiler lookup aj lookup environment process inter type member types aj lookup environment java 523 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 197 org aspectj org eclipse jdt internal compiler compiler internal begin compile compiler java 616 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 357 org aspectj org eclipse jdt internal compiler compiler compile compiler java 371 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 1021 org aspectj ajdt internal core builder aj build manager perform build aj build manager java 305 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 185 org aspectj ajde core internal ajde core build manager perform build ajde core build manager java 127 org aspectj ajde core aj compiler build aj compiler java 91 org eclipse ajdt core builder ajbuilder build ajbuilder java 257 org eclipse core internal events build manager run build manager java 629 org eclipse core runtime safe runner run safe runner java 42 org eclipse core internal events build manager basic build build manager java 172 org eclipse core internal events build manager basic build build manager java 203 org eclipse core internal events build manager run build manager java 255 org eclipse core runtime safe runner run safe runner java 42 org eclipse core internal events build manager basic build build manager java 258 org eclipse core internal events build manager basic build loop build manager java 311 org eclipse core internal events build manager build build manager java 343 org eclipse core internal events auto build job do build auto build job java 144 org eclipse core internal events auto build job run auto build job java 242 org eclipse core internal jobs worker run worker java 54 npe when accessing static class inside itit
java lang unsupported class version error when running java
npe when weaving java lang object org aspectj weaver bcel bcel type munger create any bridge methods covariance bcel type munger java 1251
reported ramnivas due use numerous chars scala classnames some aspect handling inner classes breaks down should possible correctly use available class attributes rather than mess around attributes while back one use did contribute change enable scala weaving which tried use inner classes attribute before falling back string chopping however we have now hit another case scenario we dealing class scala predef anon scala library snapshot version what we normally do here type we discover inner class attribute refer outerclass index holds due being anonymous inner inside method index so we fail process attribute string chopping come up stupid guessed name outer solution use enclosing method attribute situations enclosing method attribute optional attribute class must have enclosing method attribute only local class anonymous class class may have more than one enclosing method attribute enclosing method attribute includes pointer containing outerclass had method which encloses inner type problem weaving anonymous inner member owned classes scala library
java lang illegal state exception can answer binding questions prior resolving org aspectj weaver type variable can bound type variable java 175 org aspectj weaver reference type assignable from reference type java 496 org aspectj weaver reference type assignable from reference type java 399 org aspectj weaver resolved type check legal override resolved type java 1999 org aspectj weaver resolved type clashes existing member resolved type java 1843 org aspectj weaver resolved type add inter type munger resolved type java 1699 org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 795 org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 652 org aspectj ajdt internal compiler lookup aj lookup environment create binary type from aj lookup environment java 1398 org aspectj org eclipse jdt internal compiler lookup lookup environment create binary type from lookup environment java 599 org aspectj org eclipse jdt internal compiler compiler accept compiler java 276 org aspectj org eclipse jdt internal compiler lookup lookup environment ask type lookup environment java 113 org aspectj org eclipse jdt internal compiler lookup unresolved reference binding resolve unresolved reference binding java 49 org aspectj org eclipse jdt internal compiler lookup binary type binding resolve type binary type binding java 99 org aspectj org eclipse jdt internal compiler lookup lookup environment get type lookup environment java 971 org aspectj ajdt internal compiler lookup eclipse factory lookup binding eclipse factory java 749 org aspectj ajdt internal compiler lookup eclipse factory make type binding1 eclipse factory java 743 org aspectj ajdt internal compiler lookup eclipse factory make type binding eclipse factory java 605 org aspectj ajdt internal compiler lookup aj lookup environment add parent aj lookup environment java 1314 org aspectj ajdt internal compiler lookup aj lookup environment do declare parents aj lookup environment java 902 org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 730 org aspectj ajdt internal compiler lookup aj lookup environment weave intertypes aj lookup environment java 418 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 255 org aspectj org eclipse jdt internal compiler compiler internal begin compile compiler java 616 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 357 org aspectj org eclipse jdt internal compiler compiler compile compiler java 371 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 1021 org aspectj ajdt internal core builder aj build manager perform build aj build manager java 268 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 181 org aspectj ajdt ajc ajdt command do command ajdt command java 112 org aspectj ajdt ajc ajdt command run command ajdt command java 60 org aspectj tools ajc main run main java 371 org aspectj tools ajc main run main main java 248 org codehaus mojo aspectj abstract ajc compiler execute abstract ajc compiler java 360 org apache maven plugin default plugin manager execute mojo default plugin manager java 490 org apache maven lifecycle default lifecycle executor execute goals default lifecycle executor java 694 org apache maven lifecycle default lifecycle executor execute goal lifecycle default lifecycle executor java 556 org apache maven lifecycle default lifecycle executor execute goal default lifecycle executor java 535 org apache maven lifecycle default lifecycle executor execute goal handle failures default lifecycle executor java 387 org apache maven lifecycle default lifecycle executor execute task segments default lifecycle executor java 348 org apache maven lifecycle default lifecycle executor execute default lifecycle executor java 180 org apache maven default maven do execute default maven java 328 org apache maven default maven execute default maven java 138 org apache maven cli maven cli main maven cli java 362 org apache maven cli compat compatible main main compatible main java 60 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 java lang reflect method invoke method java 597 org codehaus classworlds launcher launch enhanced launcher java 315 org codehaus classworlds launcher launch launcher java 255 org codehaus classworlds launcher main exit code launcher java 430 org codehaus classworlds launcher main launcher java 375 illegal state exception generic itd usage
weaving adaptor requires aspect path composed urls url file encoded example contains spaces represented 20 converts file urls simple string paths tries access files pointed those paths done inside file util make classpath url method uses url get path obtain path method does decode string returns url when later string used create new file instance file contains invalid path weaver fails follows caused org aspectj bridge abort exception bad aspect library home sym path 20with 20space aspect library jar org aspectj weaver tools weaving adaptor weaving adaptor message holder handle message weaving adaptor java 624 org aspectj bridge message util error message util java 80 org aspectj weaver tools weaving adaptor error weaving adaptor java 504 org aspectj weaver tools weaving adaptor add aspect library weaving adaptor java 472 org aspectj weaver tools weaving adaptor register aspect libraries weaving adaptor java 447 org aspectj weaver tools weaving adaptor init weaving adaptor java 177 org aspectj weaver tools weaving adaptor init weaving adaptor java 112 issue quite important because older windows documents settings common path example maven stores its repository multiple solutions possible simple bug order impact decode string obtained url get path using urlencoder decode use files instead strings let java handle url using file uri constructor don assume aspect libraries files hence urls file url use fetch aspect library contents plan spaces file names causes aspect weaver fail
build identifier 20100617 1415 after removing throws clause from constructor class saving got following error java lang null pointer exception org aspectj asm internal aspect jelement hierarchy get canonical file path aspect jelement hierarchy java 677 org aspectj asm internal aspect jelement hierarchy update handle map aspect jelement hierarchy java 641 org aspectj asm asm manager remove structure model files asm manager java 572 org aspectj asm asm manager process delta asm manager java 604 org aspectj ajdt internal core builder aj build manager build job run auto build job java 242 org eclipse core internal jobs worker run worker java 54 compile error null pointer exception thrown null reproducible didn try null pointer exception aspect jelement hierarchy java 677
build identifier 20100617 1415 when compile my aspect project get aspect internal compiler error stack trace java lang null pointer exception org aspectj ajdt internal core builder aj build manager find output dirs aspects aj build manager java 725 org aspectj ajdt internal core builder aj build manager write outxml file aj build manager java 652 org aspectj ajdt internal core builder aj build manager perform build aj build manager java 367 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 181 org aspectj run global build action java 179 org eclipse core internal jobs worker run worker java 54 digged bit looked classes would seem aj state get aspect names file name map can return null aj build manager find output dirs aspects taken account when aj build config get compilation result destination manager returns null list one element when returns list several elements reproducible always steps reproduce always happen my didn try make happen again another workspace here steps followed generate aspect project maven using pom xml ll join create aspect few pointcuts few advices compile maven eclipse compilation null pointer exception aj build manager find output dirs aspects when compiling aspect project generated maven
npe args matching argument type
build identifier 20100617 1415 using aspect version 10 hit blow exception after saving edited java file java lang array index out bounds exception org aspectj ajdt internal core builder aj state has structural changes aj state java 1767 org aspectj ajdt internal core builder aj state record class file aj state java 1510 org aspectj ajdt internal core builder aj state note result aj state java 1322 org aspectj ajdt internal core builder aj build manager accept result aj build manager java 1049 org aspectj ajdt internal compiler aj pipeli run auto build job java 242 org eclipse core internal jobs worker run worker java 54 compile error array index out bounds exception thrown 14 reproducible didn try array index out bounds exception aj state java 1767
build identifier org aspectj weaver jar modifiers pattern get modifier flag non synchronized static method using static map modifier flags can lead concurrent modification exception when code executed multi threaded environment stack trace showing erroneous behavior appended end bug report our case introduced using spring dm leads many application contexts being initialized parallel each them can contain pointcut expression which processed independent threads spring aop enters aspect world calling pointcut parser parse pointcut expression since guarantee concurrent modification exception thrown also possible concurrent read write accesses modifier flags map recognized incorrect values used org beans factory bean creation exception error creating bean name session factory proxy post processing factory bean object failed nested exception java util concurrent modification exception concurrent access hash map attempted thread spring osgi extender thread 43 spring osgi extender 6dee6dee threads org beans factory support factory bean registry support run factory bean registry support java 142 java security access controller do privileged access controller java 219 org beans factory support factory bean registry support do get object from factory bean factory bean registry support java 116 org beans factory support factory bean registry support get object from factory bean factory bean registry support java 91 org beans factory support abstract bean factory get object bean instance abstract bean factory java 1288 org beans factory support abstract bean factory do get bean abstract bean factory java 217 org beans factory support abstract bean factory get bean abstract bean factory java 185 org beans factory support abstract bean factory get bean abstract bean factory java 164 org beans factory support default listable bean factory pre instantiate singletons default listable bean factory java 425 org context support abstract application context finish bean factory abstract application context java 728 org osgi context support abstract delegated execution application context access 1600 abstract delegated execution application context java 69 org osgi context support abstract delegated execution application context run abstract delegated execution application context java 355 org osgi util internal privileged utils execute custom tccl privileged utils java 85 org osgi context support abstract delegated execution application context complete refresh abstract delegated execution application context java 320 org osgi extender internal dependencies startup dependency waiter application context executor complete refresh task run dependency waiter application context executor java 136 java lang thread run thread java 811 caused java util concurrent modification exception concurrent access hash map attempted thread spring osgi extender thread 43 spring osgi extender 6dee6dee threads java util hash map entry hash map java 214 java util hash map transfer hash map java 686 java util hash map resize hash map java 676 java util hash map add entry hash map java 1049 java util hash map put hash map java 561 org aspectj weaver patterns modifiers pattern get modifier flag modifiers pattern java 87 org aspectj weaver patterns pattern parser parse modifiers pattern pattern parser java 1169 org aspectj weaver patterns pattern parser parse method constructor signature pattern pattern parser java 1248 org aspectj weaver patterns pattern parser parse kinded pointcut pattern parser java 603 org aspectj weaver patterns pattern parser parse single pointcut pattern parser java 317 org aspectj weaver patterns pattern parser parse atomic pointcut pattern parser java 295 org aspectj weaver patterns pattern parser parse pointcut pattern parser java 256 org aspectj weaver tools pointcut parser resolve pointcut expression pointcut parser java 328 org aspectj weaver tools pointcut parser parse pointcut expression pointcut parser java 309 org aop aspectj aspect jexpression pointcut build pointcut expression aspect jexpression pointcut java 206 org aop aspectj aspect jexpression pointcut check ready match aspect jexpression pointcut java 193 org aop aspectj aspect jexpression pointcut get class filter aspect jexpression pointcut java 174 org aop support aop utils can apply aop utils java 195 org aop support aop utils can apply aop utils java 250 org aop support aop utils find advisors can apply aop utils java 284 org aop framework autoproxy abstract advisor auto proxy creator find advisors can apply abstract advisor auto proxy creator java 113 org aop framework autoproxy abstract advisor auto proxy creator find eligible advisors abstract advisor auto proxy creator java 85 org aop framework autoproxy abstract advisor auto proxy creator get advices advisors bean abstract advisor auto proxy creator java 66 org aop framework autoproxy abstract auto proxy creator wrap necessary abstract auto proxy creator java 362 org aop framework autoproxy abstract auto proxy creator post process after abstract auto proxy creator java 325 org beans factory support abstract autowire capable bean factory apply bean post processors after abstract autowire capable bean factory java 361 org beans factory support abstract autowire capable bean factory post process object from factory bean abstract autowire capable bean factory java 1429 org beans factory support factory bean registry support run factory bean registry support java 139 15 more reproducible sometimes modifiers pattern get modifier flag thread safe
java lang null pointer exception org aspectj weaver reference type get per clause reference type java 823 org aspectj weaver patterns per from super lookup concrete per clause per from super java 82 org aspectj weaver patterns per from super concretize per from super java 61 org aspectj weaver crosscutting members set per clause crosscutting members java 512 org aspectj weaver resolved type collect crosscutting members resolved type java 748 build job run auto build job java 242 org eclipse core internal jobs worker run worker java 54 npe perclause
build identifier 10 while weaving life ray over tomcat 26 sometimes next exceptions appear java lang stack overflow error java lang string index string java 1521 org aspectj weaver type factory create type from signature type factory java 199 org aspectj weaver unresolved type signature unresolved type java 375 org aspectj weaver unresolved type get raw type unresolved type java 533 org aspectj weaver resolved type get raw type resolved type java 2400 org aspectj weaver reference type assignable from reference type java 430 org aspectj weaver reference type assignable from reference type java 399 org aspectj weaver reference type assignable from reference type java 430 org aspectj weaver reference type assignable from reference type java 399 org aspectj weaver reference type assignable from reference type java 430 org aspectj weaver reference type assignable from reference type java 399 org aspectj weaver reference type assignable from reference type java 430 org aspectj weaver reference type assignable from reference type java 399 org aspectj weaver reference type assignable from reference type java 430 org aspectj weaver reference type assignable from reference type java 399 org aspectj weaver reference type assignable from reference type java 430 org aspectj weaver reference type assignable from reference type java 399 org aspectj weaver reference type assignable from reference type java 430 org aspectj weaver reference type assignable from reference type java 399 org aspectj weaver reference type assignable from reference type java 430 org aspectj weaver reference type assignable from reference type java 399 reproducible sometimes sometimes stack overflow got while weaving
following aspect public aspect aspect public void q2 class something2 aspect itd has following handle identifier notice itd name fully qualified aspect project src2 aspect aj aspect class something2 however should fully qualified name aspect project src2 aspect aj aspect q2 class something2 means fully qualified itds cannot navigated searched little surprised doesn work because thought had tests fully qualified itd has incorrect handle identifier
have type being used where generic being expected generic specifies upper bound type only obeys upper bound once declare parents has applied have intertype declaration field when itd applied we do some work see clashes existing fields causes existing fields resolved resolution triggers bounds check declare parents affected type before declare parents has applied problem raised basically target declare processed before intertype we ok luck based we should do declare parents first declare annotation do intertype declarations since may trigger extra resolution early field resolution leading problems itds when declare parents use
build identifier 20100218 1602 aspect setup works however exactly same setup changing aspect version derive same error piece code excluded from aop xml woven causing verify error we using proxool proxy setup which fact uses cglib create enhancer proxy class order avoid verify error exceptions proxool classes excluded from aop xml exactly same way cglib workarround commented aspect faq exclude within proxool error we got when we upgrade our jar same got when using jvm 2010 08 03 16 42 53 java lang verify error class oracle jdbc internal oracle connection enhancer proxool 7f6320a8 method get tdo cstate signature ljava lang string ljava lang string inconsistent stack height jvm 2010 08 03 16 42 53 java lang class get declared methods0 native method jvm 2010 08 03 16 42 53 java lang class private get declared methods class java 2427 jvm 2010 08 03 16 42 53 java lang class get declared method class java 1935 jvm 2010 08 03 16 42 53 org cglib proxy enhancer get callbacks setter enhancer java 627 jvm 2010 08 03 16 42 53 org cglib proxy enhancer set callbacks helper enhancer java 615 jvm 2010 08 03 16 42 53 org cglib proxy enhancer set thread callbacks enhancer java 609 jvm 2010 08 03 16 42 53 org cglib proxy enhancer create using reflection enhancer java 631 jvm 2010 08 03 16 42 53 org cglib proxy enhancer first instance enhancer java 538 jvm 2010 08 03 16 42 53 org cglib core abstract class generator create abstract class generator java 225 jvm 2010 08 03 16 42 53 org cglib proxy enhancer create helper enhancer java 377 jvm 2010 08 03 16 42 53 org cglib proxy enhancer create enhancer java 285 far verify error got while deploying one applications run serve we able use new versions aspect because application properly started up thank you very much advance best regards reproducible always steps reproduce exclude proxool classes from aop xml using aspectj works upgrade does work upgrade does work way exclude proxool classes although excluded from aop causing veryfy error
fixing recent roo related issue where annotations resolved too early before declare parents done cache introduced eclipse source type see ensure annotation types resolved cache needs cleared set annotation declarations changes can occur even after parsing because declare annotation can change them caching eclipse source type too aggressive
raised peter melnikov mailing list two problems binding scope being used annotation style aspects accumulates lots duplicate import prefixes simple scope object simple scope lookup type tries prefixes even type already fully qualified combination issues causes terrible mess lots class lookup failures since type cannot partially qualified silly use prefixes type fully qualified import handling type lookup issues
null pointer exception during weaving
reported list java lang null pointer exception org aspectj weaver bcel bcel world aspect included bcel world java 942 org aspectj weaver shadow munger match shadow munger java 80 org aspectj weaver advice match advice java 106 org aspectj weaver bcel bcel advice match bcel advice java 149 org aspectj weaver bcel bcel class weaver match bcel class weaver java 3108 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2562 npe when using aop xml compile time config
plan ltw hcr ltw reweaving hot code replace changes reflected every two saves files
ajdt uses pointcut like persingleton org eclipse ajdt internal ui ras uiffdc handler java lang throwable args arg1 within org eclipse ajdt within org eclipse ajdt internal ui lazystart within org eclipse ajdt internal ui dialogs open type selection dialog2 within org eclipse ajdt internal ui editor aspect jbreakpoint ruler action handler org eclipse jface text bad location exception within org eclipse ajdt core ras ffdc handler org eclipse core runtime operation canceled exception java lang object after pointcut rewriter has chewed reduced normal form meant stable form further rewrites would change turned out case hashcodes some components were quite large manifested negative integers arithmetic comparator elements would have problem give unhelpful responses example elements were might rewrite them subsequent rewrite would realise less than giving whether went wrong dependent order which elements were collected rewriter now fixed impacts incremental compilation sometimes two pointcuts should identical look different because one has been through rewritter more times than other pointcut rewriter can have issues large hashcode values
stack trace java lang null pointer exception org aspectj weaver model asm relationship provider create source location asm relationship provider java 303 org aspectj weaver model asm relationship provider add pointcuts asm relationship provider java 580 org aspectj weaver model asm relationship provider create hierarchy binary aspect asm relationship provider java 562 org aspectj weaver model asm relationship provider add advised relationship asm relations areturn end public object run object end public class com cerner isis biz services asclepius patient patient manager impl test ajc closure3 happening when weaving jar aspect jar aspect internal compiler error
build identifier eclipse aspect development tools version e35x 20100419 1200 aspect version java lang runtime exception org aspectj asm asm manager remove single node asm manager java 1143 org aspectj asm asm manager remove targetting type asm manager java 798 org aspectj weaver bcel bcel weaver weave bcel weaver java 1173 org aspectj ajdt internal compiler aj pipelining compiler adapter weave queued entries aj pipelining compiler adapter java 455 org aspectj ajdt internal compiler aj pipelining compiler adapter handle xstm stm com argilsoft xstm core tkeyed java tkeyed visitor field set java util array list com argilsoft xstm core visitor continue stack reproducible sometimes steps reproduce random exception popup eclipse java lang runtime exception asm manager java 1143
here code method public string get type boolean get fully qualified type string return type string kvpairs get return type return type null return type get fully qualified type return return type int index return type last index index return return type substring index return return type line return return type substring index should using index bug program element get type
order get ajdt ant integration working we need small change main java we need able pass custom org aspectj bridge icommand object currently icommand object created via reflection here my suggestion augment icommand local variable being field add setter field change icommand command reflection factory make command command name holder command null command reflection factory make command command name holder changes main java
hasfield hasmethod can cause early matching before weaving process kicks properly normal compile error like unresolvable import error put out before weaving process kicks off however hasfield hasmethod happening early causes npe occur before error put out guard npe which occurs eclipse resolved member get annotation types addresses problem allows real error come out npe when hasfield evaluating annotations unresolved import
allow declare error declare warning support type expressions
reported rod johnson he had aspect doing mix itds declare parents doing incremental build he receiving errors looked like declare parents hadn applied secondary build what actually happening when class file brought binary type binding existing world wasn being cleaned up properly without cleanup declare parents thought still effect proper cleanup declare parents applies secondary build all well change aj lookup enviroment weave inter type declarations where type clear inter type mungers must paired type ensure consistent call incremental build problem when mixing up itds declare parents
build identifier spring source sts java util concurrent modification exception java util hash map hash iterator next entry hash map java 793 java util hash map key iterator next hash map java 828 org aspectj asm internal aspect jelement hierarchy update handle map aspect jelement hierarchy java 594 org aspectj asm asm manager remove structure model files asm manager java 564 org aspectj asm asm manager process delta asm manager java 639 org aspectj ajdt internal core un auto build job java 238 org eclipse core internal jobs worker run worker java 55 compile error concurrent modification exception thrown null reproducible always steps reproduce generate abstract class using spring roo edit file within eclipse sts add jpa annotations click save icon save file exceptions box pops up exception thrown when saved file eclipse
suspected problem handling multiple aop xml files
unclosed stream aj attribute
support load time weaving hot swap
npe multiple declare methods
java lang runtime exception org aspectj weaver resolved type get annotations resolved type java 718 org aspectj weaver abstract annotation aj retrieve annotation annotation abstract annotation aj java 123 org aspectj weaver abstract annotation aj ensure target initialized abstract annotation aj java 85 org aspectj weaver abstract annotation aj specifies target abstract annotation aj java 115 org aspectj weaver bcel bcel weaver verify ta eclipse core internal jobs worker run worker java 55 compile error runtime exception thrown resolved type get annotations should never called runtime exception weaving roo app advice based execution pointcut
aspect ltw cobertura
unclosed stream org aspectj weaver bcel extensible urlclass loader
potentially unclosed stream org aspectj weaver bcel bcel world
user agent mozilla macintosh intel mac os 10 en gb rv gecko 20090729 firefox build identifier jvm detection lang utils currently unable handle java7 whilst naturally unreleased version jvm fix trivial reproducible always steps reproduce attempt use lang utils java version support java7 lang utils jvm version detection cannot handle java
failure close inputstream
reported ramnivas java lang null pointer exception org aspectj weaver bcel bcel object type has annotation bcel object type java 558 org aspectj weaver reference type has annotation reference type java 161 org aspectj weaver patterns exact annotation type pattern matches exact annotation type pattern java 101 org aspectj weaver patterns exact annotation type pattern matches exact annotation type pattern java 94 org aspectj weaver patterns any annotation type pattern matches exactly type pattern java 513 org aspectj weaver patterns type pattern matches statically type pattern java 129 org aspectj weaver patterns declare annotation matches declare annotation java 269 org aspectj weaver bcel bcel weaver apply declare type bcel weaver java 1590 npe using declare type
seen ramnivas pointcut uses exact type name annotation execution controller resolving pointcut causes us construct reference type controller we attempt populate loading class recurses back weaver controller loaded attempt made weave takes second route through weaver build again second cached world when we unwind we continue building original left one cache one resolved pointcut due use comparison we fail match join points later because use reference type from cache sometimes when load time weaving two reference type objects same type
java doc runner fails system set security manager netbeans
reported list hi am using aspectj ltw weaving aspect available another jar within my web application code while building jar which contains aspect using maven have junits which run without any problems using ltw my aspect code looks below around execution com arisglobal aglite annotations operation trail public executor public object audit operation proceeding join point join point object executor aspect code however when deploy application tomcat javaagent jar option get npe which have pasted below jun 2009 12 06 18 pm org aspectj weaver tools jdk14trace error severe com arisglobal aglite services actiontrail action trail aspect java lang null pointer exception org aspectj weaver bcel bcel object type get annotation target kinds bcel bject type java 612 org aspectj weaver reference type get annotation target kinds reference ty pe java 265 org aspectj weaver patterns signature pattern check incorrect target ind signature pattern java 112 org aspectj weaver patterns signature pattern check incorrect target ind signature pattern java 94 org aspectj weaver patterns signature pattern resolve bindings signatur pattern java 87 org aspectj weaver patterns kinded pointcut resolve bindings kinded poin tcut java 262 org aspectj weaver patterns pointcut resolve bindings pointcut ava 75 org aspectj weaver patterns pointcut resolve pointcut java 196 org aspectj weaver bcel aj attributes handle around annotation aj att ributes java 1308 org aspectj weaver bcel aj attributes read aj5method attributes aj tributes java 403 org aspectj weaver bcel bcel method unpack aj attributes bcel method java 189 org aspectj weaver bcel bcel method init bcel method java 96 org aspectj weaver bcel bcel object type get declared methods bcel object ype java 264 org aspectj weaver bcel lazy class gen init lazy class gen java 303 org aspectj weaver bcel bcel object type get lazy class gen bcel object type java 524 org aspectj weaver bcel bcel weaver weave bcel weaver java 1728 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 696 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 145 org aspectj weaver bcel bcel weaver weave bcel weaver java 1244 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 423 org aspectj weaver tools weaving adaptor weave class weaving adaptor jav 286 org aspectj weaver loadtime aj pre process aj java 95 org aspectj weaver loadtime class pre processor agent adapter transform lass pre processor agent adapter java 52 sun instrument transformer manager transform transformer manager java 22 sun instrument impl transform impl java 155 java lang class loader define class1 native method java lang class loader define class class loader java 620 also tried using version however got same error npe determining annotation target kind during weaving
build id steps reproduce attempt parse two aop xml files using two document parsers loaded same class loader dtd loaded from jar file you ll get npe java util zip inflater inflate bytes native method more information document parser caches dtd input stream static final field many input streams unusable after being closed so same instance should used here inflater input streams seems bug jre prevents stream from reporting itself closed when you use again document parser incorrectly caches dtd input stream
following project throws compiler exception when project property add variable attributes generated class files turned off compile exception when using debug info
am using aspectj runtime jar spring source bundle repository have renamed jar match naming conventions causing warning occur bundle named com springsource org aspectj runtime release jar would nice warning printed out case warning couldn find aspectjrt jar classpath
build id m20090211 1700 steps reproduce have two pieces after advice my aspect cross reference view see all joinpoints both after advice selecting one after advice statements when select other after advice statement see joinpoints when select marker either piece after advice see all joinpoints both pieces advice open perform clean compile attached project open xref view select line 22 note you see joinpoints should only select line 68 note you see zero joinpoints should here right click marker line 68 choose advises note you see all joinpoints right click marker line 22 choose advises note you see all joinpoints more information handles cross reference view markers mix up joinpoints assigned advice
incremental incremental compilation aspects incoming classpath aspectpath
when doing clean build my project seeing dozens upwards 100 npes similar following java lang null pointer exception org aspectj weaver model asm relationship provider add relationship asm relationship provider java 168 org aspectj weaver bcel bcel type munger munge bcel type munger java 124 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 441 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 103 org aspectj weaver bcel bcel weaver weave bcel weaver java 1732 org aspectj weaver fwiw seen spring managed auto injection beans configurable annotation official ajdt version version build id m20090211 17 npe asm relationship provider add relationship
context message created even when aspect used inside ajdt context only ever gets used when printing messages system out under ajdt we ought able switch off wasted time building message context when only used command line builds
non synchronized access from aj type system get aj type clazz static instance weak hash map may cause infinite loop start up multi threaded system thread dump shows 32 33 threads application stuck weak hash map get object line 355 bundle starter thread qc ctrl24 prio tid 0x00957c00 nid 0x39 runnable 0xd42fb000 0xd42ffa70 java lang thread state runnable java util weak hash map get weak hash map java 355 org aspectj lang reflect aj type system get aj type aj type system java 37 org aspectj weaver reflect based reference type delegate initialize based reference type delegate java 66 org aspectj weaver reflect reflection based reference type delegate factory reflection based reference type delegate factory java 56 org aspectj weaver reflect reflection based reference type delegate factory create delegate reflection based reference type delegate factory java 42 org aspectj weaver reflect reflection world resolve delegate reflection world java 111 org aspectj weaver world resolve reference type world java 388 org aspectj weaver world resolve world java 279 org aspectj weaver world resolve world java 199 org aspectj weaver world resolve world java 348 org aspectj weaver reflect reflection world resolve reflection world java 103 org aspectj weaver reflect reflection world resolve reflection world java 93 org aspectj weaver reflect reflection based reference type delegate factory resolved type array reflection based reference type delegate factory java 214 org aspectj weaver reflect reflection based reference type delegate factory create resolved method reflection based reference type delegate factory java 107 org aspectj weaver reflect reflection based reference type delegate factory create resolved member reflection based reference type delegate factory java 98 org aspectj weaver reflect reflection shadow make execution shadow reflection shadow java 53 org aspectj weaver internal tools pointcut expression impl matches execution pointcut expression impl java 100 org aspectj weaver internal tools pointcut expression impl matches method execution pointcut expression impl java 92 org aop aspectj aspect jexpression pointcut get shadow match aspect jexpression pointcut java 370 non synchronized access weak hash map causes infinite loop
type advised aspect from aspectpath model search logic breaks finding because hits package node stops looking model package search fails binary aspect same package source type
clean before full aspectj build resources removed from output folder true even when output source folder same case resources deleted from source folder when source output folders same resources should never deleted resource deletion source folder full build when source output folders same
since recent update eclipse get errors when using ajdt compile time weaving single used aspect configurable from spring call critical because my application wont run without aspect compiled when doing build two popups aspect internal compiler error showing up instructions look post bugreports 1st popup java lang null pointer exception org aspectj asm internal aspect jelement hierarchy find closer match line number aspect jelement hierarchy java 427 org aspectj weaver model asm relationship provider add relationship asm relationship provider java 130 org aspectj weaver bcel bcel type munger munge bcel type munger java 124 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 441 org aspectj weaver bcel bcel class weaver weave end abstract interface org beans factory aspectj abstract interface driven dependency injection aspect configurable support 2nd popup java lang null pointer exception org aspectj asm internal aspect jelement hierarchy find closer match line number aspect jelement hierarchy java 427 org aspectj weaver model asm relationship provider add relationship asm relationship provider java 130 org aspectj weaver bcel bcel type munger munge bcel type munger java 124 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 441 org aspectj weaver bcel bcel class weaver weave ibatis domain banf ireturn end public volatile int compare object end public class de synaix k070 banf ibatis domain banf output ajdt event trace window 11 21 34 removed problems tasks project some webapp 11 21 34 builder tidied output folder removed class files derived resources 11 21 35 timer event 1ms delete markers some webapp finished deleting markers some webapp 11 21 38 compiler project some webapp doesn know previous state so assuming everything has changed 11 21 38 11 21 38 build kind fullbuild 11 21 38 project some webapp kind build requested full aspect compilation 11 21 38 builder tidied output folder removed class files derived resources 11 21 38 timer event 442ms pre compile 11 21 38 compiler project some webapp has been read compiler resetting 11 21 38 changed javaoptions changed aspectpath changed classpath changed inpath changed changed outjar changed changed changed injars changed 11 21 38 resetting list modified source files null 11 21 38 preparing build going incremental because successful previous full build 11 21 40 timer event 1252ms time first compiled message 11 21 40 timer event 1276ms time first woven message 11 21 45 aspect reports build successful build full 11 21 45 ajde callback finish full build true 11 21 45 timer event 6456ms total time spent ajde 11 21 45 timer event 157ms refresh after build 11 21 45 types affected during build 308 11 21 45 crosscutting model sanity checked problems 11 21 45 timer event 0ms post compile 11 21 45 timer event 7248ms total time spent ajbuilder build 11 21 45 timer event 2ms delete markers some webapp finished deleting markers some webapp 11 21 45 timer event 179ms create markers some webapp finished creating markers some webapp aspect jelement hierarchy java 427 null pointer exception
from roo code commenting out field after successful build results exception underlying cause may also apply itd methods maybe constructors org aspectj weaver bcexception couldn find itd init member void com springsource petclinic domain visit roo entity itd ajc inter field init com springsource petclinic domain visit roo entity itd com springsource petclinic domain visit id com springsource petclinic domain visit aspect com springsource petclinic domain visit roo entity itd when type munging bcel type munger resolved type munger field java lang long com springsource petclinic domain visit id when weaving type com springsource petclinic domain visit when weaving classes when weaving when building classpath temp petclinic target classes jvms jdk1 06 jre lib resources jar jvms jdk1 06 jre lib rt jar jvms jdk1 06 jre lib jsse jar jvms jdk1 06 jre lib jce jar jvms jdk1 06 jre lib charsets jar jvms jdk1 06 jre lib ext dnsns jar jvms jdk1 06 jre lib ext localedata jar jvms jdk1 06 jre lib ext sunjce provider jar jvms jdk1 06 jre lib ext sunmscapi jar jvms jdk1 06 jre lib ext sunpkcs11 jar users andy m2 repository org antlr com springsour ce antlr com springsource antlr jar users andy m2 repository com thoughtworks xstream com springsource com thoughtworks xstream com springsource com thoughtworks xstream jar users andy m2 repository edu emory mathcs backpor com springsource edu emory mathcs backport com springsource edu emory mathcs backport jar users andy m2 repository edu oswego cs concurrent com springsource edu oswego cs dl util concurrent com springsource edu oswego cs dl util co ncurrent jar users andy m2 repository org jboss javassist com springsource javassist ga com springsource javassist ga jar users andy m2 repository javax annotation com springsource javax annotation com springsource javax notation jar users andy m2 repository javax persistence com springsource javax persistence com springsource javax persistence jar users andy m2 repository javax servlet com springsource javax servlet com springsource javax servlet jar users andy m2 repository javax servlet com springsource javax servlet jsp jstl com springsource javax servlet jsp jstl jar users andy m2 repository javax transaction com springsource javax transaction com spring source javax transaction jar users andy m2 repository net sourceforge cglib com springsource net sf cglib com springsource net sf cglib jar users andy m2 repository net sourceforge ehcache com springsource net sf ehcache co springsource net sf ehcache jar users andy m2 repository net sourceforge jsr107cache com springsource net sf jsr107cache com springsource net sf jsr107cache jar users andy m2 repository org antlr com springsource org antlr com springsource org antlr jar users andy m2 repository org aopalliance com springsource org aopalliance com springsource org aopalliance jar users andy m2 repository org apache commons com springsource org apache commons colle ctions com springsource org apache commons collections jar users andy m2 repository org apache commons com springsource org apache commons dbcp osgi com springsource org apache commons dbcp osgi jar users andy m2 repository org apache commons com springsource org apache commons logging com springsource org apache commons logging jar users andy m2 repository org apache commons com springsource org apache commons pool com springsource org apache commons pool jar users andy m2 repository org apache log4j com springsource org apache log4j 15 com springsource org apache log4j 15 jar users andy m2 repository org apache taglibs com springsource org apache taglibs standard com sprin gsource org apache taglibs standard jar users andy m2 repository org aspectj com springsource org aspectj runtime release com springsource org aspectj runtime release jar users andy m2 repository org aspectj com springsource org aspectj tools release com springsource org aspectj tools release jar users andy m2 repository org aspectj com springsource org aspectj weaver release com springsource org aspectj weaver release jar users andy m2 repository org dom4j com springsource org dom4j com springsource org dom4j jar users andy m2 repository org hibernate com springsource org hibernate ga com springsource org hibernate ga jar users andy m2 repository org hibernate com pringsource org hibernate annotations ga com springsource org hibernate annotations ga jar users andy m2 repository org hibernate com springsource org hibernate annotations common ga com springsource org hibernate annotations common ga jar users andy m2 repository org hibernate com springsource org hibernate ejb ga com springsource org hibernate ejb ga jar users andy m2 repository org hibernate com springsource org hibernate validator ga com springsour ce org hibernate validator ga jar users andy m2 repository org hsqldb com springsource org hsqldb com springsource org hsqldb jar users andy m2 repository org jboss util com springsource org jboss util ga com springsour ce org jboss util ga jar users andy m2 repository org junit com springsource org junit com springsource org junit jar users andy m2 repository org objectweb asm com springsource org objectweb asm com springsource org object web asm jar users andy m2 repository org objectweb asm com springsource org objectweb asm attrs com springsource org objectweb asm attrs jar users andy m2 repository org objectweb asm com springsource org objectweb asm commons com springsource org objectweb asm commons jar users andy m2 repository org xmlpull com springsource org xmlpull com springsource org xmlpull jar users andy m2 repository org org aop m1 org aop m1 jar users andy m2 repository org org aspects m1 org aspects m1 jar users andy m2 repository org org beans m1 org beans m1 jar users andy m2 repository org org context m1 org context m1 jar users andy m2 repository org org core m1 org sp core m1 jar users andy m2 repository org org expression m1 org expression m1 jar users andy m2 repository org org jdbc m1 org spr ingframework jdbc m1 jar users andy m2 repository org org orm m1 org orm m1 jar users andy m2 repository org org test m1 org te st m1 jar users andy m2 repository org org transaction m1 org transaction m1 jar users andy m2 repository org org web m1 org we m1 jar users andy m2 repository org org web servlet m1 org web servlet m1 jar users andy m2 repository org roo roo core snapshot roo core snapshot jar eclipse e342 eclipse plugins org aspectj runtime aspectjrt jar jvms jdk1 06 jre lib ext dnsns jar jvms jdk1 06 jre lib ext localedata jar jvms jdk1 06 jre lib ext sunjce provider jar jvms jdk1 06 jre lib ext sunmscapi jar jvms jdk1 06 jre lib ext sunpkcs11 jar eclipse e342 eclipse plugins org eclipse equinox launcher 101 r34x v20081125 jar org aspectj weaver bcel bcel type munger munge new field bcel type munger java 1638 org aspectj weaver bcel bcel type munger munge bcel type munger java 90 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 441 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 103 org aspectj weaver bcel bcel weaver weave bcel weaver java 1732 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1693 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1458 org aspectj weaver bcel bcel weaver weave bcel weaver java 1272 org aspectj ajdt internal compiler aj pipelining compiler adapter weave queued entries aj pipelining compiler adapter java 435 org aspectj ajdt internal compiler aj pipelining compiler adapter queue weaving aj pipelining compiler adapter java 371 org aspectj ajdt internal compiler aj pipelining compiler adapter after processing aj pipelining compiler adapter java 358 org aspectj ajdt internal compiler compiler adapter ajc after org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 98 org aspectj org eclipse jdt internal compiler compiler process compiler java 652 org aspectj org eclipse jdt internal compiler compiler compile compiler java 392 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 977 org aspectj ajdt internal core builder aj build manager perform build aj build manager java 301 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 183 org aspectj ajde core internal ajde core build manager perform build ajde core build manager java 127 org aspectj ajde core aj compiler build aj compiler java 88 org eclipse ajdt core builder ajbuilder build ajbuilder java 223 org eclipse core internal events build manager run build manager java 633 org eclipse core runtime safe runner run safe runner java 37 org eclipse core internal events build manager basic build build manager java 170 org eclipse core internal events build manager basic build build manager java 201 org eclipse core internal events build manager run build manager java 253 org eclipse core runtime safe runner run safe runner java 37 org eclipse core internal events build manager basic build build manager java 256 org eclipse core internal events build manager basic build loop build manager java 309 org eclipse core internal events build manager build build manager java 341 org eclipse core internal events auto build job do build auto build job java 140 org eclipse core internal events auto build job run auto build job java 238 org eclipse core internal jobs worker run worker java 55 problem incremental itd compilation
following code shadow munger get binary file line 169 ff fails class file does contain proper source file name binary file null string get declaring type get binary path file get declaring type get source location get source file int get path last index string path get path substring class binary file new file path file name thus gives string index out bounds error aspect depends class files having dot source file name attribute
handles remove trailing from source path handles
error sent through ajdt mailing list believe ltw weaving error so raising against ajdt error during delete aj markers
iajc ant task fails type already defined
ava lang string index out bounds exception java lang string substring string java 1938 org aspectj ajdt ajc config parser strip whitespace comments config parser java 103 org aspectj ajdt ajc config parser parse config file helper config parser java 69 org aspectj ajdt ajc config parser parse imported config file config parser java 224 org aspectj ajdt ajc config parser parse one arg config parser java 213 org aspectj ajdt ajc config 82 org eclipse core internal jobs worker run worker java 55 java lang string index out bounds exception
when structural change class has itd full build should incremental build compiler always drops full build incremental build class itd declared causes too many full builds
declare aspect pkg having itd method class pkg using inner anonymous class created pkg package package protected instantiated from pkg causeing error test case attached anonymous inner classes declare inside itd method cause illegal access error
trying use abstract aspect from library jar file causing problems soon attached zip eclipse projects logging library defines two abstract trivial logging aspects one code style one aspect style sample system uses code style abstract aspect successfully sample system2 uses aspect style abstract aspect won compile eclipse exception java lang null pointer exception org aspectj weaver bcel aj attributes lazy resolved pointcut definition get pointcut aj attributes java 1632 org aspectj weaver shadow munger add child nodes shadow munger java 258 org aspectj weaver shadow munger create hierarchy shadow munger java 247 org aspectj weaver asm relationship provider advice munger asm relationship provider java 180 org aspectj weaver shadow implement mungers shadow java 717 int ljava lang string areturn end public object run object plan ataspectj abstract aspect causing problems
occured during clean build project working following inthe details internal error occurred during delete update aspect markers core source java lang null pointer exception internal error occurred during delete update aspect markers core source
compiling problem xterminate after compilation
unhandled kind new exception when have advice pointcut call throwable new
build id m20070212 1330 steps reproduce use declare parents introduce default interface existing type full build compiles cleanly works expected incremental build causes following type compile error type foo impl must implement inherited abstract method test method example foo impl class we introducing default test interface which defines method method more information see attached zip complete set files reproduce can repoduce bug ajdt 200705221209 eclipse well ajdt 5rc1 eclipse 3rc1 ataspectj aspect style inter type declaration causes false compiler error during incremental build
build id steps reproduce exception happening us both eclipse when we run incremental build one our projects we using aspect declare annotation class project we only started seeing exception after we added clean build project never throws exception only incremental build more information exception stack trace java lang runtime exception org aspectj ajdt internal compiler lookup eclipse resolved member get annotations eclipse resolved member java 78 org aspectj ajdt internal compiler lookup aj lookup environment do declare annotations aj lookup environment java 794 org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 592 org aspectj ajdt internal compiler lookup aj lookup environmen org eclipse core internal jobs worker run worker java 55 compile error runtime exception thrown yet implemented please raise aj bug going include ajdt event log build very long mostly unremarkable so have included only section project where exception thrown 11 50 build kind 11 50 project icodes kind build requested incremental aspect compilation 11 50 build examined delta source file changes required project icodes 11 51 found state instance managing output location jnaylor java dev workspace icdm 11 51 failed find state instance managing output location jnaylor java dev workspace dependencies marvel resources 11 51 failed find state instance managing output location jnaylor java dev workspace gsg 11 52 failed find state instance managing output location jnaylor java dev build launch4j 11 52 preparing build planning incremental build 11 52 starting incremental compilation loop possibly 11 52 ajde callback finish full build false 11 52 timer event 2172ms total time spent ajde 11 54 timer event 47ms create element map rels project icodes 11 54 types affected during build 11 54 timer event 0ms add markers markers 11 54 timer event 3735ms total time spent ajbuilder build 11 54 occurring frequently every time so we haven been able narrow down reasonable sized test case ajdt throws runtime exception from eclipse resolved member get annotations
ben hale reported find bugs producing warning about dead store local variable variable never read within method bug investigate hopefully remove dead store find bugs reporting another optimization
cannot aspect code written sjpp based encoding
typo point example
currently property org aspectj weaver loadtime can set name ltw file loadtime weaver searches default value meta inf aop xml meta inf aop ajc xml org aspectj aop xml weaver searches classpath xml files matching any those three typical override might therefore dorg aspectj weaver loadtime meta inf overhere xml however weaver still only look classpath some environments ltw user may just want name aop config file use forced include classpath we have had suggestion make protocol based which like now would just allow support file file prefix treated direct reference file use otherwise searched change would mean all existing uses override fine new users all exploit flexibility naming directly allow ltw directly specified rather than discovered classpath
java lang null pointer exception org aspectj org eclipse jdt internal compiler lookup source type binding source start source type binding java 1514 org aspectj org eclipse jdt internal compiler lookup method binding source start method binding java 988 org aspectj ajdt internal compiler lookup eclipse source type fill declared members eclipse source type java 243 org aspectj ajdt internal compiler lookup eclipse source type get declared fiel ireturn end public boolean tracing end public class com pi core data reflection attribute source type binding source start npe
we always support processing old aspects doesn matter what level aspect used build aspect long you use version later version weaver we can unpack don require rebuilt from source however ve just encountered class apparently built cannot load crashes pointcut declaration data stream we have just read numbers indicating kinded pointcut method execution next digit when should we crash org aspectj weaver bcexception weird kind when batch building build config null files 43 org aspectj weaver member kind read member kind java 35 org aspectj weaver patterns signature pattern read signature pattern java 682 memberkind typesafeenum so can never other than first part so hard see how got written out wrong right now ve been told can load so about try wow did load back how hell suspect we aren consuming enough which leaves us some extra we interpret rogue pointcut ok comparison we consume one extra byte from stream when reading we do consume position 260 got closer knew what would especially when knew just one byte difference version check whether byte annotation pattern relates parameter match wrong urgh migration unexpected problem loading aspect built
build id i20070621 1340 steps reproduce package bug used bug package under src source folder public aspect cant match interface introduced generic class public static interface marker public static class non generic class public void doit string msg system out println doit msg msg public static class generic class public void doit system out println doit declare parents non generic class implements marker declare parents generic class implements marker pointcut non generic call call void non generic class doit pointcut generic call call void generic class doit pointcut marker call call void marker doit before non generic call system out println non generic call join point static part before generic call system out println generic call join point static part before marker call system out println marker call join point static part public static void main string args new non generic class doit message1 new generic class integer doit new integer more information code pasted steps demonstrates bug itd interface generic type can match calls methods interface
commented out static nested aspect inside class let me do rename refactoring eclipse results following exception which even full rebuild won fix class does have pointcut definitions inside commenting those out avoids problem though caused other syntax errors java lang array index out bounds exception org aspectj weaver patterns pointcut find residue internal pointcut java 186 org aspectj weaver patterns pointcut find residue pointcut java 269 org aspectj weaver patterns pointcut find residue internal pointcut java 93 org aspectj weaver patterns pointcut find residue pointcut java 269 org aspectj weaver patterns pointcut find residue internal pointcut java 93 ses when weaving when batch building build config devel glassbox metadata plugins org eclipse ajdt core glassbox agent generated lst files 210 npe during compilation class file pointcuts
build id 20070607 steps reproduce cannot find way reproduce somehow randomic example happened me now while creating new class aspectj project when saved java compiled properly why filing ajdt aspect directly based exception iiuc narrowing generic unresolved type should something like converter while bounded reference type should somethinf like converter extends number weaver handling properly simply casting from one other just silly assumptions more information java lang class cast exception org aspectj ajdt internal compiler lookup eclipse factory make type binding1 eclipse factory java 656 org aspectj ajdt internal compiler lookup eclipse factory make type binding eclipse factory java 579 org aspectj ajdt internal compiler lookup eclipse factory make type binding1 eclipse factory java 640 org aspectj ajdt internal compiler lookup eclipse factory make type binding eclipse factory java 579 org asp worker java 55 compile error class cast exception thrown org aspectj weaver unresolved type cannot cast org aspectj weaver bounded reference type ajc error somehow connected generics
string index out bounds exception thrown bcel weaver
following exception obtained when using annotation approach load time weaving app class loader 1f12c4e info aspect weaver version built thursday dec 20 2007 13 44 10 gmt app class loader 1f12c4e info register classloader sun misc launcher app class loader 1f12c4e app class loader 1f12c4e info using temp aspectj bug scratch classes scratch aop aspect aop bug xml app class loader 1f12c4e info register aspect scratch aop aspect bug aspect do something exception thread main java lang class format error code attribute native abstract methods class file scratch aop extra sub class java lang class loader define class1 native method java lang class loader define class class loader java 620 java security secure class loader define class secure class loader java 124 java net urlclass loader define class urlclass loader java 260 java net urlclass loader access 000 urlclass loader java 56 java net urlclass loader run urlclass loader java 195 java security access controller do privileged native method java net urlclass loader find class urlclass loader java 188 java lang class loader load class class loader java 306 sun misc launcher app class loader load class launcher java 276 java lang class loader load class class loader java 251 java lang class loader load class internal class loader java 319 scratch aop extra bug other get sub class bug other java 22 scratch aop main bug main something else bug main java 36 scratch aop main bug main do something bug main java 30 scratch aop main bug main execute bug main java 24 scratch aop main bug driver do execute bug driver java 27 scratch aop main bug driver main bug driver java 21 same advice logic does result class format error when using aspect approach only appears using annotation approach we have been able track down exactly why above error occurs have attached test case manifests run simply use runtime bug driver main dorg aspectj weaver loadtime scratch aop aspect aop bug xml along aspect load time weaver agent above occurs both aspect aspect when using aspectj weaver app class loader log still indicates class format error during ltw using annotation approach
aspectj iajc error source information available aspectj iajc development pi java src com pi service expression func new matrix java internal compiler error aspectj iajc java lang array index out bounds exception aspectj iajc org aspectj weaver resolved type get member map resolved type java 744 aspectj iajc org aspectj weaver reference type get declared interfaces reference type java 411 aspectj iajc org aspectj weaver resolved type get direct supertypes resolved type java 68 aspectj iajc org aspectj weaver resolved type collect inter type mungers resolved type java 1206 aspectj iajc org aspectj weaver resolved type collect inter type mungers resolved type java 1211 aspectj iajc org aspectj weaver resolved type collect inter type mungers resolved type java 1211 aspectj iajc org aspectj weaver resolved type get inter type mungers including supers resolved type java 1185 aspectj iajc org aspectj weaver resolved type check inter type mungers resolved type java 1255 aspectj iajc org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 646 aspectj iajc org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 522 aspectj iajc org aspectj ajdt internal compiler lookup aj lookup environment create binary type from aj lookup environment java 1105 aspectj iajc org aspectj org eclipse jdt internal compiler lookup lookup environment create binary type from lookup environment java 599 aspectj iajc org aspectj org eclipse jdt internal compiler compiler accept compiler java 276 aspectj iajc org aspectj org eclipse jdt internal compiler lookup lookup environment ask type lookup environment java 113 aspectj iajc org aspectj org eclipse jdt internal compiler lookup unresolved reference binding resolve unresolved reference binding java 49 aspectj iajc org aspectj org eclipse jdt internal compiler lookup binary type binding resolve type binary type binding java 99 aspectj iajc org aspectj org eclipse jdt internal compiler lookup binary type binding get member type binary type binding java 755 aspectj iajc org aspectj org eclipse jdt internal compiler lookup scope find member type scope java 986 aspectj iajc org aspectj org eclipse jdt internal compiler lookup scope get member type scope java 2116 aspectj iajc org aspectj org eclipse jdt internal compiler ast qualified type reference find next type binding qualified type reference java 43 aspectj iajc org aspectj org eclipse jdt internal compiler ast qualified type reference get type binding qualified type reference java 77 aspectj iajc org aspectj org eclipse jdt internal compiler ast type reference resolve type type reference java 142 aspectj iajc org aspectj org eclipse jdt internal compiler ast allocation expression resolve type allocation expression java 258 aspectj iajc org aspectj org eclipse jdt internal compiler ast local declaration resolve local declaration java 196 aspectj iajc org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve statements abstract method declaration java 433 aspectj iajc org aspectj org eclipse jdt internal compiler ast method declaration resolve statements method declaration java 196 aspectj iajc org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve abstract method declaration java 404 aspectj iajc org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1109 aspectj iajc org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1188 aspectj iajc org aspectj org eclipse jdt internal compiler ast compilation unit declaration resolve compilation unit declaration java 366 aspectj iajc org aspectj org eclipse jdt internal compiler compiler process compiler java 625 aspectj iajc org aspectj org eclipse jdt internal compiler compiler compile compiler java 392 aspectj iajc org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 990 aspectj iajc org aspectj ajdt internal core builder aj build manager do build aj build manager java 264 aspectj iajc org aspectj ajdt internal core builder aj build manager batch build aj build manager java 180 aspectj iajc org aspectj ajdt ajc ajdt command do command ajdt command java 112 aspectj iajc org aspectj ajdt ajc ajdt command run command ajdt command java 60 aspectj iajc org aspectj tools ajc main run main java 378 aspectj iajc org aspectj tools ajc main run main main java 253 aspectj iajc org aspectj tools ant taskdefs ajc task execute same vm ajc task java 1303 aspectj iajc org aspectj tools ant taskdefs ajc task execute ajc task java 1101 aspectj iajc org apache tools ant unknown element execute unknown element java 288 aspectj iajc sun reflect native method accessor impl invoke0 native method aspectj iajc sun reflect native method accessor impl invoke native method accessor impl java 39 aspectj iajc sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 aspectj iajc java lang reflect method invoke method java 585 aspectj iajc org apache tools ant dispatch dispatch utils execute dispatch utils java 105 aspectj iajc org apache tools ant task perform task java 348 aspectj iajc org apache tools ant target execute target java 357 aspectj iajc org apache tools ant target perform tasks target java 385 aspectj iajc org apache tools ant project execute sorted targets project java 1329 aspectj iajc org apache tools ant project execute target project java 1298 aspectj iajc org apache tools ant helper default executor execute targets default executor java 41 aspectj iajc org eclipse ant internal ui antsupport eclipse default executor execute targets eclipse default executor java 32 aspectj iajc org apache tools ant project execute targets project java 1181 aspectj iajc org eclipse ant internal ui antsupport internal ant runner run internal ant runner java 423 aspectj iajc org eclipse ant internal ui antsupport internal ant runner main internal ant runner java 137 aspectj iajc abort abort array index out bounds exception aspectj iajc aspectj iajc java lang array index out bounds exception aspectj iajc org aspectj weaver resolved type get member map resolved type java 744 aspectj iajc org aspectj weaver reference type get declared interfaces reference type java 411 aspectj iajc org aspectj weaver resolved type get direct supertypes resolved type java 68 aspectj iajc org aspectj weaver resolved type collect inter type mungers resolved type java 1206 aspectj iajc org aspectj weaver resolved type collect inter type mungers resolved type java 1211 aspectj iajc org aspectj weaver resolved type collect inter type mungers resolved type java 1211 aspectj iajc org aspectj weaver resolved type get inter type mungers including supers resolved type java 1185 aspectj iajc org aspectj weaver resolved type check inter type mungers resolved type java 1255 aspectj iajc org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 646 aspectj iajc org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 522 aspectj iajc org aspectj ajdt internal compiler lookup aj lookup environment create binary type from aj lookup environment java 1105 aspectj iajc org aspectj org eclipse jdt internal compiler lookup lookup environment create binary type from lookup environment java 599 aspectj iajc org aspectj org eclipse jdt internal compiler compiler accept compiler java 276 aspectj iajc org aspectj org eclipse jdt internal compiler lookup lookup environment ask type lookup environment java 113 aspectj iajc org aspectj org eclipse jdt internal compiler lookup unresolved reference binding resolve unresolved reference binding java 49 aspectj iajc org aspectj org eclipse jdt internal compiler lookup binary type binding resolve type binary type binding java 99 aspectj iajc org aspectj org eclipse jdt internal compiler lookup binary type binding get member type binary type binding java 755 aspectj iajc org aspectj org eclipse jdt internal compiler lookup scope find member type scope java 986 aspectj iajc org aspectj org eclipse jdt internal compiler lookup scope get member type scope java 2116 aspectj iajc org aspectj org eclipse jdt internal compiler ast qualified type reference find next type binding qualified type reference java 43 aspectj iajc org aspectj org eclipse jdt internal compiler ast qualified type reference get type binding qualified type reference java 77 aspectj iajc org aspectj org eclipse jdt internal compiler ast type reference resolve type type reference java 142 aspectj iajc org aspectj org eclipse jdt internal compiler ast allocation expression resolve type allocation expression java 258 aspectj iajc org aspectj org eclipse jdt internal compiler ast local declaration resolve local declaration java 196 aspectj iajc org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve statements abstract method declaration java 433 aspectj iajc org aspectj org eclipse jdt internal compiler ast method declaration resolve statements method declaration java 196 aspectj iajc org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve abstract method declaration java 404 aspectj iajc org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1109 aspectj iajc org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1188 aspectj iajc org aspectj org eclipse jdt internal compiler ast compilation unit declaration resolve compilation unit declaration java 366 aspectj iajc org aspectj org eclipse jdt internal compiler compiler process compiler java 625 aspectj iajc org aspectj org eclipse jdt internal compiler compiler compile compiler java 392 aspectj iajc org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 990 aspectj iajc org aspectj ajdt internal core builder aj build manager do build aj build manager java 264 aspectj iajc org aspectj ajdt internal core builder aj build manager batch build aj build manager java 180 aspectj iajc org aspectj ajdt ajc ajdt command do command ajdt command java 112 aspectj iajc org aspectj ajdt ajc ajdt command run command ajdt command java 60 aspectj iajc org aspectj tools ajc main run main java 378 aspectj iajc org aspectj tools ajc main run main main java 253 aspectj iajc org aspectj tools ant taskdefs ajc task execute same vm ajc task java 1303 aspectj iajc org aspectj tools ant taskdefs ajc task execute ajc task java 1101 aspectj iajc org apache tools ant unknown element execute unknown element java 288 aspectj iajc sun reflect native method accessor impl invoke0 native method aspectj iajc sun reflect native method accessor impl invoke native method accessor impl java 39 aspectj iajc sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 aspectj iajc java lang reflect method invoke method java 585 aspectj iajc org apache tools ant dispatch dispatch utils execute dispatch utils java 105 aspectj iajc org apache tools ant task perform task java 348 aspectj iajc org apache tools ant target execute target java 357 aspectj iajc org apache tools ant target perform tasks target java 385 aspectj iajc org apache tools ant project execute sorted targets project java 1329 aspectj iajc org apache tools ant project execute target project java 1298 aspectj iajc org apache tools ant helper default executor execute targets default executor java 41 aspectj iajc org eclipse ant internal ui antsupport eclipse default executor execute targets eclipse default executor java 32 aspectj iajc org apache tools ant project execute targets project java 1181 aspectj iajc org eclipse ant internal ui antsupport internal ant runner run internal ant runner java 423 aspectj iajc org eclipse ant internal ui antsupport internal ant runner main internal ant runner java 137 aspectj iajc may 11 2008 35 06 am org aspectj weaver tools jdk14trace info aspectj iajc info dumping development pi projects pi service common ajcore 20080511 093506 214 txt aspectj iajc message holder 92 info error abort aspectj iajc error error source information available aspectj iajc development pi java src com pi service expression func new matrix java internal compiler error aspectj iajc java lang array index out bounds exception aspectj iajc org aspectj weaver resolved type get member map resolved type java 744 aspectj iajc org aspectj weaver reference type get declared interfaces reference type java 411 aspectj iajc org aspectj weaver resolved type get direct supertypes resolved type java 68 aspectj iajc org aspectj weaver resolved type collect inter type mungers resolved type java 1206 aspectj iajc org aspectj weaver resolved type collect inter type mungers resolved type java 1211 aspectj iajc org aspectj weaver resolved type collect inter type mungers resolved type java 1211 aspectj iajc org aspectj weaver resolved type get inter type mungers including supers resolved type java 1185 aspectj iajc org aspectj weaver resolved type check inter type mungers resolved type java 1255 aspectj iajc org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 646 aspectj iajc org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 522 aspectj iajc org aspectj ajdt internal compiler lookup aj lookup environment create binary type from aj lookup environment java 1105 aspectj iajc org aspectj org eclipse jdt internal compiler lookup lookup environment create binary type from lookup environment java 599 aspectj iajc org aspectj org eclipse jdt internal compiler compiler accept compiler java 276 aspectj iajc org aspectj org eclipse jdt internal compiler lookup lookup environment ask type lookup environment java 113 aspectj iajc org aspectj org eclipse jdt internal compiler lookup unresolved reference binding resolve unresolved reference binding java 49 aspectj iajc org aspectj org eclipse jdt internal compiler lookup binary type binding resolve type binary type binding java 99 aspectj iajc org aspectj org eclipse jdt internal compiler lookup binary type binding get member type binary type binding java 755 aspectj iajc org aspectj org eclipse jdt internal compiler lookup scope find member type scope java 986 aspectj iajc org aspectj org eclipse jdt internal compiler lookup scope get member type scope java 2116 aspectj iajc org aspectj org eclipse jdt internal compiler ast qualified type reference find next type binding qualified type reference java 43 aspectj iajc org aspectj org eclipse jdt internal compiler ast qualified type reference get type binding qualified type reference java 77 aspectj iajc org aspectj org eclipse jdt internal compiler ast type reference resolve type type reference java 142 aspectj iajc org aspectj org eclipse jdt internal compiler ast allocation expression resolve type allocation expression java 258 aspectj iajc org aspectj org eclipse jdt internal compiler ast local declaration resolve local declaration java 196 aspectj iajc org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve statements abstract method declaration java 433 aspectj iajc org aspectj org eclipse jdt internal compiler ast method declaration resolve statements method declaration java 196 aspectj iajc org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve abstract method declaration java 404 aspectj iajc org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1109 aspectj iajc org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1188 aspectj iajc org aspectj org eclipse jdt internal compiler ast compilation unit declaration resolve compilation unit declaration java 366 aspectj iajc org aspectj org eclipse jdt internal compiler compiler process compiler java 625 aspectj iajc org aspectj org eclipse jdt internal compiler compiler compile compiler java 392 aspectj iajc org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 990 aspectj iajc org aspectj ajdt internal core builder aj build manager do build aj build manager java 264 aspectj iajc org aspectj ajdt internal core builder aj build manager batch build aj build manager java 180 aspectj iajc org aspectj ajdt ajc ajdt command do command ajdt command java 112 aspectj iajc org aspectj ajdt ajc ajdt command run command ajdt command java 60 aspectj iajc org aspectj tools ajc main run main java 378 aspectj iajc org aspectj tools ajc main run main main java 253 aspectj iajc org aspectj tools ant taskdefs ajc task execute same vm ajc task java 1303 aspectj iajc org aspectj tools ant taskdefs ajc task execute ajc task java 1101 aspectj iajc org apache tools ant unknown element execute unknown element java 288 aspectj iajc sun reflect native method accessor impl invoke0 native method aspectj iajc sun reflect native method accessor impl invoke native method accessor impl java 39 aspectj iajc sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 aspectj iajc java lang reflect method invoke method java 585 aspectj iajc org apache tools ant dispatch dispatch utils execute dispatch utils java 105 aspectj iajc org apache tools ant task perform task java 348 aspectj iajc org apache tools ant target execute target java 357 aspectj iajc org apache tools ant target perform tasks target java 385 aspectj iajc org apache tools ant project execute sorted targets project java 1329 aspectj iajc org apache tools ant project execute target project java 1298 aspectj iajc org apache tools ant helper default executor execute targets default executor java 41 aspectj iajc org eclipse ant internal ui antsupport eclipse default executor execute targets eclipse default executor java 32 aspectj iajc org apache tools ant project execute targets project java 1181 aspectj iajc org eclipse ant internal ui antsupport internal ant runner run internal ant runner java 423 aspectj iajc org eclipse ant internal ui antsupport internal ant runner main internal ant runner java 137 cant compile new statement generic class
line numbers have been added generated class files following exception thrown java lang illegal argument exception org aspectj bridge source location valid line source location java 41 org aspectj bridge source location init source location java 96 org aspectj bridge source location init source location java 85 org aspectj bridge source location init source location java 70 org aspectj ajdt internal core builder eclipse source context make source location eclipse source context java 57 org aspectj we re utility java 155 org eclipse core internal jobs worker run worker java 55 compile error illegal argument exception thrown negative line easy way reproduce problem uncheck checkbox classfile generation section java compiler options eclipse full build performed during which aspect internal compiler error thrown my eclipse feature version org eclipse ajdt 200706070619 compile error illegal argument exception thrown negative line
has been reported few times different users has always proved tough diagnose typical stack trace something like java lang null pointer exception org aspectj weaver bcel lazy method gen remap lazy method gen java 1237 org aspectj weaver bcel lazy method gen add exception handlers lazy method gen java 1132 org aspectj weaver bcel lazy method gen pack body lazy method gen java 1078 org aspectj weaver bcel lazy method gen pack lazy method gen java 977 org aspectj weaver bcel lazy method gen get method lazy method gen java 484 org aspectj weaver bcel lazy class gen write back lazy class gen java 512 org aspectj weaver bcel lazy class gen get java class bytes including reweavable lazy class gen java 652 org aspectj weaver bcel bcel weaver get class files bcel weaver java 1420 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1390 exception line remap ih ih get next called from add exception handlers line gen add exception handler remap get real start map remap get real end map remap get handler map get catch type null null object type bcel world make bcel type get catch type during weaving instruction list augmented extra entries representing where shadows start end method call method execution handler etc when weaving complete we want remove temporary elements use remaining instructions produce method bytecode now sometimes temporary entries targeted other elements line number tags local variable tags exception handlers usually during packing we use remap reposition locations so move off temporary placeholders onto real instructions make out bytecode what above exception tells us we started walking over temporary placeholder entries before we came real instruction we ran out instructions cannot happen indicates something went seriously wrong we should always encounter instruction when remapping off temporary element after some digging actually remap call handler start end leads problem handler represents where jump code when exception specified type occurs between instructions pointed start end sent debug build user encountering problem could recreate looking where fact handler pointing before we called remap learned when problem occurs handler pointing anywhere method currently being processed good second debug build tried ascertain who setting handlers point nowhere debug never triggered one setting them point nowhere happened notice whilst going through instructions debug output cobertura being used coverage toolkit works doing bytecode manipulation insert calls out library aspect being called after cobertura asked user try steps other way round worked fine indicating cobertura doing something bytecode gave us problems after much messing about recreated applying around advice within all classes rt jar just used very large standalone jar file could weave learned cobertura creates catch blocks look little different what javac other compilers create typical bytecode sequence compiler produces catch block starts store instruction store exception being caught whether body catch block uses cobertura catch blocks started invokestatic instruction call out another method what does mean means same instruction has two shadows handler shadow method call shadow turns out what causes our problem around advice applied call join point cannot inlined body call shadow call itself pulled out new method because handler same instruction meant handler also being pulled out new method leaving behind exception handler jumped invalid location fact jumped instruction different method so reason never saw handler location being set incorrectly set correctly up front dragged out method call shadow wrong place bytecode terms looks like method execution iconst istore sipush istore catch java lang exception 1806389629 e0 method call project data project data get global project data invokestatic project data get global project data method call project data get global project data ldc some string method call class data get create class data java lang string project data get create class data lstring method call class data project data get create class data string sipush 106 method call void class data touch int class data touch method call void class data touch int aload method call object expression get value expression get value method call object expression get value catch java lang exception 1806389629 e0 areturn method call project data project data get global project data e0 invokestatic project data get global project data method call project data project data get global project data ldc object we can see problem final method call target exception handler seen earlier e0 within method call shadow what do lazy method gen remap null pointer exception
would like enhancement able match two pointcut designators called pointcut definitions aj5 quick reference currently following test fails aj astmatcher test java public void test match default pointcut aj ast ast aj ast new aj ast ast jls3 default pointcut dp1 ast new default pointcut default pointcut dp2 ast new default pointcut dp1 set detail call foo dp2 set detail call bar assert false dp1 subtree match new aj astmatcher dp2 reason many different kinds pointcut definitions aspect instead default pointcut simply contains pointcut definition string field detail shown test case same true default type pattern signature pattern additionally current default pointcut default type pattern signature pattern node always match another ast node node same type instanceof from what see necessary add types every possible pointcut definition extend current type name patterns signature patterns extend parser internal external create nodes pointcut definitions extend converter convert new node types finally extend matcher able match two pointcut definitions already done combinations poincuts using cflow reference pointcuts without parameters please comment task list just initial overview resulting from my limited knowledge field ast support pointcut designators
although support java6 has been added last milestone you can use from ant because ajc task doesn recognize source target parameters easy fix modifying ajc task java adding missing constants static final string target inputs new string static final string source inputs new string static final string compliance inputs new string thanks ajc task doesn work java6
build id eclipse sdk version m20070212 1330 steps reproduce occured repeatedly when saved aj file java file boing advised restart eclipse made go away has happen again so don know how reproduce sorry ajdt version 200703020612 more information java lang null pointer exception org aspectj ajdt internal compiler lookup aj lookup environment do declare annotations aj lookup environment java 803 org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 592 org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 519 org aspectj ajdt internal compiler lookup aj lookup auto build job run auto build job java 217 org eclipse core internal jobs worker run worker java 58 compile error null pointer exception thrown null aj lookup environment java 519
hello had several times aspectj compiler errors when compiling some normal java class file refering any aspect nor concerned aspect aspect project bug goes away after cleaning project here error reported my class java lang null pointer exception org aspectj weaver resolved type collect inter type mungers resolved type java 1158 org aspectj weaver resolved type collect inter type mungers resolved type java 1158 org aspectj weaver resolved type get inter type mungers including supers resolved type java 1135 org aspectj weaver resolved type check inter type mungers resolved type java 1202 org aspectj ajdt internal compiler lookup aj lookup environment weave int adapter java 102 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception thrown null occurs plugin com ibm icu components unicode java icu4j active com ibm icu source components unicode java icu4j source plug resolved com jcraft jsch 28 jsch resolved net sf fjep fatjar 24 fat jar plug resolved org apache ant apache ant resolved org apache lucene 103 v20060601 apache lucene resolved org aspectj ajde 200610201049 aspect active org aspectj runtime 200610201049 aspect runtime resolved org aspectj weaver 200610201049 aspect weaver resolved org eclipse ajdt core 200611071030 aspect development tools core active org eclipse ajdt examples 200611071030 aspect examples resolved org eclipse ajdt pde build 200611071030 aspect plug development environment build support resolved org eclipse ajdt source 200611071030 plugin name resolved org eclipse ajdt ui 200611071030 aspect development tools ui active org eclipse ant core 100 v20060531 ant build tool core resolved org eclipse ant ui r321 v20060828 ant ui resolved org eclipse aspectj 200611071030 aspect development tools resolved org eclipse compare m20060711 compare support active org eclipse contribution visualiser 200611071030 visualiser plug resolved org eclipse contribution xref core 200611071030 cross reference core plugin active org eclipse contribution xref ui 200611071030 cross reference ui plugin active org eclipse core boot 100 v20060603 core boot resolved org eclipse core commands i20060605 1400 commands resolved org eclipse core contenttype v20060603 eclipse content mechanism active org eclipse core expressions r321 v20060721 expression language active org eclipse core filebuffers r321 v20060721 file buffers active org eclipse core filesystem v20060603 core file systems resolved org eclipse core filesystem macosx v20060603 core file system macintosh resolved org eclipse core jobs v20060603 eclipse jobs mechanism active org eclipse core resources r32x v20060914 core resource management active org eclipse core resources v20060603 core resource management fragment resolved org eclipse core runtime v20060603 core runtime active org eclipse core runtime 100 v20060603 core runtime plug active org eclipse core runtime auth v20060601 plug active org eclipse core runtime registry r32x v20060907 eclipse registry fragment resolved org eclipse core variables 100 v20060605 core variables active org eclipse debug core v20060823 debug core active org eclipse debug ui v20060823 debug ui active org eclipse equinox common v20060603 common eclipse runtime active org eclipse equinox preferences r32x v20060717 eclipse preferences mechanism active org eclipse equinox registry r32x v20060814 extension registry support active org eclipse help r321 v20060920 help system core active org eclipse help appserver 100 v20060602 help application server resolved org eclipse help base r321 v20060822 help system base resolved org eclipse help ui v20060602 help system ui resolved org eclipse help webapp r321 v20060803 help system webapp resolved org eclipse jdt r321 v20060823 eclipse java development tools resolved org eclipse jdt apt core r32x v20060822 2100 java annotation processing core active org eclipse jdt apt ui r32x v20060822 2100 java annotation processing ui resolved org eclipse jdt core 677 r32x java development tools core active org eclipse jdt core manipulation r321 v20060721 java code manipulation resolved org eclipse jdt debug r321 v20060731 jdi debug model active org eclipse jdt debug ui r321 v20060918 jdi debug ui active org eclipse jdt doc isv r321 v20060907 eclipse jdt plug developer guide resolved org eclipse jdt doc user v20060605 1400 eclipse java development user guide resolved org eclipse jdt junit r321 v20060810 java development tools junit support active org eclipse jdt junit runtime r321 v20060721 java development tools junit runtime support resolved org eclipse jdt junit4 runtime r321 v20060905 java development tools junit4 runtime support resolved org eclipse jdt launching r321 v20060731 java development tools launching support active org eclipse jdt launching macosx 100 v20060605 mac os launcher active org eclipse jdt source r321 v20060905 eclipse java development tools sdk resolved org eclipse jdt source macosx carbon ppc r321 v20060905 eclipse java development tools sdk resolved org eclipse jdt ui r321 v20060907 java development tools ui active org eclipse jface m20060908 1000 jface resolved org eclipse jface databinding i20060605 1400 jface data binding resolved org eclipse jface text r321 v20060810 jface text resolved org eclipse ltk core refactoring r321 v20060823 refactoring core active org eclipse ltk ui refactoring r321 v20060726 refactoring ui active org eclipse osgi services 100 v20060601 osgi release services resolved org eclipse osgi util 100 v20060601 osgi r3 utility classes resolved org eclipse pde v20060810 0800 eclipse plug development environment resolved org eclipse pde build r321 v20060823 plug development environment build support resolved org eclipse pde core v20060915 0800 plug development core resolved org eclipse pde doc user v20060816 0800 eclipse plug development user guide resolved org eclipse pde junit runtime v20060605 pde junit plug test resolved org eclipse pde runtime v20060605 plug development environment runtime resolved org eclipse pde source r321 v20060823 6v ylld q3nk8dr fg eclipse plug development environment developer resources resolved org eclipse pde ui v20060816 0800 plug development ui resolved org eclipse platform v20060601 eclipse platform resolved org eclipse platform doc isv r321 v2006030 eclipse platform plug developer guide resolved org eclipse platform doc user r32x eclipse workbench user guide resolved org eclipse platform source r321 v20060921 xva insqsy mtx eclipse platform plug developer resources resolved org eclipse platform source macosx carbon ppc r321 v20060921 xva insqsy mtx eclipse platform plug developer resources resolved org eclipse rcp v20060605 eclipse rcp resolved org eclipse rcp source r321 v20060801 2ek w2bxmcp puooq eclipse rcp plug developer resources resolved org eclipse rcp source macosx carbon ppc r321 v20060801 2ek w2bxmcp puooq eclipse rcp plug developer resources resolved org eclipse sdk r321 v20060705 eclipse project sdk resolved org eclipse search r321 v20060726 search support resolved org eclipse swt v3235e standard widget toolkit resolved org eclipse swt carbon macosx v3235 standard widget toolkit mac os carbon resolved org eclipse team core m20060711 team support core active org eclipse team cvs core cvs team provider core active org eclipse team cvs ssh cvs ssh core resolved org eclipse team cvs ssh2 cvs ssh2 active org eclipse team cvs ui m20060831 cvs team provider ui active org eclipse team ui team support ui active org eclipse text v20060605 1400 text resolved org eclipse tomcat 130 v20060601 tomcat wrapper resolved org eclipse ui m20060913 0800 eclipse ui active org eclipse ui browser v20060602 browser support active org eclipse ui carbon i20060605 1400 eclipse ui mac os enhancements resolved org eclipse ui cheatsheets r321 v20060720 cheat sheets resolved org eclipse ui console 100 v20060605 console active org eclipse ui editors r321 v20060721 default text editor active org eclipse ui 101 r321 v20060802 external tools active org eclipse ui forms v20060602 eclipse forms active org eclipse ui ide m20060915 1030 eclipse ide ui active org eclipse ui intro r321 v20060810 welcome framework resolved org eclipse ui intro universal r321 v20060905 universal welcome resolved org eclipse ui navigator m20060913 0800 common navigator view resolved org eclipse ui navigator resources m20060906 0800b navigator workbench components resolved org eclipse ui r21 i20060605 1400 r21 presentation plug resolved org eclipse ui views m20060906 0800 views active org eclipse ui views properties tabbed m20060830 0800 tabbed properties view resolved org eclipse ui workbench m20060906 0800 workbench active org eclipse ui workbench i20060605 1400 workbench resolved org eclipse ui workbench texteditor v20060605 1400 text editor framework active org eclipse update configurator v20092006 install update configurator active org eclipse update core v20092006 install update core active org eclipse update scheduler v20092006 automatic updates scheduler active org eclipse update ui v20092006 install update ui resolved org junit junit testing framework resolved org junit4 junit testing framework version resolved sf eclipse javacc java cc plug active system bundle r32x v20060919 osgi system bundle active compilation error
more npes finder
sometimes ajdt project gets state where has meta inf manifest mf file fails make out destination folder manifest mf copying always reliable
can really pinpoint any code trigger happens incremental only some time do full build project do get error all seems work java lang null pointer exception org aspectj weaver bcel bcel weaver raise unbound formal error bcel weaver java 833 org aspectj weaver bcel bcel weaver validate single branch bcel weaver java 688 org aspectj weaver bcel bcel weaver validate bindings bcel weaver java 627 org aspectj weaver bcel bcel weaver rewrite pointcuts bcel weaver java 556 org aspectj weaver bcel bcel weaver prepare weave bcel weaver java 484 org aspectj ajd build job run auto build job java 235 org eclipse core internal jobs worker run worker java 55 compile error null pointer exception thrown null npe attempt compile
access weak hash map
receive following exception when running swt aspject load time weaving through spring framework lines around org aspectj weaver reflect finder get annotations finder java 123 follows int anns length ann set add world resolve unresolved type signature anns get type signature when using debugger see world null value attached stripped down eclipse project generates error during startup my runtime arguments follows javaagent resource loc aspect jbug lib spring agent jar app class loader 19d819d8 abort trouble final class org eclipse swt awt swt awt 10 extends java lang object implements java lang runnable private final java awt frame val frame synthetic void init java awt frame aload lorg eclipse swt awt swt awt 10 line 274 java lang object init constructor execution void org eclipse swt awt swt awt 10 init java awt frame aload lorg eclipse swt awt swt awt 10 line aload putfield org eclipse swt awt swt awt 10 val frame ljava awt frame return constructor execution void org eclipse swt awt swt awt 10 init java awt frame end void init java awt frame public void run method execution void org eclipse swt awt swt awt 10 run catch java lang throwable e0 ldc sun awt windows wcomponent peer line 277 method call java lang class java lang class name java lang string invokestatic java lang class name ljava lang string ljava lang class method call java lang class java lang class name java lang string astore aload ljava lang class clazz line 278 ldc win graphics config method call java lang reflect field java lang class get declared field java lang string java lang class get declared field ljava lang string ljava lang reflect field method call java lang reflect field java lang class get declared field java lang string astore aload ljava lang reflect field field line 279 iconst method call void java lang reflect field set accessible boolean java lang reflect field set accessible method call void java lang reflect field set accessible boolean aload ljava lang reflect field field line 280 aload lorg eclipse swt awt swt awt 10 getfield org eclipse swt awt swt awt 10 val frame ljava awt frame method call java awt peer component peer java awt frame get peer java awt frame get peer ljava awt peer component peer method call java awt peer component peer java awt frame get peer aload lorg eclipse swt awt swt awt 10 getfield org eclipse swt awt swt awt 10 val frame ljava awt frame java awt frame get graphics ljava awt graphics java lang reflect field set ljava lang object ljava lang object catch java lang throwable e0 goto l0 e0 pop line 281 l0 return line 282 method execution void org eclipse swt awt swt awt 10 run end public void run end final class org eclipse swt awt swt awt 10 null pointer exception null null java lang null pointer exception org aspectj weaver reflect finder get annotations finder java 123 org aspectj weaver reflect reflection based resolved member impl unpack annotations reflection based resolved member impl java 174 org aspectj weaver reflect reflection based resolved member impl has annotation reflection based resolved member impl java 158 org aspectj weaver patterns exact annotation type pattern matches exact annotation type pattern java 82 org aspectj weaver patterns annotation pointcut match internal annotation pointcut java 151 org aspectj weaver patterns pointcut match pointcut java 146 org aspectj weaver patterns pointcut match internal pointcut java 52 org aspectj weaver patterns pointcut match pointcut java 146 org aspectj weaver shadow munger match shadow munger java 75 org aspectj weaver advice match advice java 112 org aspectj weaver bcel bcel advice match bcel advice java 118 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2811 org aspectj weaver bcel bcel class weaver match invoke instruction bcel class weaver java 2773 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2506 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2332 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 494 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 119 org aspectj weaver bcel bcel weaver weave bcel weaver java 1651 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1602 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1380 org aspectj weaver bcel bcel weaver weave bcel weaver java 1200 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 360 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 262 org aspectj weaver loadtime aj pre process aj java 78 org aspectj weaver loadtime class pre processor agent adapter transform class pre processor agent adapter java 52 org context weaving aspect jweaving enabler aspect jclass bypassing class file transformer decorator transform aspect jweaving enabler java 84 sun instrument transformer manager transform transformer manager java 141 sun instrument impl transform impl java 174 java lang class loader define class impl native method java lang class loader define class class loader java 228 java security secure class loader define class secure class loader java 148 java net urlclass loader define class urlclass loader java 557 java net urlclass loader access 400 urlclass loader java 120 java net urlclass loader class finder run urlclass loader java 962 java security access controller do privileged access controller java 275 java net urlclass loader find class urlclass loader java 488 java lang class loader load class class loader java 607 sun misc launcher app class loader load class launcher java 327 java lang class loader load class class loader java 573 org eclipse swt awt swt awt new frame swt awt java 274 feb 21 2008 12 09 23 pm org aspectj weaver tools jdk14trace error severe org eclipse swt awt swt awt 10 java lang null pointer exception org aspectj weaver reflect finder get annotations finder java 123 org aspectj weaver reflect reflection based resolved member impl unpack annotations reflection based resolved member impl java 174 org aspectj weaver reflect reflection based resolved member impl has annotation reflection based resolved member impl java 158 org aspectj weaver patterns exact annotation type pattern matches exact annotation type pattern java 82 org aspectj weaver patterns annotation pointcut match internal annotation pointcut java 151 org aspectj weaver patterns pointcut match pointcut java 146 org aspectj weaver patterns pointcut match internal pointcut java 52 org aspectj weaver patterns pointcut match pointcut java 146 org aspectj weaver shadow munger match shadow munger java 75 org aspectj weaver advice match advice java 112 org aspectj weaver bcel bcel advice match bcel advice java 118 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2811 org aspectj weaver bcel bcel class weaver match invoke instruction bcel class weaver java 2773 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2506 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2332 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 494 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 119 org aspectj weaver bcel bcel weaver weave bcel weaver java 1651 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1602 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1380 org aspectj weaver bcel bcel weaver weave bcel weaver java 1200 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 360 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 262 org aspectj weaver loadtime aj pre process aj java 78 org aspectj weaver loadtime class pre processor agent adapter transform class pre processor agent adapter java 52 org context weaving aspect jweaving enabler aspect jclass bypassing class file transformer decorator transform aspect jweaving enabler java 84 sun instrument transformer manager transform transformer manager java 141 sun instrument impl transform impl java 174 java lang class loader define class impl native method java lang class loader define class class loader java 228 java security secure class loader define class secure class loader java 148 java net urlclass loader define class urlclass loader java 557 java net urlclass loader access 400 urlclass loader java 120 java net urlclass loader class finder run urlclass loader java 962 java security access controller do privileged access controller java 275 java net urlclass loader find class urlclass loader java 488 java lang class loader load class class loader java 607 sun misc launcher app class loader load class launcher java 327 java lang class loader load class class loader java 573 org eclipse swt awt swt awt new frame swt awt java 274 java lang null pointer exception finder when using swt
mixup retrieving right class finder
compiler nullpointer exception during compile
fix javadoc proceeding join point proceed object
types org aspectj org eclipse jdt core dom inter type field declaration java org aspectj org eclipse jdt core dom inter type method declaration java which can returned visiting aj ast tree do expose name type which method field added require information project currently working would appreciate added ast type information exposed itmd itfd
reported list ashley williams having converted my aspects use aspect style now getting strange error message when compile my tracing aspect first here section code pointcut execution tracing annotation tracing void annotated methods tracing tracing after throwing pointcut annotated methods tracing throwing public void log exception join point join point tracing tracing throwable level level level level tracing level logger enabled level logger log level formatter format signature throwing join point so am matching all methods annotated tracing logging subclass throwable may have been thrown however when run my test case get following error java lang verify error class com db abfo tracing pojo one method calculate signature catch type subclass throwable used work when used aspectj after throwing language extention form pointcut annotated methods tracing tracing execution tracing annotation tracing after tracing tracing throwing throwable annotated methods tracing level level tracing level get level logger enabled level logger log level formatter format signature throwing join point ataspectj after throwing annotation style too sensitive parameter positions
reported josh mailing list have following files advised aj package bugs public class advised aspect itd public void advised ref aj package notbugs import bugs advised public class ref public void new advised am attempting build advised aj jar refer from ref aj using following ant build xml xml version project name bugs basedir workplace imds bugs xmlns aj antlib org aspectj taskdef uri antlib org aspectj resource org aspectj antlib xml classpath aspectjtools jar target name clean delete dir bugs includes class delete dir notbugs includes class target target name task1 aj iajc srcdir destdir source target classpath location aspectjrt jar include name bugs advised aj aj iajc target target name task2 aj iajc source target srcdir classpath location aspectjrt jar aspectpath location include name notbugs ref aj aj iajc target project from within eclipse build errors because all one project command line however once execute ant task2 get following marvelous error message which suggests ajc trying itd class already itdd before aj iajc error workplace imds bugs bugs advised aj 77 inter type declaration from bugs itd conflicts existing member void bugs advised aj iajc message holder info error aj iajc error error workplace imds bugs bugs advised aj 77 inter type declaration from bugs itd conflicts existing member void bugs advised let me also say my real use case jar produced task1 contain aspects should apply clients thereof jar should indeed aspectpath classpath task2 unless am seriously something how stop duplicate attempt itd josh josh correct using aspectpath pull aspects application other types problem when pulling type advised we reapply known itds clashes one added original build type two possible fixes am looking don reapply itds added ensure type system consistent binary types pulled from aspectpath recognize itd clashing member previously applied through same itd am sure we can determine came from aspectpath point clash detected have option already implemented ll try little more option before giving up itds problem itds appearing applied twice clashing binary types
debugged stack trace from load time weaving ajcore files also available found signature argument type factory create type from signature string pjava lang enum ljavax jws soap soapbinding parameter style method erroneously using empty array parameters because thinks relates generic type parameter should fairly easy reproduce test case fix patch ll look some more tonight week java lang array index out bounds exception org aspectj weaver resolved type get member map resolved type java 698 org aspectj weaver reference type get declared interfaces reference type java 406 org aspectj weaver resolved type get direct supertypes resolved type java 65 org aspectj weaver patterns type pattern matches subtypes type pattern java 182 org aspectj weaver patterns type pattern matches subtypes type pattern java 169 org aspectj weaver patterns type pattern matches statically type pattern java 119 org aspectj weaver loadtime class loader weaving adaptor accept class loader weaving adaptor java 621 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 253 org aspectj weaver loadtime aj pre process aj java 78 org aspectj weaver loadtime class pre processor agent adapter transform class pre processor agent adapter java 52 sun instrument transformer manager transform transformer manager java 122 sun instrument impl transform impl java 155 java lang class loader define class ljava lang string biiljava security protection domain ljava lang class unknown source java security secure class loader define class secure class loader java 124 java net urlclass loader define class urlclass loader java 260 java net urlclass loader access 100 urlclass loader java 56 java net urlclass loader run urlclass loader java 195 java net urlclass loader find class urlclass loader java 188 java lang class loader load class ljava lang string ljava lang class unknown source sun misc launcher app class loader load class launcher java 268 java lang class loader load class ljava lang string ljava lang class unknown source java lang class loader load class from native ljava lang string ljava lang class unknown source java lang class name ljava lang string zljava lang class loader ljava lang class unknown source jrockit reflect member access get class from field desc ljava lang string iljava lang class loader ljava lang class unknown source jrockit reflect member access get return class from method desc ljava lang string ljava lang class loader ljava lang class unknown source array index out bound exception bug nested type type parameters
when executing clean project eclipse automatic building receive error below line from top stack some file jara 243 java lang null pointer exception org aspectj ajdt internal compiler problem aj problem reporter method must override aj problem reporter java 380 org aspectj org eclipse jdt internal compiler ast method declaration resolve statements method declaration java 153 org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve abstract method declaration java 400 org aspectj org eclipse jdt internal compiler ast type de pter java 107 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception thrown null when ordering clean build automatico receive error below
iajc ant task currently supports only few options provided ajc compiler would nice could support them all so builds done using ant task generate same errors warnings ones done within eclipse ide iajc ant task doesn support all warn options
due mechanism used concrete aspect code gen see lot unnecessary exceptions created problem rather than looking up type confirm doesn exist before defining code uses resolve check exists resolve attempts build isnt because classloader never find aop xml defined type class doesn exist anywhere classpath spurious exception created sometimes traced collecting trace going change code do lookup all really necessary ltw unnecessary exceptions during aspects aop xml
am working aspect jdeveloper have found possible convince compiler use jdk constructs appears method ajc build options called get java options map which currently implemented return null all cases compiler adapter configure build options areound line 358 code tried access object access whether use jdk constructs since return value always null project never properly configured notice only other root interface core build option which appears directly return structure from eclipse class java project would appear interface breaking rules abstraction correct read situation so solution would either implement core build option class correctly work adje project adapter class alter code compiler adapter correct use properties project adapter think latter probably best build option assumes depedency eclipse which shouldn we do currently have customer one nato who currently having work around issue so would good get resolve possible know am bit late now do lost email can longer compile jdk projects apsectj jdeveloper
generic parameters like list extends pointcuts throw unsupported operation exception java lang unsupported operation exception org aspectj weaver unresolved type parameterize unresolved type java 220 org aspectj weaver patterns exact type pattern parameterize exact type pattern java 244 org aspectj weaver patterns signature pattern parameterize signature pattern java 265 org aspectj weaver patterns kinded pointcut parameterize kinded pointcut java 381 org aspectj weaver bcel bcel advice parameterize bcel advice java 93 org aspectj weaver resolved type get declared advice resolved type java 710 org aspectj weaver resolved type get declared shadow mungers resolved type java 739 org aspectj weaver resolved type collect shadow mungers resolved type java 575 org aspectj weaver resolved type collect crosscutting members resolved type java 504 org aspectj weaver crosscutting members set add replace aspect crosscutting members set java 68 org aspectj weaver crosscutting members set add replace aspect crosscutting members set java 57 org aspectj weaver bcel bcel weaver prepare weave bcel weaver java 450 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 299 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 192 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 887 org aspectj ajdt internal core builder aj build manager do build aj build manager java 244 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 unsupported operation exception thrown unable parameterize unresolved type pjava util list ljava lang object reproduce exception compile following code snippet import java util array list import java util list import org aspectj lang proceeding join point import org aspectj lang annotation around import org aspectj lang annotation aspect public class main public list extends element get elements return new array list element class element aspect static abstract class base around call list extends public list extends element list proceeding join point join point try return list extends join point proceed catch throwable throw new runtime exception aspect static class concrete extends base element public static void main string args new main get elements unsupported operation exception thrown unable parameterize unresolved type pjava util list ljava lang object
java lang null pointer exception org aspectj weaver member impl get modifiers member impl java 526 org aspectj weaver member impl get method signature string member impl java 824 org aspectj weaver member impl get signature string member impl java 753 org aspectj weaver bcel lazy class gen initialize tjp lazy class gen java 1039 org aspectj weaver bcel lazy class gen initialize all tjps lazy class gen java 1016 org aspectj weaver bcel lazy class gen add ajc initializers lazy class gen java 964 org aspectj weaver bcel lazy class gen write back lazy class gen java 502 org aspectj weaver bcel lazy class gen get java class bytes including reweavable lazy class gen java 652 org aspectj weaver bcel bcel weaver get class files bcel weaver java 1337 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1309 org aspectj weaver bcel bcel weaver weave bcel weaver java 1127 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 284 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 212 org aspectj weaver loadtime weaving urlclass loader define class weaving urlclass loader java 125 org aspectj weaver extensible urlclass loader define class extensible urlclass loader java 80 org aspectj weaver extensible urlclass loader find class extensible urlclass loader java 46 java lang class loader load class class loader java 306 java lang class loader load class class loader java 251 java lang class loader load class internal class loader java 319 exception thread main public aspect join point trace aspect private int call depth pointcut trace points within join point trace aspect before trace points call depth print before join point after trace points print after join point call depth private void print string prefix object message int spaces call depth spaces system out print system out println prefix message aspect edt rule checker private boolean stress checking true public pointcut any swing methods jcomponent target call public pointcut thread safe methods call repaint call revalidate call invalidate call get listeners call add listener call remove listener calls any jcomponent method including subclasses before jcomponent any swing methods thread safe methods within edt rule checker swing utilities event dispatch thread stress checking showing system err println join point get source location system err println join point get signature system err println calls any jcomponent constructor including subclasses before call jcomponent new stress checking swing utilities event dispatch thread system err println join point get source location system err println join point get signature constructor system err println running swing set2 npe org aspectj weaver member impl get modifiers member impl java 526
whilst looking other ajdoc bugs slightly confusing read main ajdoc method didn want include refactoring within patches other bugs mearly ease use therefore raising enhancement cover ajdoc main class needs refactoring ease use
ve been playing some aspect deployment models got error during project rebuild from ajdt java lang null pointer exception org aspectj weaver bcel bcel advice implement bcel advice java 199 org aspectj weaver shadow implement mungers shadow java 699 org aspectj weaver shadow implement shadow java 471 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 2832 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 506 org aspectj weaver bcel bcel class weaver weave bcel class weave lasses when weaving when batch building build config files here aspect classes applied aspect percflow execution instrumented bean get property2 public class get field aspect around execution configurable bean get property2 public object get proceeding join point jp throws throwable return jp proceed import org beans factory initializing bean public class instrumented bean implements initializing bean bean private configurable bean configurable bean private string value private transient string transient value aaa public void after properties set throws exception configurable bean new configurable bean public string get property1 synchronized return configurable bean get property1 public string get property2 synchronized return configurable bean get property2 public void set value string value synchronized value value public object get value synchronized return value public object get transient value return transient value public void set transient value string transient value transient value transient value import java io serializable import org beans factory annotation configurable configurable public class configurable bean implements serializable private static final long serial version uid 1l private string property1 private string property2 public configurable bean public string get property1 return property1 public string get property2 return property2 public void set property1 string property1 property1 property1 public void set property2 string property2 property2 property2 npe bcel advice
has been happening lot having trouble figuring out why happening always happens both eclipse from command line java lang array index out bounds exception org aspectj org eclipse jdt internal compiler problem problem reporter invalid type problem reporter java 2992 org aspectj org eclipse jdt internal compiler ast type reference report invalid type type reference java 170 org aspectj org eclipse jdt internal compiler ast type reference resolve type type reference java 136 org aspectj org eclipse jdt internal compiler ast type reference resolve type type reference java 123 org aspectj org eclipse jdt internal compiler ast annotation resolve type annotation java 214 org aspectj org eclipse jdt internal compiler ast astnode resolve annotations astnode java 436 org aspectj ajdt internal compiler lookup eclipse source type get annotation types eclipse source type java 443 org aspectj ajdt internal compiler lookup eclipse source type annotation style aspect eclipse source type java 123 org aspectj ajdt internal compiler lookup eclipse source type aspect eclipse source type java 108 org aspectj weaver reference type aspect reference type java 159 org aspectj ajdt internal compiler lookup aj lookup environment verify any type parameters meet bounds aj lookup environment java 269 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 228 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 301 org aspectj org eclipse jdt internal compiler compiler compile compiler java 315 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 887 org aspectj ajdt internal core builder aj build manager do build aj build manager java 244 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 array index out bounds exception thrown declare annotation problem aioobe problem reporter java 2992
ant task shown below ommited full paths values inpath out jar argfiles because somewhat long hence before file names iajc crossrefs true argfiles weave jars txt inpath org eclipse core runtime v20060603 jar out jar org eclipse core runtime v20060603 woven jar classpath pathelement location aspectj1 lib aspectjrt jar fileset dir plugins dir include name jar fileset classpath iajc my argfile only contains absolute path single aj file which contains one aspect aspect shown below very basic advice bodies simply toggle boolean variable public aspect ffdc public static boolean bit false protected pointcut ffdc scope within org eclipse protected pointcut excluded within org eclipse ffdc ffdc within org eclipse core internal runtime platform activator before core exception ffdc scope excluded handler core exception args bit bit after throwing core exception ffdc scope excluded handler bit bit after plugin activator execution void platform activator start activator bit bit task worked properly before added crossrefs true after adding option get following error weave eclipse sdk aspect package eclipse plugins org eclipse core runtime v20060603 jar iajc abort abort null pointer exception null iajc null iajc java lang null pointer exception iajc org aspectj ajdt internal core builder aj build manager do build aj build manager java 313 iajc org aspectj ajdt internal core builder aj build manager batch build aj build manager java 163 iajc org aspectj ajdt ajc ajdt command do command ajdt command java 112 iajc org aspectj ajdt ajc ajdt command run command ajdt command java 60 iajc org aspectj tools ajc main run main java 367 iajc org aspectj tools ajc main run main main java 246 iajc org aspectj tools ant taskdefs ajc task execute same vm ajc task java 1282 iajc org aspectj tools ant taskdefs ajc task execute ajc task java 1080 iajc org apache tools ant unknown element execute unknown element java 275 iajc org apache tools ant task perform task java 364 iajc org apache tools ant target execute target java 341 iajc org apache tools ant target perform tasks target java 369 iajc org apache tools ant project execute sorted targets project java 1216 iajc org apache tools ant helper single check executor execute targets single check executor java 37 iajc org apache tools ant project execute targets project java 1068 iajc org apache tools ant taskdefs ant execute ant java 382 iajc org apache tools ant taskdefs call target execute call target java 107 iajc org apache tools ant unknown element execute unknown element java 275 iajc org apache tools ant task perform task java 364 iajc org apache tools ant target execute target java 341 iajc org apache tools ant target perform tasks target java 369 iajc org apache tools ant project execute sorted targets project java 1216 iajc org apache tools ant project execute target project java 1185 iajc org apache tools ant helper default executor execute targets default executor java 40 iajc org apache tools ant project execute targets project java 1068 iajc org apache tools ant main run build main java 668 iajc org apache tools ant main start ant main java 187 iajc org apache tools ant launch launcher run launcher java 246 iajc org apache tools ant launch launcher main launcher java 67 npe when using crossrefs option iajc ant task
advice same kind contained same aspect currently do have unique handles aspect aspectpath advice from injars do have unique handles jdtlike handle provider
using aspect 200609271036 when declaring annotation method get unexpected error when using subtype wildcard declaring type declare method void foo foo method annotation error text method void foo foo does exist subtype pattern working declare annotation method
eclipse ajdt give incorrect warning when you want advise private method private inner class when want advise private method private inner class like public class outer private class inner private void my method using following poincut poincut execution outer inner my method advice before system out println executing get warning invalid absolute type name next my pointcut next advice marker points private method incorrect warning when advising private method private inner class
load time weaving definition system accepts addition amp amp pointcuts silently accepts fails work type patterns use type patterns important when creating exceptions excluding weblogic amp amp weblogic jdbc using also helpful here ve attached patch support tests show working ltw within patterns should accept consistency
changing value variable aspect results advice did match warning
ok sure what report here what info you need here set up message erroreous class don understand errors from compiler enough parse down erroneous file something contains only bug could direction were given here my set up eclipse sdk version build id m20060629 1905 ajdt eclipse aspect development tools version 200608141223 aspect version 200608210848 here bug dump from compiler inside eclipse java lang unsupported operation exception org aspectj weaver unresolved type parameterize unresolved type java 221 org aspectj weaver resolved member impl parameterize resolved member impl java 680 org aspectj weaver resolved member impl parameterize resolved member impl java 690 org aspectj weaver resolved member impl resolved member impl java 643 org aspectj weaver resolved member impl resolved member impl java 597 org aspectj weaver reference type get declared methods reference type java 508 org aspectj weaver resolved type get resolved type java 226 org aspectj weaver iterators has next iterators java 118 org aspectj weaver iterators has next iterators java 171 org aspectj weaver iterators has next iterators java 128 org aspectj weaver resolved type lookup member resolved type java 346 org aspectj weaver resolved type lookup method resolved type java 327 org aspectj weaver world resolve world java 523 org aspectj weaver member impl resolve member impl java 93 org aspectj weaver join point signature iterator add signatures up first defining member join point signature iterator java 109 org aspectj weaver join point signature iterator init join point signature iterator java 51 org aspectj weaver member impl get join point signatures member impl java 943 org aspectj weaver patterns signature pattern matches signature pattern java 286 org aspectj weaver patterns kinded pointcut match internal kinded pointcut java 106 org aspectj weaver patterns pointcut match pointcut java 146 org aspectj weaver patterns pointcut match internal pointcut java 51 org aspectj weaver patterns pointcut match pointcut java 146 org aspectj weaver shadow munger match shadow munger java 75 org aspectj weaver advice match advice java 112 org aspectj weaver bcel bcel advice match bcel advice java 117 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2806 org aspectj weaver bcel bcel class weaver match invoke instruction bcel class weaver java 2768 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2506 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2332 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 494 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 119 org aspectj weaver bcel bcel weaver weave bcel weaver java 1606 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1557 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1335 org aspectj weaver bcel bcel weaver weave bcel weaver java 1155 org aspectj ajdt internal compiler aj pipelining compiler adapter weave queued entries aj pipelining compiler adapter java 455 org aspectj ajdt internal compiler aj pipelining compiler adapter queue weaving aj pipelining compiler adapter java 392 org aspectj ajdt internal compiler aj pipelining compiler adapter after processing aj pipelining compiler adapter java 380 org aspectj ajdt internal compiler compiler adapter ajc after org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 98 org aspectj org eclipse jdt internal compiler compiler process compiler java 533 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 892 org aspectj ajdt internal core builder aj build manager do build aj build manager java 246 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 165 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public class com wec lib util test sync value test extends junit framework test case private com wec lib util test sync value test sync integer private com wec lib util test sync value test sync integer private com wec lib util test sync value test sync integer private com wec lib util test sync value test sync integer private com wec lib util test sync value test sync integer public void init aload lcom wec lib util test sync value test line 17 junit framework test case init constructor execution void com wec lib util test sync value test init aload lcom wec lib util test sync value test line 27 new com wec lib util test sync value test sync integer dup aload lcom wec lib util test sync value test iconst com wec lib util test sync value test sync integer init lcom wec lib util test sync value test putfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer aload lcom wec lib util test sync value test line 28 new com wec lib util test sync value test sync integer dup aload lcom wec lib util test sync value test iconst com wec lib util test sync value test sync integer init lcom wec lib util test sync value test putfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer aload lcom wec lib util test sync value test line 29 new com wec lib util test sync value test sync integer dup aload lcom wec lib util test sync value test iconst com wec lib util test sync value test sync integer init lcom wec lib util test sync value test putfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer aload lcom wec lib util test sync value test line 30 new com wec lib util test sync value test sync integer dup aload lcom wec lib util test sync value test iconst com wec lib util test sync value test sync integer init lcom wec lib util test sync value test putfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer aload lcom wec lib util test sync value test line 31 new com wec lib util test sync value test sync integer dup aload lcom wec lib util test sync value test iconst com wec lib util test sync value test sync integer init lcom wec lib util test sync value test putfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer return line 17 constructor execution void com wec lib util test sync value test init end public void init public void test sync value group org aspectj weaver method declaration line number 39 1035 method execution void com wec lib util test sync value test test sync value group aload lcom wec lib util test sync value test line 42 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst anewarray com wec lib util sync value group dup iconst aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer aastore method call void com wec lib util test sync value test sync integer link com wec lib util sync value group com wec lib util test sync value test sync integer link lcom wec lib util sync value group method call void com wec lib util test sync value test sync integer link com wec lib util sync value group aload lcom wec lib util test sync value test line 43 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object acmpne l0 iconst goto l1 l0 iconst l1 invokestatic com wec lib util test sync value test assert true iconst line 44 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l2 iconst goto l3 l2 iconst l3 invokestatic com wec lib util test sync value test assert true aload lcom wec lib util test sync value test line 45 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst invokestatic java lang integer value ljava lang integer com wec lib util test sync value test sync integer set value ljava lang object iconst line 46 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l4 iconst goto l5 l4 iconst l5 invokestatic com wec lib util test sync value test assert true aload lcom wec lib util test sync value test line 47 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst anewarray com wec lib util sync value group dup iconst aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer aastore com wec lib util test sync value test sync integer link lcom wec lib util sync value group iconst line 48 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l6 iconst goto l7 l6 iconst l7 invokestatic com wec lib util test sync value test assert true aload lcom wec lib util test sync value test line 49 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst invokestatic java lang integer value ljava lang integer com wec lib util test sync value test sync integer set value ljava lang object iconst line 50 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l8 iconst goto l9 l8 iconst l9 invokestatic com wec lib util test sync value test assert true iconst line 51 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l10 iconst goto l11 l10 iconst l11 invokestatic com wec lib util test sync value test assert true aload lcom wec lib util test sync value test line 52 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst invokestatic java lang integer value ljava lang integer com wec lib util test sync value test sync integer set value ljava lang object iconst line 53 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l12 iconst goto l13 l12 iconst l13 invokestatic com wec lib util test sync value test assert true iconst line 54 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l14 iconst goto l15 l14 iconst l15 invokestatic com wec lib util test sync value test assert true aload lcom wec lib util test sync value test line 55 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst invokestatic java lang integer value ljava lang integer com wec lib util test sync value test sync integer set value ljava lang object iconst line 56 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l16 iconst goto l17 l16 iconst l17 invokestatic com wec lib util test sync value test assert true iconst line 57 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l18 iconst goto l19 l18 iconst l19 invokestatic com wec lib util test sync value test assert true aload lcom wec lib util test sync value test line 59 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst anewarray com wec lib util sync value group dup iconst aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer aastore com wec lib util test sync value test sync integer link lcom wec lib util sync value group aload lcom wec lib util test sync value test line 60 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object acmpne l20 iconst goto l21 l20 iconst l21 invokestatic com wec lib util test sync value test assert true aload lcom wec lib util test sync value test line 63 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst anewarray com wec lib util sync value group dup iconst aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer aastore com wec lib util test sync value test sync integer link lcom wec lib util sync value group iconst line 64 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l22 iconst goto l23 l22 iconst l23 invokestatic com wec lib util test sync value test assert true iconst line 65 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l24 iconst goto l25 l24 iconst l25 invokestatic com wec lib util test sync value test assert true aload lcom wec lib util test sync value test line 66 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer bipush invokestatic java lang integer value ljava lang integer com wec lib util test sync value test sync integer set value ljava lang object bipush line 67 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l26 iconst goto l27 l26 iconst l27 invokestatic com wec lib util test sync value test assert true bipush line 68 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l28 iconst goto l29 l28 iconst l29 invokestatic com wec lib util test sync value test assert true bipush line 69 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l30 iconst goto l31 l30 iconst l31 invokestatic com wec lib util test sync value test assert true bipush line 70 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l32 iconst goto l33 l32 iconst l33 invokestatic com wec lib util test sync value test assert true bipush line 71 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l34 iconst goto l35 l34 iconst l35 invokestatic com wec lib util test sync value test assert true aload lcom wec lib util test sync value test line 74 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer unlink aload lcom wec lib util test sync value test line 75 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst invokestatic java lang integer value ljava lang integer com wec lib util test sync value test sync integer set value ljava lang object aload lcom wec lib util test sync value test line 76 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst invokestatic java lang integer value ljava lang integer com wec lib util test sync value test sync integer set value ljava lang object iconst line 77 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l36 iconst goto l37 l36 iconst l37 invokestatic com wec lib util test sync value test assert true iconst line 78 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l38 iconst goto l39 l38 iconst l39 invokestatic com wec lib util test sync value test assert true iconst line 79 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l40 iconst goto l41 l40 iconst l41 invokestatic com wec lib util test sync value test assert true iconst line 80 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l42 iconst goto l43 l42 iconst l43 invokestatic com wec lib util test sync value test assert true iconst line 81 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l44 iconst goto l45 l44 iconst l45 invokestatic com wec lib util test sync value test assert true aload lcom wec lib util test sync value test line 82 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer unlink aload lcom wec lib util test sync value test line 83 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst anewarray com wec lib util sync value group dup iconst aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer aastore com wec lib util test sync value test sync integer link lcom wec lib util sync value group aload lcom wec lib util test sync value test line 84 getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer iconst invokestatic java lang integer value ljava lang integer com wec lib util test sync value test sync integer set value ljava lang object iconst line 85 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l46 iconst goto l47 l46 iconst l47 invokestatic com wec lib util test sync value test assert true iconst line 86 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l48 iconst goto l49 l48 iconst l49 invokestatic com wec lib util test sync value test assert true iconst line 87 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l50 iconst goto l51 l50 iconst l51 invokestatic com wec lib util test sync value test assert true iconst line 88 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l52 iconst goto l53 l52 iconst l53 invokestatic com wec lib util test sync value test assert true iconst line 89 aload lcom wec lib util test sync value test getfield com wec lib util test sync value test lcom wec lib util test sync value test sync integer com wec lib util test sync value test sync integer get value ljava lang object checkcast java lang integer java lang integer int value icmpne l54 iconst goto l55 l54 iconst l55 invokestatic com wec lib util test sync value test assert true return line 90 method execution void com wec lib util test sync value test test sync value group end public void test sync value group end public class com wec lib util test sync value test when weaving classes when weaving when batch building build config workspace metadata plugins org eclipse ajdt core anser2 generated lst files 365 here class package com wec lib util test import static com wec ide constants unchecked import junit framework test case import org junit test import com wec lib util sync value group import com wec scrum tests class tests sync value group utility class tests classes sync value group class suppress warnings nls public class sync value test extends test case class sync integer extends sync value group integer public sync integer int val super new integer val public void value changed private sync integer new sync integer private sync integer new sync integer private sync integer new sync integer private sync integer new sync integer private sync integer new sync integer ensures sync value group replicates values calls value change suppress warnings unchecked test public void test sync value group link tests link assert true get value get value assert true get value set value assert true get value link assert true get value set value assert true get value assert true get value set value assert true get value assert true get value set value assert true get value assert true get value link assert true get value get value join loops link assert true get value assert true get value set value assert true get value assert true get value assert true get value assert true get value assert true get value unlink tests unlink set value set value assert true get value assert true get value assert true get value assert true get value assert true get value unlink link set value assert true get value assert true get value assert true get value assert true get value assert true get value compiler error generics arrays
incorrect source signature field ipe qualified allocation expression
am trying use aspect pointcut normal aspect declare error expression results following exception java lang null pointer exception org aspectj weaver patterns reference pointcut concretize1 reference pointcut java 361 org aspectj weaver patterns pointcut concretize pointcut java 233 org aspectj weaver patterns pointcut concretize1 pointcut java 100 org aspectj weaver patterns pointcut concretize pointcut java 233 org aspectj weaver patterns pointcut concretize1 pointcut java 97 org aspectj weaver patterns pointcut concretize pointcut java 233 org aspectj weaver patterns pointcut concretize pointcut java 220 org aspectj weaver checker concretize checker java 45 org aspectj weaver crosscutting members add shadow munger crosscutting members java 91 org aspectj weaver crosscutting members add declare crosscutting members java 122 org aspectj weaver crosscutting members add declares crosscutting members java 113 org aspectj weaver crosscutting members set add advice like declares crosscutting members set java 117 org aspectj ajdt internal compiler lookup aj lookup environment add advice like declares aj lookup environment java 382 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 245 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 301 org aspectj org eclipse jdt internal compiler compiler compile compiler java 315 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 887 org aspectj ajdt internal core builder aj build manager do build aj build manager java 244 org aspectj ajdt internal core builder aj build manager do build aj build manager java 199 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 170 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception thrown null pointcut declare error results npe
public aspect outer aspect private pointcut setter execution void set public static aspect inner aspect pertarget setter java lang illegal state exception org aspectj apache bcel classfile generic signature parser parse field type signature generic signature parser java 163 org aspectj apache bcel classfile generic signature parser parse type argument generic signature parser java 253 org aspectj apache bcel classfile generic signature parser maybe parse type arguments generic signature parser java 261 org aspectj apache bcel classfile generic signature parser parse class type signature generic signature parser java 208 org aspectj apache bcel classfile generic signature parser parse class signature generic signature parser java 56 org aspectj apache bcel classfile signature class signature signature java 315 org aspectj apache bcel classfile java class get generic class type signature java class java 973 org aspectj weaver bcel bcel object type initialize from javaclass bcel object type java 164 org aspectj weaver bcel bcel object type init bcel object type java 131 org aspectj weaver bcel bcel world build bcel delegate bcel world java 337 org aspectj weaver bcel bcel world add source object type bcel world java 395 org aspectj weaver bcel bcel weaver add aspect bcel weaver java 263 org aspectj weaver bcel bcel weaver add aspects from directory bcel weaver java 255 org aspectj weaver bcel bcel weaver add library jar file bcel weaver java 205 org aspectj ajdt internal core builder aj build manager init bcel world aj build manager java 698 org aspectj ajdt internal core builder aj build manager do build aj build manager java 223 org aspectj ajdt internal core builder aj build manager do build aj build manager java 199 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 170 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 illegal state exception thrown expecting found pjava while unpacking ljava util abstract set pjava util map entry tk tv generics problem signature generic type
aspect version 200608290814 when advising constructor we can do following obtain constructor java lang reflect member member cons constructor signature join point static part get signature get constructor however sometimes fails returns null null pointer exception constructor signature get constructor
tracing module uses obj hash code identify untrusted objects when formatting think would little safer more accurate use system identity hash code obj way tracing code wouldn call any application defined code would give value can change loader state changes trace should use system identity hash code hash code
turned tracing aj class inside oracle oc4j server one test always deadlocked looks like threads each trying lock each other loader notice one threads string method oracle class loader perhaps another reason prefer tracing argument class names system identity hashcodes here thread dump from ctrl break found one java level deadlock work executor worker thread waiting lock monitor 0x003384ec object 0x05239e48 oracle classloader po licy class loader which held oc4j launcher oc4j launcher waiting lock monitor 0x0033848c object 0x0554f0e8 oracle classloader po licy class loader which held work executor worker thread java stack information threads listed above work executor worker thread oracle classloader search policy load class search policy java 641 waiting lock 0x05239e48 oracle classloader policy class loader oracle classloader policy class loader ask parent class policy class loa der java 1284 oracle classloader search policy ask parent get class search policy java 69 oracle classloader search sequence get class search sequence java 119 oracle classloader search policy load class search policy java 642 locked 0x0554f0e8 oracle classloader policy class loader oracle classloader policy class loader ask parent class policy class loa der java 1284 oracle classloader search policy ask parent get class search policy java 69 oracle classloader search sequence get class search sequence java 119 oracle classloader policy class loader internal load class policy class loa der java 1660 locked 0x056a9ed0 oracle classloader policy class loader oracle classloader policy class loader load class policy class loader java 1621 oracle classloader policy class loader load class policy class loader java 1606 java lang class loader load class internal class loader java 319 locked 0x056a9ed0 oracle classloader policy class loader oracle j2ee ra jms generic work consumer do receive work consumer java 87 oracle j2ee ra jms generic work consumer run work consumer java 215 locked 0x05de2718 oracle j2ee ra jms generic work consumer oracle j2ee connector work work wrapper run target work work wrapper java 242 oracle j2ee connector work work wrapper do work work wrapper java 215 oracle j2ee connector work work wrapper run work wrapper java 190 edu oswego cs dl util concurrent pooled executor worker run pooled exec utor java 814 java lang thread run thread java 595 oc4j launcher oracle classloader policy class loader string policy class loader java 1846 waiting lock 0x0554f0e8 oracle classloader policy class loader java text message format subformat message format java 1237 java text message format format message format java 828 java text format format format java 133 java text message format format message format java 804 java util logging formatter format message formatter java 130 locked 0x0514e920 java util logging simple formatter java util logging simple formatter format simple formatter java 63 locked 0x0514e920 java util logging simple formatter java util logging stream handler publish stream handler java 179 locked 0x0514a0a8 java util logging file handler java util logging file handler publish file handler java 555 locked 0x0514a0a8 java util logging file handler java util logging logger log logger java 428 java util logging logger do log logger java 450 java util logging logger logp logger java 619 java util logging logger entering logger java 870 org aspectj weaver tools jdk14trace enter jdk14trace java 32 org aspectj weaver loadtime aj pre process aj java 67 org aspectj weaver loadtime class pre processor agent adapter transform lass pre processor agent adapter java 55 sun instrument transformer manager transform transformer manager java 22 sun instrument impl transform impl java 155 java lang class loader define class1 native method java lang class loader define class class loader java 620 oracle classloader policy class loader define class policy class loader ja va 2224 oracle classloader policy class loader find local class policy class loader java 1457 oracle classloader search policy find local get class search policy java 167 oracle classloader search sequence get class search sequence java 119 oracle classloader policy class loader internal load class policy class loa der java 1660 locked 0x05239e48 oracle classloader policy class loader oracle classloader policy class loader load class policy class loader java 1621 oracle classloader policy class loader load class policy class loader java 1606 java lang class loader load class internal class loader java 319 locked 0x05239e48 oracle classloader policy class loader com evermind server http http request handler init http request handler java 97 com evermind server http http connection listener http nioaccept handler get read handler http connection listener java 116 oracle oc4j network read handler pool get context from backend read handler pool java 63 com evermind util bbpool start pool bbpool java 42 oracle oc4j network read handler pool register read handler pool java 25 locked 0x05ec9290 java util array list oracle oc4j network server socket accept handler set pool options server so cket accept handler java 140 com evermind server http http connection listener set request handler pool http connection listener java 232 com evermind server http http connection listener init handlers http conn ection listener java 226 com evermind server http http connection listener init http connection listener java 174 com evermind server http http server get listener http server java 481 locked 0x05ec4f88 com evermind server http http server com evermind server http http server set sites http server java 267 locked 0x05ec4f88 com evermind server http http server com evermind server http http server set config http server java 180 com evermind server application server initialize http application serve java 2296 com evermind server application server set config application server jav 944 com evermind server application server launcher run application server la uncher java 113 locked 0x0530eb20 java lang object java lang thread run thread java 595 found deadlock jdk14 trace deadlock oc4j
static initializer version parses time text string turns long field seems sometimes get loadtime weaving state touching date formatters early always pain so moving processed first reference could take step further weaver state info didn write out time doesnt read back would never used all normal processing potentially saving us from loading bunch underpinning junk do formatting ltw can get state version static initializer
load time weaving system can produce truly massive quantities output when weaving error since system dumps bytecode syserr would much better produce ajcore file just point use some other log don dump bytecodes syserr ltw
would nice basic information about load time weaving what version aspect being used what loaders doing weaving what being used available without all verbose information listing all classes woven woven also unfortunate flags weaving level quite different ones daj weaving verbose dorg aspectj weaver show weave info why something like dorg aspectj weaver level none summary info verbose summary just what used info list affected join points etc like show weave info verbose all like verbose now allow multiple levels ltw information
error occurs static one aspect class woven advice from another aspect worked fine version see decompiled code snippet static object obj new factory ito monitoring aspect java class name cz kb ito ito monitoring aspect ajc tjp factory obj make sjp factory obj make initializer sig cz kb ito ito monitoring aspect obj factory make jp ajc tjp null null static aspect class deliberately woven using advice from another aspect defined elsewhere try user management log aspect aspect before class init org aspectj lang join point obj catch throwable throwable throwable instanceof exception initializer error throw exception initializer error throwable else user management log aspect aspect after class init throw throwable user management log aspect aspect after class init line below when compiling using aspect missing when using ajc note line however present static aspect class woven advice from other aspect ajc post clinit result missing call ajc post clinit aspect instance created method aspect throws org aspectj lang aspect bound exception aspect incorrect weaving static join point
raised mr bodkin list can anyone tell me why compiling program produces warnings marker deprecated recent dev build ajdt just bug both have runtime retention so would expect equivalent behavior deprecated marker public aspect annot pointcut test within marker declare warning deprecated deprecated declare warning marker marker public static void main string argz new baz foo deprecated marker class baz public void foo retention retention policy runtime public interface marker annotations incorrect handling java lang annotations when matching
following problem interesting because advice weaves correctly java ltw also using java build time weaving however following call pointcut isn matching expected call site java load time weaving pointcut private pointcut exec query within uk ltd getahead dwr impl execute query within uk ltd getahead dwr execute query public pointcut dwr query method method object receiver object params exec query withincode execute call method invoke args receiver params target method protected pointcut monitor end dwr query matching call site object reply method invoke object params ve tracked down failing find method resolved type matches line 405 m1 get signature ljava lang object ljava lang object ljava lang object m2 get signature ljava lang object ljava lang object ljava lang object note difference between looks me like signature array types reflection delegate erroneously using instead have attached patch reflection based reference type delegate test isolates unexpected signature return hopefully you agree correct some more information follows here stack trace where match fails resolved type matches member member line 405 reference type resolved type lookup member member iterator line 347 reference type resolved type lookup method member line 326 ltwworld world resolve member line 504 member impl resolve world line 93 join point signature iterator add signatures up first defining member line 109 join point signature iterator init member world line 51 member impl get join point signatures world line 943 signature pattern matches member world boolean line 286 kinded pointcut match internal shadow line 106 kinded pointcut pointcut match shadow line 146 pointcut match internal shadow line 53 pointcut pointcut match shadow line 146 pointcut match internal shadow line 51 pointcut pointcut match shadow line 146 pointcut match internal shadow line 51 pointcut pointcut match shadow line 146 pointcut match internal shadow line 51 pointcut pointcut match shadow line 146 pointcut match internal shadow line 50 pointcut pointcut match shadow line 146 bcel advice shadow munger match shadow world line 71 bcel advice advice match shadow world line 112 bcel advice match shadow world line 107 bcel class weaver match bcel shadow list line 2806 bcel class weaver match invoke instruction lazy method gen instruction handle invoke instruction bcel shadow list line 2768 bcel class weaver match lazy method gen instruction handle bcel shadow list line 2506 bcel class weaver match lazy method gen line 2332 bcel class weaver weave line 494 bcel class weaver weave bcel world lazy class gen list list list line 119 bcel weaver weave unwoven class file bcel object type boolean line 1613 bcel weaver weave without dump unwoven class file bcel object type line 1564 bcel weaver weave notify unwoven class file bcel object type iweave requestor line 1341 bcel weaver weave iclass file provider line 1163 class loader weaving adaptor weaving adaptor get woven bytes string byte line 319 class loader weaving adaptor weaving adaptor weave class string byte line 225 aj pre process string byte class loader line 77 class pre processor adapter pre process string byte class loader line 67 class pre processor helper define class0pre class loader string byte int int protection domain line 107 webapp class loader class loader define class string byte int int protection domain line 539 webapp class loader secure class loader define class string byte int int code source line 123 webapp class loader find class internal string line 1786 webapp class loader find class string line 1048 webapp class loader load class string boolean line 1506 webapp class loader load class string line 1385 webapp class loader class loader load class internal string line 302 class name0 string boolean class loader line available native method class name string line 141 initialize log set warn logging string line 121 initialize log initialize logging line 96 context loader servlet init line 13 context loader servlet generic servlet init servlet config line 212 standard wrapper load servlet line 879 standard wrapper load line 767 standard context load startup container line 3483 standard context start line 3709 standard host container base add child internal container line 776 standard host container base add child container line 759 standard host add child container line 537 standard host deployer install string url line 260 standard host install string url line 730 host config deploy wars file string line 558 host config deploy apps line 373 host config start line 784 host config lifecycle event lifecycle event line 330 lifecycle support fire lifecycle event string object line 119 standard host container base start line 1155 standard host start line 696 standard engine container base start line 1147 standard engine start line 310 standard service start line 449 standard server start line 2212 catalina start line 458 catalina execute line 345 catalina process string line 129 native method accessor impl invoke0 method object object line available native method native method accessor impl invoke object object line 39 delegating method accessor impl invoke object object line 25 method invoke object object line 324 bootstrap main string line 150 using modified version alex vasseur ltw plugin java vm although haven tested jrock plugin vm my guess would fail too bug reflection delegate signature array object type
used ajdt eclipse zip eclipse below my aspectj code public aspect my messages pointcut get resource string string key args key call common plugin get resource string string string around string key get resource string key return key warning message parameter key never read see my screenshot wrong warning reported
needed try out setting pipelined compilation xset run minimal memory true able verify parsed set option correctly debugger also have included test sets all currently available options contribution support xset load time weaving
get message from error recent dev build aspect load time weaving don know how null source location associated message either shouldn message util line 806 should use patch index src org aspectj bridge message util java rcs file home technology org aspectj modules bridge src org aspectj bridge message util java retrieving revision 11 diff r1 11 message util java src org aspectj bridge message util java jun 2006 09 36 37 0000 11 src org aspectj bridge message util java 31 jul 2006 22 32 16 0000 803 803 writer println base message iterator iter message get extra source locations iterator iter has next isource location element isource location iter next writer print tsee also element string writer print tsee also element iter has next writer println npe follows java lang null pointer exception org aspectj bridge message util add extra source locations message util java 806 org aspectj bridge message util render message message util java 793 org aspectj bridge message string message java 177 org aspectj bridge message writer render message writer java 73 org aspectj weaver tools weaving adaptor weaving adaptor message handler render weaving adaptor java 471 org aspectj bridge message writer handle message message writer java 41 org aspectj weaver tools weaving adaptor weaving adaptor message handler handle message weaving adaptor java 425 org aspectj weaver bcel bcel type munger error bcel type munger java 378 org aspectj weaver bcel bcel type munger enforce decp rule1 abstract methods implemented bcel type munger java 273 org aspectj weaver bcel bcel type munger munge new parent bcel type munger java 194 org aspectj weaver bcel bcel type munger munge bcel type munger java 106 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 450 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 115 org aspectj weaver bcel bcel weaver weave bcel weaver java 1613 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1564 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1341 org aspectj weaver bcel bcel weaver weave bcel weaver java 1163 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 288 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 214 org aspectj weaver loadtime aj pre process aj java 76 org aspectj ext ltw13 class pre processor adapter pre process class pre processor adapter java 65 org codehaus aspectwerkz hook impl class pre processor helper define class0pre class pre processor helper java 107 java lang class loader define class class loader java 539 note using alex vasseur adaptor invoke aspect ltw from vm recursion protection added don think should change expected behavior aj npe message util add extra source locations
have found lot memory can get pinned bcel class loader repository example test glassbox web logic over 40 megabytes were pinned memory due loader also notice some time spent loading parsing redundant classes shared weaving could reduced having global cache bytes url instead class loader repository local loader so even same class disk resolved multiple times different loaders isn read from cache latter issue reduced loading types from parent loader use reflection delegates instead bcel still has used aspects vm attached patch has some metrics measure what happening also uses soft references cache without pinning reference types uses two step look up process maintain global url cache when run web logic glassbox view admin console some smaller apps get output bcel repository total load time 7733 ms url 6029 ms 1427 url cache hits 1683 miss evicted miss url evicted all misses 1427 loader hits tomcat some different sample apps bcel repository total load time 4945 ms url 4319 ms 636 url cache hits 548 miss evicted miss url evicted 190 all misses 446 loader hits so least my url based cache quite effective almost 50 hit rate whereas loader based cache provides little value from what ve seen worth considering even using loader based bcel cache all others may have where helps test development build aspect which had modified so ltwworld evicts classes after loading optimization reference use url caching class loader repository
optimize should weave annotation style aspect patch
got following exception during startup eclipse java lang array index out bounds exception org aspectj ajdt internal core builder eclipse adapter utils make location context eclipse adapter utils java 65 org aspectj ajdt internal core builder eclipse adapter utils make source location eclipse adapter utils java 121 org aspectj ajdt internal core builder eclipse adapter utils make message eclipse adapter utils java 130 org aspectj ajdt internal core builder aj build manager accept result aj build manager java 959 org aspectj ajdt internal compiler aj pipelining compiler adapter accept result aj pipelining compiler adapter java 402 org aspectj ajdt internal compiler aj pipelining compiler adapter after processing aj pipelining compiler adapter java 375 org aspectj ajdt internal compiler compiler adapter ajc after org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 98 org aspectj org eclipse jdt internal compiler compiler process compiler java 533 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 891 org aspectj ajdt internal core builder aj build manager do build aj build manager java 246 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 165 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 array index out bounds exception thrown array index out bounds exception eclipse adapter utils make location context
occurs aspect build ajdt from august from july 31 java lang null pointer exception org aspectj weaver bcel bcel type munger enforce decp rule1 abstract methods implemented bcel type munger java 250 org aspectj weaver bcel bcel type munger munge new parent bcel type munger java 194 org aspectj weaver bcel bcel type munger munge bcel type munger java 106 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 454 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 119 org aspectj weaver bcel bcel weaver weave bcel weaver java 1597 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1548 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1328 org aspectj weaver bcel bcel weaver weave bcel weaver java 1124 org aspectj ajdt internal compiler aj pipelining compiler adapter weave queued entries aj pipelining compiler adapter java 451 org aspectj ajdt internal compiler aj pipelining compiler adapter queue weaving aj pipelining compiler adapter java 389 org aspectj ajdt internal compiler aj pipelining compiler adapter after processing aj pipelining compiler adapter java 377 org aspectj ajdt internal compiler compiler adapter ajc after org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 98 org aspectj org eclipse jdt internal compiler compiler process compiler java 533 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 891 org aspectj ajdt internal core builder aj build manager do build aj build manager java 246 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 165 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public class glassbox agent error containment test error mock aspect extends java lang object implements glassbox agent api serializable private static throwable ajc init failure cause synthetic public static final glassbox agent error containment test error mock aspect ajc per singleton instance synthetic static void clinit catch java lang throwable e0 invokestatic glassbox agent error containment test error mock aspect ajc post clinit line 60 catch java lang throwable e0 goto l0 e0 astore aload putstatic glassbox agent error containment test error mock aspect ajc init failure cause ljava lang throwable l0 return end static void clinit void init aload lglassbox agent error containment test error mock aspect line 60 java lang object init return end void init public void ajc before glassbox agent error containment test error mock aspect 9589fc advice attribute before scope call hook1 1670 new java lang runtime exception line 64 dup ldc rte java lang runtime exception init ljava lang string athrow end public void ajc before glassbox agent error containment test error mock aspect 9589fc public void ajc before glassbox agent error containment test error mock aspect f75db3e2 advice attribute before execution glassbox agent error containment test hook5 1764 new java lang runtime exception line 67 dup ldc rte java lang runtime exception init ljava lang string athrow end public void ajc before glassbox agent error containment test error mock aspect f75db3e2 public void ajc around glassbox agent error containment test error mock aspect a3a17d org aspectj runtime internal around closure advice attribute around scope call hook2 1913 new java lang error line 71 dup ldc foo java lang error init ljava lang string athrow end public void ajc around glassbox agent error containment test error mock aspect a3a17d org aspectj runtime internal around closure static void ajc around glassbox agent error containment test error mock aspect org aspectj runtime internal around closure throws java lang throwable org aspectj weaver aj attribute aj synthetic 19a01f9 aload lglassbox agent error containment test error mock aspect line iconst anewarray java lang object org aspectj runtime internal around closure run ljava lang object ljava lang object invokestatic org aspectj runtime internal conversions void value ljava lang object ljava lang object return end static void ajc around glassbox agent error containment test error mock aspect org aspectj runtime internal around closure throws java lang throwable public void ajc after glassbox agent error containment test error mock aspect bfd07f advice attribute after scope call hook4 1991 new org aspectj lang soft exception line 74 dup aconst null org aspectj lang soft exception init ljava lang throwable athrow end public void ajc after glassbox agent error containment test error mock aspect bfd07f public void ajc before glassbox agent error containment test error mock aspect e5bddfdc advice attribute before log error test 2446 getstatic glassbox agent error containment test log count line 84 iconst iadd putstatic glassbox agent error containment test log count return line 85 end public void ajc before glassbox agent error containment test error mock aspect e5bddfdc public void ajc before glassbox agent error containment test error mock aspect 16ecfe62 advice attribute before within glassbox util logging api log management cflow log error cflow execution test logging error within glassbox agent error containment test 2506 getstatic java lang system err ljava io print stream line 87 ldc match java io print stream println ljava lang string return line 88 end public void ajc before glassbox agent error containment test error mock aspect 16ecfe62 public void ajc before glassbox agent error containment test error mock aspect e9ae8482 advice attribute before within glassbox util logging api log management cflow execution test logging error within glassbox agent error containment test 2721 getstatic java lang system err ljava io print stream line 90 ldc match test java io print stream println ljava lang string return line 91 end public void ajc before glassbox agent error containment test error mock aspect e9ae8482 public void ajc before glassbox agent error containment test error mock aspect c6ac5351 advice attribute before within glassbox util logging api log management cflow log error 2923 getstatic java lang system err ljava io print stream line 93 ldc match log java io print stream println ljava lang string return line 94 end public void ajc before glassbox agent error containment test error mock aspect c6ac5351 public void ajc before glassbox agent error containment test error mock aspect 16ecfe62 advice attribute before within glassbox util logging api log management cflow log error cflow execution test logging error within glassbox agent error containment test 3069 getstatic glassbox agent error containment test recursive throws line 96 iconst iadd putstatic glassbox agent error containment test recursive throws getstatic glassbox agent error containment test recursive throws line 97 iconst icmpge l0 new java lang runtime exception line 98 dup ldc recursive logging failure java lang runtime exception init ljava lang string athrow l0 return line 100 end public void ajc before glassbox agent error containment test error mock aspect 16ecfe62 public static glassbox agent error containment test error mock aspect aspect org aspectj weaver aj attribute aj synthetic 3cd8fe getstatic glassbox agent error containment test error mock aspect ajc per singleton instance lglassbox agent error containment test error mock aspect line ifnonnull l0 new org aspectj lang aspect bound exception dup ldc glassbox agent error containment test error mock aspect getstatic glassbox agent error containment test error mock aspect ajc init failure cause ljava lang throwable org aspectj lang aspect bound exception init ljava lang string ljava lang throwable athrow l0 getstatic glassbox agent error containment test error mock aspect ajc per singleton instance lglassbox agent error containment test error mock aspect areturn end public static glassbox agent error containment test error mock aspect aspect public static boolean has aspect org aspectj weaver aj attribute aj synthetic 1bd4f6 getstatic glassbox agent error containment test error mock aspect ajc per singleton instance lglassbox agent error containment test error mock aspect line ifnull l0 iconst ireturn l0 iconst ireturn end public static boolean has aspect private static void ajc post clinit org aspectj weaver aj attribute aj synthetic 1febf91 new glassbox agent error containment test error mock aspect line dup glassbox agent error containment test error mock aspect init putstatic glassbox agent error containment test error mock aspect ajc per singleton instance lglassbox agent error containment test error mock aspect return end private static void ajc post clinit end public class glassbox agent error containment test error mock aspect when type munging bcel type munger resolved type munger parent null when weaving aspects when weaving when batch building build config devel glassbox metadata plugins org eclipse ajdt core glassbox monitor generated lst files 107 source public class error containment test extends test case static aspect error mock aspect implements serializable try narrow down problem isn obvious problem decp aspect using cflow
build module tests does test licenses ajdoc loadtime loadtime5 weaver5 when added necessary logic were couple failures could owners please step forward epl cpl ibm parc xerox others license fail workspaces org aspectj restructure weaver5 java5 src org aspectj weaver reflect deferred resolved pointcut definition java epl cpl ibm parc xerox others copyright fail workspaces org aspectj restructure weaver5 java5 src org aspectj weaver reflect deferred resolved pointcut definition java epl cpl ibm parc xerox others license fail workspaces org aspectj restructure weaver5 java5 src org aspectj weaver reflect internal use only pointcut parser java epl cpl ibm parc xerox others copyright fail workspaces org aspectj restructure weaver5 java5 src org aspectj weaver reflect internal use only pointcut parser java total passed failed also noticed following messages does anyone know what mean build module test define run build tests system property run tests build run all junit tests only warning class org aspectj internal build build module test test duplicates incomplete error building module weaver org aspectj internal tools ant taskdefs build module build build module java 145 org aspectj internal tools ant taskdefs build module execute build module java 117 org aspectj internal build build module test do task build module test java 445 org aspectj internal build build module test test duplicates build module test java 178 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 java lang reflect method invoke method java 585 junit framework test case run test test case java 154 junit framework test case run bare test case java 127 junit framework test result protect test result java 106 junit framework test result run protected test result java 124 module junit framework test result run test result java 109 junit framework test case run test case java 118 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 org eclipse jdt internal junit runner junit3 junit3test reference run junit3test reference java 128 org eclipse jdt internal junit runner test execution run test execution java 38 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 460 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 673 org eclipse jdt internal junit runner remote test runner run remote test runner java 386 org eclipse jdt internal junit runner remote test runner main remote test runner java 196 missing copyright license recently added modules
pipeline adding whitespace results advice did match warning
you start java vm aspect load time weaver specified more than once using javaagent flag aop xml file defined chokes badly tries reweave woven aspect code emits massive amounts bytecode would better aspect detected specified more than once gave warning disabled all one agents failing would better fail give error message than emit bytecode issue came up our automated installer which adds javaagent flag vm startup commands script wrapped twice can generate duplicate we making our scripts more intelligent avoid issue we probably only people who hit issue someone manually edits both setclasspath bat catalina bat add flag tomcat instance handle duplicate javaagent entries more gracefully
generics problem reported newsgroup thomas darimont package de tutorials aspectj public interface imessage void publish interface ierror message extends imessage stack trace element get stack trace interface iobject factory public extends create class object type object parameters class message factory implements iobject factory imessage public extends imessage create class object type object parameters return null class main public static void main string args ierror message message new message factory create ierror message class new object foo bar 2compiler generics program fails compile
we have had user report problem where after advice being woven particular method producing code does verify problem occurs bytecode being input weaving process includes subroutine contains return from method here problematic snippet produced some unknown compiler 200 17 method com my exception init ljava lang string 203 athrow 204 aload 205 astore 207 jsr 234 210 aload 212 areturn 213 astore 215 aload 217 79 method java lang throwable print stack trace 220 jsr 234 223 goto 238 226 astore 228 jsr 234 231 aload 233 athrow 234 astore 236 aload 237 areturn 238 return exception table from target type 213 213 class javax ejb finder exception 226 226 any see jsr jump 234 before subroutine return 238 areturn out method method returns string after weaving we get something like 200 17 method com my exception init ljava lang string 203 athrow 204 aload 205 astore 207 jsr 238 210 aload 212 astore 214 goto 248 217 astore 219 aload 221 79 method java lang throwable print stack trace 224 jsr 238 227 goto 246 230 astore 232 jsr 238 235 aload 237 athrow 238 astore 240 aload 241 astore 243 goto 248 246 astore 248 invokestatic 299 method after aspect lafter 251 302 method after ajc after returning after 26d6d4a7 254 aload 256 return see how areturn has been lost code blow up verify error string stack we just ignore return normally incorrect weaving after returning when input bytecode strange form
building large project fails while weaving npe eclipse source context remove unnecessary problems project just migrated eclipse eclipse newly installed eclipse sdk via update manager ajdt cdt web j2ee tools sub clipse spring ide same project workes eclipse simple test aspect project workes ok building ant aspect compiler external tools launch eclipse works tried following got error anyway checked out new aspect project upgraded developement version ajdt npe while building
hi created logging aspect our application some time ago using aspect enabled from time time using load time weaving have recently recompiled aspect using tried run also using weaver jar fails null pointer exception part one many stacktraces 20 jul 2006 07 42 49 046 java lang null pointer exception 20 jul 2006 07 42 49 062 org aspectj weaver bcel bcel weaver weave parent type mungers bcel weaver java 1367 20 jul 2006 07 42 49 062 org aspectj weaver bcel bcel weaver weave parents bcel weaver java 1237 20 jul 2006 07 42 49 062 org aspectj weaver bcel bcel weaver weave bcel weaver java 1072 20 jul 2006 07 42 49 062 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 284 20 jul 2006 07 42 49 062 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 212 20 jul 2006 07 42 49 062 org aspectj weaver loadtime aj pre process aj java 65 20 jul 2006 07 42 49 062 org aspectj weaver loadtime class pre processor agent adapter transform class pre processor agent adapter java 55 20 jul 2006 07 42 49 062 sun instrument transformer manager transform unknown source 20 jul 2006 07 42 49 062 sun instrument impl transform unknown source 20 jul 2006 07 42 49 062 java lang class loader define class1 native method 20 jul 2006 07 42 49 062 java lang class loader define class unknown source tried weaver jar although aspect compiled using ran without problems npe bcel weaver using ltw
when aspect has declare error statement involving pointcut captures setting volatile field compilation error produced bug can reproduced follows consider following class class private volatile int state public void foo state now consider aspect aspect fsm declare error set state changing state setting state field method foo does result compilation error expected originally noticed bug when using ajdt eclipse however has been reproduced confirmed aspectj compiler declare error set volatile field does work
am using aspect load time weaving spring rc1 inject my entities am getting following exception java lang class cast exception org aspectj apache bcel classfile signature type variable signature org aspectj weaver unresolved type generic type signature unresolved type java 348 org aspectj weaver bcel bcel world add source object type bcel world java 385 org aspectj weaver loadtime class loader weaving adaptor accept class loader weaving adaptor java 492 org aspectj weaver tools weaving adaptor should weave weaving adaptor java 230 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 210 org aspectj weaver loadtime aj pre process aj java 65 org aspectj weaver loadtime class pre processor agent adapter transform class pre processor agent adapter java 55 sun instrument transformer manager transform transformer manager java 122 sun instrument impl transform impl java 155 java lang class loader define class1 native method having examined call stack under debugger seems happening when weaver attempting determine whether particular class should weaved exception thrown following method cast highlighted below public static unresolved type generic type signature string sig string declared generic sig unresolved type ret unresolved type signature sig ret type kind type kind generic class signature csig new generic signature parser parse class signature declared generic sig signature formal type parameter ftps csig formal type parameters ret type variables new type variable ftps length int ftps length signature formal type parameter parameter ftps signature class type signature cts signature class type signature parameter class bound exception here ret type variables new type variable ftps identifier unresolved type signature cts outer type identifier ret signature erasure sig ret signature ret signature erasure return ret class question which one requires weaving has following signature public class hibernate entity dao interface extends security entity concrete extends interface extends hibernate dao support implements entity dao interface exception happening because parameter class bound member type signature class type signature instance signature type variable signature loop variable parameter identifier concrete so looks like signature second type parameter concrete tripping up weaver generics class cast exception unresolved type java 348
woven class does pass org apache bcel verifier statics
believe similar 112880 message stack trace am getting illegal state exception can ask parameterize member non generic type com object kind raw can ask parameterize member non generic type com object kind raw java lang illegal state exception can ask parameterize member non generic type com object kind raw org aspectj weaver resolved member impl resolved member impl java 612 org aspectj weaver resolved member impl resolved member impl java 597 org aspectj weaver reference type get declared methods reference type java 508 org aspectj weaver resolved type get resolved type java 225 org aspectj weaver iterators has next iterators java 118 org aspectj weaver iterators has next iterators java 171 org aspectj weaver iterators has next iterators java 128 org aspectj weaver resolved type lookup member resolved type java 345 org aspectj weaver resolved type lookup method resolved type java 326 same code able weaved under reason why major issue suffers from stack overflow exception illegal state exception non generic type
have been reported me large system doing some intricate weaving where some classes some some vm binary weaving declare parents sometimes refuses allow modification hierarchy because sees clash between two methods when none two cases fixing sometimes signatures return types differ problem fix consistent sometimes methods relationship isn determined correctly problems binary weaving declare parents mixed environment
separate compilation following program breaks 2rc1 because recent change marking aspect methods synthetic public aspect asp public class client public static void main string argz system out println can call aspect asp aspect devel scratch synthetic ajc classpath asp jar classpath client java devel scratch synthetic client java error method aspect undefi ned type asp system out println can call aspect asp aspect error devel scratch synthetic javac classpath asp jar classpath client java client java cannot find symbol symbol method aspect location class asp system out println can call aspect asp aspect error clearly vital external users library able call api methods like aspect library aspects works devel scratch synthetic ajc aj client java devel scratch synthetic java client can call aspect asp b89838 patch test integrated cvs tree follow can call synthetic aspect method aspect library jar
spring rc1 project contains two directories aspects since eclipse project does compile cleanly just java nature decided try adding aspectj nature giving aspectj builder shot don have any idea what might trigger problem simply checking out spring rc1 adding aspectj nature should able reproduce learn more add bug java lang null pointer exception org aspectj org eclipse jdt internal compiler ast single type reference get type binding single type reference java 39 org aspectj org eclipse jdt internal compiler ast type reference resolve type type reference java 132 org aspectj org eclipse jdt internal compiler ast type reference resolve type type reference java 123 org aspectj ajdt internal core builder asm element formatter set parameters asm element formatter java 311 org aspectj ajdt internal core builder asm element formatter gen label kind asm element formatter java 258 org aspectj ajdt internal core builder asm hierarchy builder visit asm hierarchy builder java 392 org aspectj org eclipse jdt internal compiler ast method declaration traverse method declaration java 185 org aspectj org eclipse jdt internal compiler ast type declaration traverse type declaration java 1250 org aspectj org eclipse jdt internal compiler ast qualified allocation expression traverse qualified allocation expression java 392 org aspectj org eclipse jdt internal compiler ast local declaration traverse local declaration java 242 org aspectj org eclipse jdt internal compiler ast method declaration traverse method declaration java 212 org aspectj org eclipse jdt internal compiler ast type declaration traverse type declaration java 1195 org aspectj org eclipse jdt internal compiler ast compilation unit declaration traverse compilation unit declaration java 339 org aspectj ajdt internal core builder asm hierarchy builder internal build asm hierarchy builder java 145 org aspectj ajdt internal core builder asm hierarchy builder build structure compilation unit asm hierarchy builder java 87 org aspectj ajdt internal compiler lookup eclipse factory finished compilation unit eclipse factory java 941 org aspectj ajdt internal compiler aj compiler adapter after processing aj compiler adapter java 210 org aspectj ajdt internal compiler compiler adapter ajc after org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 91 org aspectj org eclipse jdt internal compiler compiler process compiler java 533 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 887 org aspectj ajdt internal core builder aj build manager do build aj build manager java 244 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception thrown null npr compiling spring
ltw weaver produces debug message begining
took me while discover how recreate problem class public class public static void main string argv byte bytes new byte causes bytecode iconst anewarray 18 class causes newarray joinpoint code go bang eg before call new java lang null pointer exception org aspectj weaver bcel bcel world from bcel bcel world java 236 org aspectj weaver bcel bcel world make join point signature array construction bcel world java 483 org aspectj weaver bcel bcel shadow make array constructor call bcel shadow java 801 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2510 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2325 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 490 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 115 org aspectj weaver bcel bcel weaver weave bcel weaver java 1574 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1525 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1305 org aspectj weaver bcel bcel weaver weave bcel weaver java 1127 new array construction join point can fail freaky array constructors
number cases tools getting confused over generated aj members aj synthetic marked synthetic attribute because past has upset other tools most recent example jaxb posting list having perthis clause aspect matched type jaxb annotations user longer able use jaxb serious issue prevent usage jaxb any type which we introduce properties aj synthetic members jaxb solution ignore fields annotate them xml transient since field does exist user program can even do add option generate aj synthetics true synthetic flag
boolean methods after advice return incorrect result jrockit under wls
get class format error trying perform runtime weaving db2 class class being woven com ibm db2 jdbc app db2prepared statement full message exception java lang class format error repetitive method name signature class file com ibm db2 jdbc app db2prepared statement examining post weave class file looks aspectj defining duplicate method within class called get parameter meta data here messages from weaver 04 21 13 640 info stdout info weaving com ibm db2 jdbc app db2callable statement 04 21 13 640 info stdout info weaver operating reweavable mode need verify any required types exist 04 21 13 671 info stdout info weaving com ibm db2 jdbc app db2prepared statement 04 21 13 671 info stdout info weaver operating reweavable mode need verify any required types exist 04 21 13 703 info stdout weaveinfo join point method execution java sql result set com ibm db2 jdbc app db2prepared statement execute query type com ibm db2 jdbc app db2prepared statement db2prepared statement java 1679 advised before advice from com ibm tivoli itcam toolkit ai aspectj capture jdbc capture sqlstatement capture sqlstatement aj 747 runtime test 04 21 13 703 info stdout weaveinfo join point method execution java sql result set com ibm db2 jdbc app db2prepared statement execute query type com ibm db2 jdbc app db2prepared statement db2prepared statement java 1679 advised after returning advice from com ibm tivoli itcam toolkit ai aspectj capture jdbc capture sqlstatement capture sqlstatement aj 946 runtime test 04 21 13 718 info stdout weaveinfo join point method execution java sql result set com ibm db2 jdbc app db2prepared statement execute query type com ibm db2 jdbc app db2prepared statement db2prepared statement java 1679 advised after throwing advice from com ibm tivoli itcam toolkit ai aspectj capture jdbc capture sqlstatement capture sqlstatement aj 971 runtime test 04 21 13 718 info stdout weaveinfo join point method execution boolean com ibm db2 jdbc app db2prepared statement execute type com ibm db2 jdbc app db2prepared statement db2prepared statement java 3971 advised before advice from com ibm tivoli itcam toolkit ai aspectj capture jdbc capture sqlstatement capture sqlstatement aj 833 runtime test 04 21 13 718 info stdout weaveinfo join point method execution boolean com ibm db2 jdbc app db2prepared statement execute type com ibm db2 jdbc app db2prepared statement db2prepared statement java 3971 advised after returning advice from com ibm tivoli itcam toolkit ai aspectj capture jdbc capture sqlstatement capture sqlstatement aj 946 runtime test java lang class format error repetitive method name signature
program below should compile happily fails error type does meet type parameter extends my base generic type base abstract aspect middle extends my base extends base test program interface my base interface my marker extends my base abstract aspect base extends my base abstract aspect middle extends my base extends base aspect sub extends middle my marker generic abstract aspect hierarchies deep higher can fail when type parameters have bounds
iajc ant task should produce summary what doing like javac task does javac compiling 189 source files project classes iajc should print summary like javac
remove hard coded dependency get file name methods
here stack trace am getting when try use aspect final release load time weaving jrock 08 using xmanagement class org aspectj weaver loadtime jrockit agent load weblogic server sp2 debugged code eclipse discovered weaver being initialized while loading imessage kind so jrock vm simply hasn run yet making imessage info null able fix stack trace hoisting check loading aspect code up before initializing weaving adaptor changing line 55 aj java loader null class name null class name starts org aspectj commented out line 251 weaving adaptor avoid duplicate check private boolean should weave name string name return name starts org apache bcel fixme av why bcel wrapped org aspectj name starts org aspectj now checked earlier avoid circularity issues name starts java name starts javax name starts proxy jdk proxies fixme av proxy fe ataspect proxy0 java5 proxy name starts sun reflect jdk reflect note bug does occur when using jrock vm even xmanagement command line argument stack trace java lang illegal argument exception null kind org aspectj bridge message init ljava lang string ljava lang string lorg aspectj bridge imessage kind lorg aspectj bridge isource location ljava lang throwable lorg aspectj bridge isource location ziii message java 89 org aspectj bridge message init ljava lang string ljava lang string lorg aspectj bridge imessage kind lorg aspectj bridge isource location ljava lang throwable lorg aspectj bridge isource location message java 67 org aspectj bridge message init ljava lang string lorg aspectj bridge imessage kind ljava lang throwable lorg aspectj bridge isource location message java 110 org aspectj bridge message util info ljava lang string lorg aspectj bridge imessage message util java 211 org aspectj bridge message util info lorg aspectj bridge imessage handler ljava lang string message util java 98 org aspectj weaver tools weaving adaptor info ljava lang string weaving adaptor java 343 org aspectj weaver tools weaving adaptor create message handler weaving adaptor java 168 org aspectj weaver tools weaving adaptor init weaving adaptor java 80 org aspectj weaver loadtime class loader weaving adaptor init ljava lang class loader lorg aspectj weaver loadtime iweaving context class loader weaving adaptor java 70 org aspectj weaver loadtime aj weaver container get weaver ljava lang class loader lorg aspectj weaver loadtime iweaving context lorg aspectj weaver tools weaving adaptor aj java 94 org aspectj weaver loadtime aj pre process ljava lang string bljava lang class loader aj java 61 org aspectj weaver loadtime jrockit agent pre process ljava lang class loader ljava lang string jrockit agent java 74 jrockit vm class pre processor manager notify class pre processor iljava lang string unknown source jrockit vm classes define class0 iljava lang string bii unknown source jrockit vm classes define class ljava lang class loader ljava lang string bii ljava lang class unknown source java lang class loader define class ljava lang string biiljava security protection domain ljava lang class unknown source java security secure class loader define class ljava lang string biiljava security code source ljava lang class secure class loader java 123 java net urlclass loader define class ljava lang string lsun misc resource ljava lang class urlclass loader java 251 java net urlclass loader access 100 ljava net urlclass loader ljava lang string lsun misc resource ljava lang class urlclass loader java 55 java net urlclass loader run ljava lang object urlclass loader java 194 jrockit vm access controller do privileged exc ljava security privileged exception action ljava security access control context ljava lang object unknown source jrockit vm access controller do privileged ljava security privileged exception action ljava security access control context ljava lang object unknown source java net urlclass loader find class ljava lang string ljava lang class urlclass loader java 187 java lang class loader load class ljava lang string ljava lang class unknown source sun misc launcher app class loader load class ljava lang string ljava lang class launcher java 274 java lang class loader load class ljava lang string ljava lang class unknown source java lang class loader load class from native ii ljava lang class unknown source jrockit vm rni get runnable code unknown source jrockit vm rni trampoline unknown source org aspectj bridge message util info ljava lang string lorg aspectj bridge imessage message util java org aspectj bridge message util info lorg aspectj bridge imessage handler ljava lang string message util java 98 org aspectj weaver tools weaving adaptor info ljava lang string weaving adaptor java 343 java lang illegal argument exception null kind org aspectj bridge message init ljava lang string ljava lang string lorg aspectj bridge imessage kind lorg aspectj bridge isource location ljava lang throwable lorg aspectj bridge isource location ziii message java 89 org aspectj bridge message init ljava lang string ljava lang string lorg aspectj bridge imessage kind lorg aspectj bridge isource location ljava lang throwable lorg aspectj bridge isource location message java 67 org aspectj bridge message init ljava lang string lorg aspectj bridge imessage kind ljava lang throwable lorg aspectj bridge isource location message java 110 org aspectj bridge message util info ljava lang string lorg aspectj bridge imessage message util java 211 org aspectj bridge message util info lorg aspectj bridge imessage handler ljava lang string message util java 98 org aspectj weaver tools weaving adaptor info ljava lang string weaving adaptor java 343 org aspectj weaver tools weaving adaptor create message handler weaving adaptor java 168 org aspectj weaver tools weaving adaptor init weaving adaptor java 80 org aspectj weaver loadtime class loader weaving adaptor init ljava lang class loader lorg aspectj weaver loadtime iweaving context class loader weaving adaptor java 70 org aspectj weaver loadtime aj weaver container get weaver ljava lang class loader lorg aspectj weaver loadtime iweaving context lorg aspectj weaver tools weaving adaptor aj java 94 org aspectj weaver loadtime aj pre process ljava lang string bljava lang class loader aj java 61 org aspectj weaver loadtime jrockit agent pre process ljava lang class loader ljava lang string jrockit agent java 74 jrockit vm class pre processor manager notify class pre processor iljava lang string unknown source jrockit vm classes define class0 iljava lang string bii unknown source jrockit vm classes define class ljava lang class loader ljava lang string bii ljava lang class unknown source java lang class loader define class ljava lang string biiljava security protection domain ljava lang class unknown source java security secure class loader define class ljava lang string biiljava security code source ljava lang class secure class loader java 123 java net urlclass loader define class ljava lang string lsun misc resource ljava lang class urlclass loader java 251 java net urlclass loader access 100 ljava net urlclass loader ljava lang string lsun misc resource ljava lang class urlclass loader java 55 java net urlclass loader run ljava lang object urlclass loader java 194 jrockit vm access controller do privileged exc ljava security privileged exception action ljava security access control context ljava lang object unknown source jrockit vm access controller do privileged ljava security privileged exception action ljava security access control context ljava lang object unknown source java net urlclass loader find class ljava lang string ljava lang class urlclass loader java 187 java lang class loader load class ljava lang string ljava lang class unknown source sun misc launcher app class loader load class ljava lang string ljava lang class launcher java 274 java lang class loader load class ljava lang string ljava lang class unknown source java lang class loader load class from native ii ljava lang class unknown source jrockit vm rni get runnable code unknown source jrockit vm rni trampoline unknown source org aspectj bridge message util info lorg aspectj bridge imessage handler ljava lang string message util java org aspectj weaver tools weaving adaptor info ljava lang string weaving adaptor java 343 org aspectj weaver tools weaving adaptor create message handler weaving adaptor java 168 fix bug circularity failure verbose loading jrockit 08 agent
failure test compare subclass delegates j9 sr1
simon ran same problem setting values attach patch fix test cases properly verify works both cases java lang null pointer exception org aspectj runtime reflect signature impl cache impl set signature impl java 224 org aspectj runtime reflect signature impl string signature impl java 57 org aspectj runtime reflect signature impl string signature impl java 62 npe when weak reference set signature
duplicate exception aop xml file aspectpath
optimization disables weaving class loader where aspects defined actually useful you have aspect exclusions exclude all aspects defined parent class loader also helpful trivial rare case where aop xml definition aspect definitions ltw optimization disable world has aspects
exception below produced when parsing pointcut uses array type args using reflection world pointcut parser support org aspectj weaver bcexception do call name signature something looks like signature descriptor ljava lang string org aspectj weaver unresolved type name signature unresolved type java 741 org aspectj weaver unresolved type name unresolved type java 311 org aspectj weaver reflect based reference type delegate get declared pointcuts based reference type delegate java 260 org aspectj weaver reference type get declared pointcuts reference type java 526 org aspectj weaver resolved type get resolved type java 468 org aspectj weaver iterators has next iterators java 118 org aspectj weaver iterators has next iterators java 128 org aspectj weaver resolved type find pointcut resolved type java 479 org aspectj weaver patterns reference pointcut resolve bindings reference pointcut java 151 org aspectj weaver patterns pointcut resolve pointcut java 194 org aspectj weaver tools pointcut parser resolve pointcut expression pointcut parser java 330 org aspectj weaver tools pointcut parser parse pointcut expression pointcut parser java 308 org aspectj weaver tools expression test test array type args expression test java 304 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 java lang reflect method invoke method java 585 junit framework test case run test test case java 154 junit framework test case run bare test case java 127 junit framework test result protect test result java 106 junit framework test result run protected test result java 124 junit framework test result run test result java 109 junit framework test case run test case java 118 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 478 org eclipse jdt internal junit runner remote test runner run remote test runner java 344 org eclipse jdt internal junit runner remote test runner main remote test runner java 196 org aspectj weaver bcexception do call name signature something looks like signature descriptor ljava lang string
create constructor ipe same method ipes
see pr125480 copying test good basis test bug we don check when defining concrete aspect abstract methods aspect we concretizing ltw fail runtime abstract methods implemented hierarchy finishes xml aspect
junit framework assertion failed error test double annotation matching binding failed test double annotation matching binding failed unexpected warning messages warning before operation private tmp ajc sandbox ajc test18924 tmp double annotation matching aj 20 advice defined double annotation matching has been applied xlint advice did match unexpected fail messages abort trouble class foo extends java lang object void init aload lfoo line 26 java lang object init constructor execution void foo init return constructor execution void foo init end void init public void foo org aspectj weaver method declaration line number 28 533 method execution void foo foo return line 28 method execution void foo foo end public void foo public void bar org aspectj weaver method declaration line number 30 563 method execution void foo bar return line 30 method execution void foo bar end public void bar end class foo bcexception impossible annotation tx shadow method execution void foo foo private tmp ajc sandbox ajc test18924 tmp double annotation matching aj 28 533 pointcut private tmp ajc sandbox ajc test18924 tmp double annotation matching aj 15 316 when implementing shadow method execution void foo foo when weaving type foo when weaving classes when weaving when batch building build config null files impossible annotation tx shadow method execution void foo foo private tmp ajc sandbox ajc test18924 tmp double annotation matching aj 28 533 pointcut private tmp ajc sandbox ajc test18924 tmp double annotation matching aj 15 316 when implementing shadow method execution void foo foo when weaving type foo when weaving classes when weaving when batch building build config null files org aspectj weaver bcexception impossible annotation tx shadow method execution void foo foo private tmp ajc sandbox ajc test18924 tmp double annotation matching aj 28 533 pointcut private tmp ajc sandbox ajc test18924 tmp double annotation matching aj 15 316 when implementing shadow method execution void foo foo when weaving type foo when weaving classes when weaving when batch building build config null files org aspectj weaver patterns annotation pointcut find residue internal annotation pointcut java 201 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver patterns pointcut find residue internal pointcut java 93 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver patterns pointcut find residue internal pointcut java 93 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver patterns pointcut find residue internal pointcut java 173 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver patterns pointcut find residue internal pointcut java 93 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver patterns pointcut find residue internal pointcut java 93 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver patterns pointcut find residue internal pointcut java 96 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver bcel bcel advice specialize bcel advice java 132 org aspectj weaver bcel bcel shadow prepare mungers bcel shadow java 325 org aspectj weaver shadow implement shadow java 455 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 2236 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 491 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 109 org aspectj weaver bcel bcel weaver weave bcel weaver java 1560 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1511 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1291 org aspectj weaver bcel bcel weaver weave bcel weaver java 1113 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 311 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 183 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 862 org aspectj ajdt internal core builder aj build manager do build aj build manager java 242 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 161 org aspectj ajdt ajc ajdt command do command ajdt command java 114 org aspectj ajdt ajc ajdt command run command ajdt command java 60 org aspectj tools ajc main run main java 367 org aspectj tools ajc main run main main java 246 org aspectj tools ajc ajc compile ajc java 199 org aspectj tools ajc ajc compile ajc java 163 org aspectj tools ajc ajc test case ajc ajc test case java 510 org aspectj testing compile spec execute compile spec java 53 org aspectj testing ajc test run test ajc test java 68 org aspectj testing xmlbased ajc test case run test xmlbased ajc test case java 111 org aspectj systemtest ajc152 ajc152tests test double annotation matching pr138221 ajc152tests java 37 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 java lang reflect method invoke method java 585 junit framework test case run test test case java 154 junit framework test case run bare test case java 127 junit framework test result protect test result java 106 junit framework test result run protected test result java 124 junit framework test result run test result java 109 junit framework test case run test case java 118 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 478 org eclipse jdt internal junit runner remote test runner run remote test runner java 344 org eclipse jdt internal junit runner remote test runner main remote test runner java 196 command ajc classpath users adrian projects aspectjdev lib test aspectjrt jar testing client bin runtime bin aspectj5rt bin lib junit junit jar bridge bin loadtime bin weaver bin weaver5 bin aj build jars bridge jar aj build jars util jar aj uild jars loadtime jar aj build jars weaver jar aj build jars weaver5 jar aj build jars asm jar lib test testing client jar lib test aspectjrt jar tmp ajc sandbox ajc test18924 tmp tmp ajc sandbox ajc test18924 tmp double annotation matching aj tmp ajc sandbox ajc test18924 tmp junit framework assert fail assert java 47 org aspectj tools ajc ajc test case assert messages ajc test case java 452 org aspectj testing compile spec execute compile spec java 56 org aspectj testing ajc test run test ajc test java 68 org aspectj testing xmlbased ajc test case run test xmlbased ajc test case java 111 org aspectj systemtest ajc152 ajc152tests test double annotation matching pr138221 ajc152tests java 37 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 java lang reflect method invoke method java 585 junit framework test case run test test case java 154 junit framework test case run bare test case java 127 junit framework test result protect test result java 106 junit framework test result run protected test result java 124 junit framework test result run test result java 109 junit framework test case run test case java 118 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 478 org eclipse jdt internal junit runner remote test runner run remote test runner java 344 org eclipse jdt internal junit runner remote test runner main remote test runner java 196 compiler crash two binding xxx pcds one compound expression
don know much about internal workings aspect bug keeps popping up so went through trouble checking trying debug so could hopefully provide enough information get fixed happens while using eclipse ajdt never happens fully do clean before rebuild only seems happen when doing incrmental builds using project build setting error happens iterator recursively builds list methods return matching error triggered here we need know interface from parent kind munger those used aj itd we precisely want skip those boolean should skip false int rtx inter type mungers size concrete type munger munger concrete type munger rtx inter type mungers get munger get munger get kind resolved type munger parent should skip true break munger get munger returns null because munger instance bcel per clause aspect adder my naive fix would check munger get munger null check munger get kind assuming bcel per claus aspect adder one should skipped since related aj again don know very much about internal architecture weaver magic so hope enough information would appreciate someone who knows more internals could speculate why bug would never pop up clean build only incremental builds also all incremental builds haven been able isolate what kind changes compiles triggers although seems once got exception once keep getting every build until do clean java lang null pointer exception org aspectj weaver resolved type add recurse resolved type java 288 org aspectj weaver resolved type get methods without iterator resolved type java 257 org aspectj weaver resolved type lookup resolved member resolved type java 378 org aspectj weaver join point signature iterator find signatures from supertypes join point signature iterator java 178 org aspectj weaver join point signature iterator has next join point signature iterator java 69 org aspectj weaver patterns signature pattern matches signature pattern java 287 org aspectj weaver patterns kinded pointcut match internal kinded pointcut java 103 org aspectj weaver patterns pointcut match pointcut java 144 org aspectj weaver patterns pointcut match internal pointcut java 51 org aspectj weaver patterns pointcut match pointcut java 144 org aspectj weaver shadow munger match shadow munger java 64 org aspectj weaver advice match advice java 109 org aspectj weaver bcel bcel advice match bcel advice java 104 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2210 org aspectj weaver bcel bcel class weaver match bcel class weaver java 1752 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 479 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 109 org aspectj weaver bcel bcel weaver weave bcel weaver java 1574 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1525 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1305 org aspectj weaver bcel bcel weaver weave bcel weaver java 1127 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 321 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 192 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 862 org aspectj ajdt internal core builder aj build manager do build aj build manager java 269 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 168 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception when trying skip parent mungers
take two aspects litte class source1 package test1 import test test public aspect pointcut provider public pointcut test execution test source2 package test import test1 pointcut provider public aspect pointcut consumer percflow flow compiler issues following line can find pointcut test test pointcut consumer pointcut mytest pointcut provider test also does work same error message pointcut mytest test1 pointcut provider test pointcut flow mytest source3 package test public class test public void foo changing consumer aspect singleton model works poincut references percflow model aspects can resolved
from mailing list am executing command below command ajc inpath woven hello1 jar aspectpath aspect2 jar outjar woven hello2 jar am getting same old error woven hello1 jar error aspect aspect1 woven hello must declared aop xml file source information available have placed both aspect1 class aspect2 class classpath system variable we shouldn putting out messages about aop xml when we doing ltw message points user solution work case compiler issues message concerning aop xml even when doing ltw
get verify error incompatible object argument function call error when using ltw aspect stype aspects enough ltw works expected equivalent aj style aspect compile time weaving works both aspect styles tested linux aspect development sun 06 ibm 0sr1 jvms attach example project shortly verify error ltw aj style aspects
when guard lazy tjp compiler option set warning error piece advice causes warning show up you get one warning every join point matched advice think just one would probably enough lots warnings guard lazy tjp
org aspectj weaver bcexception org aspectj weaver bcel bcel shadow initialize kinded annotation vars bcel shadow java 1553 org aspectj weaver bcel bcel shadow get kinded annotation var bcel shadow java 995 org aspectj weaver patterns annotation pointcut find residue internal annotation pointcut java 196 org aspectj weaver patterns pointcut find residue pointcut java 268 org aspectj weaver patterns pointcut find residue internal pointcut java 97 org aspectj weaver patterns pointcut find residue pointcut java 268 org aspectj weaver patterns pointcut find residue internal pointcut java 97 org aspectj weaver patterns pointcut find residue pointcut java 268 org aspectj weaver patterns pointcut find residue internal pointcut java 97 org aspectj weaver patterns pointcut find residue pointcut java 268 org aspectj weaver bcel bcel advice specialize bcel advice java 132 org aspectj weaver bcel bcel shadow prepare mungers bcel shadow java 313 org aspectj weaver shadow implement shadow java 404 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 2146 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 467 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 102 org aspectj weaver bcel bcel weaver weave bcel weaver java 1543 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1494 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1275 org aspectj weaver bcel bcel weaver weave bcel weaver java 1097 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 300 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 811 org aspectj ajdt internal core builder aj build manager do build aj build manager java 230 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 156 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public class com ytg bilette client core providers domain content provider extends java lang object implements com ytg bilette client core providers irefreshable structured content provider private java util hash set listeners signature ljava util hash set lcom ytg bilette client core providers idomain object change listener tt private com ytg bilette client core providers domain content provider state state signature lcom ytg bilette client core providers domain content provider state private class clazz signature ljava lang class lcom ytg bilette model generic domain object private boolean deletable private java util list summaries signature ljava util list tt static class class public void init class org aspectj weaver method declaration line number 47 1136 aload com ytg bilette client core providers domain content provider line 47 304 nvokespec 304 al java lang object init constructor execution void com ytg bilette client core providers domain content provider init java lang class aload com ytg bilette client core providers domain content provider line 34 new java util hash set dup 304 nvokespec 304 al java util hash set init putf 304 eld com ytg bilette client core providers domain content provider listeners ljava util hash set aload com ytg bilette client core providers domain content provider line 36 getstat 304 com ytg bilette client core providers domain content provider state initialized lcom ytg bilette client core providers domain content provider state putf 304 eld com ytg bilette client core providers domain content provider state lcom ytg bilette client core providers domain content provider state aload com ytg bilette client core providers domain content provider line 40 304 const putf 304 eld com ytg bilette client core providers domain content provider deletable aload com ytg bilette client core providers domain content provider line 48 aload java lang class clazz putf 304 eld com ytg bilette client core providers domain content provider clazz ljava lang class aload java lang class clazz line 50 304 nvokev 304 rtual java lang class get interfaces ljava lang class astore 304 const line 51 304 store goto l2 l0 aload java lang class interfaces line 52 304 load int aaload ldc com ytg bilette model deletable 304 nvokev 304 rtual java lang object equals ljava lang object 304 feq l1 aload com ytg bilette client core providers domain content provider line 53 304 const putf 304 eld com ytg bilette client core providers domain content provider deletable goto l3 line 54 l1 304 304 nc int line 51 l2 304 load int aload java lang class interfaces arraylength 304 304 cmplt l0 l3 return line 57 constructor execution void com ytg bilette client core providers domain content provider init java lang class end public void init class public object get elements object org aspectj weaver method declaration line number 65 1611 aload com ytg bilette client core providers domain content provider line 66 aload java lang object input 304 nvokespec 304 al com ytg bilette client core providers domain content provider check input ljava lang object 304 store aload com ytg bilette client core providers domain content provider line 68 304 load boolean include deleted 304 nvokev 304 rtual com ytg bilette client core providers domain content provider get summaries ljava util list 304 nvoke 304 nterface java util list array ljava lang object areturn end public object get elements object private void check initialized boolean org aspectj weaver method declaration line number 71 1759 getstat 304 com ytg bilette client core providers domain content provider state initialized lcom ytg bilette client core providers domain content provider state line 72 aload com ytg bilette client core providers domain content provider getf 304 eld com ytg bilette client core providers domain content provider state lcom ytg bilette client core providers domain content provider state 304 nvokev 304 rtual com ytg bilette client core providers domain content provider state equals ljava lang object 304 fne l0 getstat 304 com ytg bilette client core providers domain content provider state light initialized lcom ytg bilette client core providers domain content provider state line 73 aload com ytg bilette client core providers domain content provider getf 304 eld com ytg bilette client core providers domain content provider state lcom ytg bilette client core providers domain content provider state 304 nvokev 304 rtual com ytg bilette client core providers domain content provider state equals ljava lang object 304 feq l1 304 load boolean include deleted 304 feq l1 l0 aload com ytg bilette client core providers domain content provider line 74 aconst null aconst null 304 load boolean include deleted 304 nvokespec 304 al com ytg bilette client core providers domain content provider get data lcom ytg bilette dao summary dao lorg eclipse core runtime iprogress monitor l1 return line 75 end private void check initialized boolean private boolean check input object org aspectj weaver method declaration line number 83 2060 aload java lang object input line 84 304 nstanceof java lang boolean ldc input generic content provider must boolean value line 85 304 nvokestat 304 org eclipse jface util assert true zljava lang string line 84 pop aload java lang object input line 86 checkcast java lang boolean 304 nvokev 304 rtual java lang boolean boolean value 304 store aload com ytg bilette client core providers domain content provider line 87 getf 304 eld com ytg bilette client core providers domain content provider deletable 304 fne l1 aload com ytg bilette client core providers domain content provider line 88 getf 304 eld com ytg bilette client core providers domain content provider deletable 304 fne l0 304 load boolean include deleted 304 feq l1 l0 304 const goto l2 l1 304 const l2 ldc nondeletable object yet deleted flag line 89 304 nvokestat 304 org eclipse jface util assert legal zljava lang string line 87 pop 304 load boolean include deleted line 91 304 return end private boolean check input object public void dispose org aspectj weaver method declaration line number 99 2522 return line 101 end public void dispose public void input changed org eclipse jface viewers viewer object object org aspectj weaver method declaration line number 109 2747 return line 111 end public void input changed org eclipse jface viewers viewer object object private void get data com ytg bilette dao summary dao org eclipse core runtime iprogress monitor boolean org aspectj weaver method declaration line number 115 2954 aload astore aload astore 304 load 304 store method execution void com ytg bilette client core providers domain content provider get data com ytg bilette dao summary dao org eclipse core runtime iprogress monitor boolean aload com ytg bilette client core providers domain content provider line 117 aload com ytg bilette dao summary dao dao aload com ytg bilette client core providers domain content provider getf 304 eld com ytg bilette client core providers domain content provider clazz ljava lang class 304 load boolean include deleted 304 nvoke 304 nterface com ytg bilette dao summary dao get summaries ljava lang class ljava util list putf 304 eld com ytg bilette client core providers domain content provider summaries ljava util list 304 load boolean include deleted line 118 304 feq l0 aload com ytg bilette client core providers domain content provider line 119 getstat 304 com ytg bilette client core providers domain content provider state full initialized lcom ytg bilette client core providers domain content provider state putf 304 eld com ytg bilette client core providers domain content provider state lcom ytg bilette client core providers domain content provider state goto l1 l0 aload com ytg bilette client core providers domain content provider line 121 getstat 304 com ytg bilette client core providers domain content provider state light initialized lcom ytg bilette client core providers domain content provider state putf 304 eld com ytg bilette client core providers domain content provider state lcom ytg bilette client core providers domain content provider state l1 return line 122 method execution void com ytg bilette client core providers domain content provider get data com ytg bilette dao summary dao org eclipse core runtime iprogress monitor boolean end private void get data com ytg bilette dao summary dao org eclipse core runtime iprogress monitor boolean public java util list get summaries boolean org aspectj weaver method declaration line number 128 3308 aload com ytg bilette client core providers domain content provider line 129 304 load boolean include deleted 304 nvokespec 304 al com ytg bilette client core providers domain content provider check initialized 304 load boolean include deleted line 131 304 fne l0 getstat 304 com ytg bilette client core providers domain content provider state light initialized lcom ytg bilette client core providers domain content provider state aload com ytg bilette client core providers domain content provider getf 304 eld com ytg bilette client core providers domain content provider state lcom ytg bilette client core providers domain content provider state 304 nvokev 304 rtual com ytg bilette client core providers domain content provider state equals ljava lang object 304 feq l1 l0 aload com ytg bilette client core providers domain content provider line 132 getf 304 eld com ytg bilette client core providers domain content provider summaries ljava util list areturn l1 aload com ytg bilette client core providers domain content provider line 134 getf 304 eld com ytg bilette client core providers domain content provider summaries ljava util list 304 nvoke 304 nterface java util list iterator ljava util iterator astore new java util array list line 135 dup 304 nvokespec 304 al java util array list init astore goto l3 line 136 l2 aload java util iterator line 137 304 nvoke 304 nterface java util iterator next ljava lang object checkcast com ytg bilette model deletable checkcast com ytg bilette model deletable astore aload com ytg bilette model deletable object line 138 304 nvoke 304 nterface com ytg bilette model deletable deleted 304 fne l3 aload java util array list list line 139 aload com ytg bilette model deletable object checkcast com ytg bilette model generic domain object 304 nvokev 304 rtual java util array list add ljava lang object pop l3 aload java util iterator line 136 304 nvoke 304 nterface java util iterator has next 304 fne l2 aload java util array list list line 142 areturn end public java util list get summaries boolean public synchronized void refresh org aspectj weaver method declaration line number 148 3783 aload com ytg bilette client core providers domain content provider line 149 getstat 304 com ytg bilette client core providers domain content provider state initialized lcom ytg bilette client core providers domain content provider state putf 304 eld com ytg bilette client core providers domain content provider state lcom ytg bilette client core providers domain content provider state 304 const line 150 304 store aload com ytg bilette client core providers domain content provider line 152 getf 304 eld com ytg bilette client core providers domain content provider deletable 304 feq l2 aload com ytg bilette client core providers domain content provider line 153 getf 304 eld com ytg bilette client core providers domain content provider listeners ljava util hash set 304 nvokev 304 rtual java util hash set iterator ljava util iterator astore goto l1 line 154 l0 aload java util iterator line 155 304 nvoke 304 nterface java util iterator next ljava lang object checkcast com ytg bilette client core providers idomain object change listener astore aload com ytg bilette client core providers idomain object change listener listener line 156 304 nvoke 304 nterface com ytg bilette client core providers idomain object change listener include deleted 304 feq l1 304 const line 157 304 store boolean include deleted goto l2 line 158 l1 aload java util iterator line 154 304 nvoke 304 nterface java util iterator has next 304 fne l0 l2 aload com ytg bilette client core providers domain content provider line 163 aconst null aconst null 304 load boolean include deleted 304 nvokespec 304 al com ytg bilette client core providers domain content provider get data lcom ytg bilette dao summary dao lorg eclipse core runtime iprogress monitor aload com ytg bilette client core providers domain content provider line 165 aconst null aconst null 304 nvokespec 304 al com ytg bilette client core providers domain content provider notify all listeners lcom ytg bilette model generic domain object lcom ytg bilette model generic domain object return line 166 end public synchronized void refresh private synchronized void notify all listeners com ytg bilette model generic domain object com ytg bilette model generic domain object org aspectj weaver method declaration line number 174 4356 aload com ytg bilette client core providers domain content provider line 175 getf 304 eld com ytg bilette client core providers domain content provider listeners ljava util hash set 304 nvokev 304 rtual java util hash set iterator ljava util iterator astore goto l2 line 176 l0 aload java util iterator line 177 304 nvoke 304 nterface java util iterator next ljava lang object checkcast com ytg bilette client core providers idomain object change listener astore aload com ytg bilette model generic domain object old obj line 178 304 fnonnull l1 aload com ytg bilette model generic domain object new obj 304 fnonnull l1 aload com ytg bilette client core providers idomain object change listener listener line 179 304 nvoke 304 nterface com ytg bilette client core providers idomain object change listener full refresh goto l2 l1 aload com ytg bilette client core providers idomain object change listener listener line 181 aload com ytg bilette model generic domain object old obj aload com ytg bilette model generic domain object new obj 304 nvoke 304 nterface com ytg bilette client core providers idomain object change listener concession changed lcom ytg bilette model generic domain object lcom ytg bilette model generic domain object l2 aload java util iterator line 176 304 nvoke 304 nterface java util iterator has next 304 fne l0 return line 183 end private synchronized void notify all listeners com ytg bilette model generic domain object com ytg bilette model generic domain object public synchronized void add listener com ytg bilette client core providers idomain object change listener org aspectj weaver method declaration line number 185 4715 aload com ytg bilette client core providers domain content provider line 186 getf 304 eld com ytg bilette client core providers domain content provider listeners ljava util hash set aload com ytg bilette client core providers idomain object change listener listener 304 nvokev 304 rtual java util hash set add ljava lang object pop return line 187 end public synchronized void add listener com ytg bilette client core providers idomain object change listener public synchronized void remove listener com ytg bilette client core providers idomain object change listener org aspectj weaver method declaration line number 189 4831 aload com ytg bilette client core providers domain content provider line 190 getf 304 eld com ytg bilette client core providers domain content provider listeners ljava util hash set aload com ytg bilette client core providers idomain object change listener listener 304 nvokev 304 rtual java util hash set remove ljava lang object pop return line 191 end public synchronized void remove listener com ytg bilette client core providers idomain object change listener end public class com ytg bilette client core providers domain content provider when implementing shadow method execution void com ytg bilette client core providers domain content provider get data com ytg bilette dao summary dao org eclipse core runtime iprogress monitor boolean when weaving type com ytg bilette client core providers domain content provider when weaving classes when weaving when batch building build config java bilette metadata plugins org eclipse ajdt core com ytg bilette client core generated lst files 22 bcexception
java lang class format error invalid method code length 83071 class file org eclipse jdt internal compiler impl constant
given type private static class named pointcut resolution pointcut execution public void pointcut org aspectj weaver tools expression test public void pointcut public void reflection based delegate unable resolve pointcut failing either npe stack overflow depending order pointcut definitions type problem occurs because resolving we get all pointcuts type which gets tries resolve them npe stack overflow when resolving reference pointcut reflection world
got exception while working static inner aspect full rebuild avoided problem java lang class cast exception org aspectj weaver missing resolved type known signature org aspectj ajdt internal core builder aj state record class file aj state java 774 org aspectj ajdt internal core builder aj state note result aj state java 627 org aspectj ajdt internal core builder aj build manager accept result aj build manager java 867 org aspectj ajdt internal compiler aj compiler adapter after processing aj compiler adapter java 206 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 90 org aspectj org eclipse jdt internal compiler compiler process compiler java 528 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 845 org aspectj ajdt internal core builder aj build manager do build aj build manager java 266 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 168 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 class cast exception aj state record class file
java dependency aspectjrt jar bug fix
invalid code before throwable throwable normal exception normal exception handler args throwable withincode normal exception generates exception ajdt post 1a aspect org aspectj weaver bcexception org aspectj weaver bcel bcel renderer visit bcel renderer java 237 org aspectj weaver ast literal accept literal java 29 org aspectj weaver bcel bcel renderer recur bcel renderer java 153 org aspectj weaver bcel bcel renderer render test bcel renderer java 119 org aspectj weaver bcel bcel advice get test instructions bcel advice java 537 org aspectj weaver bcel bcel advice get advice instructions bcel advice java 376 org aspectj weaver bcel bcel shadow weave before bcel shadow java 1690 org aspectj weaver bcel bcel advice implement bcel advice java 208 org aspectj weaver shadow implement mungers shadow java 639 org aspectj weaver shadow implement shadow java 456 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 2236 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 491 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 109 org aspectj weaver bcel bcel weaver weave bcel weaver java 1560 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1511 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1291 org aspectj weaver bcel bcel weaver weave bcel weaver java 1113 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 311 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 183 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 862 org aspectj ajdt internal core builder aj build manager do build aj build manager java 242 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 161 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public class glassbox client connection manager extends java lang object public static string propname num public static string propname default public static string propname viewed public static string propname nick prefix public static string propname url prefix public static string propname viewed prefix private static string prop filename private static string localhost nickname public static string localhost url private java util list connection list signature ljava util list lglassbox client connection manager agent connection private int default connection index private static final org aspectj lang join point static part ajc tjp static void clinit void glassbox client connection manager clinit ldc glassbox connections num line 13 putstatic glassbox client connection manager propname num ljava lang string ldc glassbox connections default line 14 putstatic glassbox client connection manager propname default ljava lang string ldc glassbox connections viewed line 15 putstatic glassbox client connection manager propname viewed ljava lang string ldc glassbox connections nickname line 16 putstatic glassbox client connection manager propname nick prefix ljava lang string ldc glassbox connections url line 17 putstatic glassbox client connection manager propname url prefix ljava lang string ldc glassbox connections viewed line 18 putstatic glassbox client connection manager propname viewed prefix ljava lang string ldc connection properties line 20 putstatic glassbox client connection manager prop filename ljava lang string ldc localhost line 21 putstatic glassbox client connection manager localhost nickname ljava lang string ldc service jmx rmi localhost 7131 jndi rmi localhost 7132 glassbox line 22 putstatic glassbox client connection manager localhost url ljava lang string return line 11 void glassbox client connection manager clinit end static void clinit public void init org aspectj weaver method declaration line number 23 966 aload lglassbox client connection manager line 23 java lang object init constructor execution void glassbox client connection manager init aload lglassbox client connection manager line 24 glassbox client connection manager init return line 25 constructor execution void glassbox client connection manager init end public void init public void init org aspectj weaver method declaration line number 67 1992 method execution void glassbox client connection manager init catch java lang runtime exception e0 aload lglassbox client connection manager line 69 glassbox client connection manager read from file goto l0 catch java lang runtime exception e0 e0 astore exception handler void glassbox client connection manager catch java lang runtime exception aload exception handler void glassbox client connection manager catch java lang runtime exception astore line 70 aload lglassbox client connection manager line 71 glassbox client connection manager create default list aload lglassbox client connection manager line 72 glassbox client connection manager write file l0 return line 74 method execution void glassbox client connection manager init end public void init public void create default list org aspectj weaver method declaration line number 76 2134 method execution void glassbox client connection manager create default list new glassbox client connection manager agent connection line 77 dup aload lglassbox client connection manager getstatic glassbox client connection manager localhost nickname ljava lang string getstatic glassbox client connection manager localhost url ljava lang string iconst glassbox client connection manager agent connection init lglassbox client connection manager ljava lang string ljava lang string astore aload lglassbox client connection manager line 78 new java util array list dup java util array list init putfield glassbox client connection manager connection list ljava util list aload lglassbox client connection manager line 79 getfield glassbox client connection manager connection list ljava util list aload lglassbox client connection manager agent connection localhost java util list add ljava lang object pop aload lglassbox client connection manager line 80 iconst putfield glassbox client connection manager default connection index return line 81 method execution void glassbox client connection manager create default list end public void create default list public void write file org aspectj weaver method declaration line number 84 2433 method execution void glassbox client connection manager write file new java util properties line 85 dup java util properties init astore aload ljava util properties properties line 86 getstatic glassbox client connection manager propname num ljava lang string aload lglassbox client connection manager getfield glassbox client connection manager connection list ljava util list java util list size invokestatic java lang string value ljava lang string java util properties set property ljava lang string ljava lang string ljava lang object pop aload ljava util properties properties line 87 getstatic glassbox client connection manager propname default ljava lang string aload lglassbox client connection manager getfield glassbox client connection manager connection list ljava util list aload lglassbox client connection manager getfield glassbox client connection manager default connection index java util list get ljava lang object checkcast glassbox client connection manager agent connection glassbox client connection manager agent connection get nickname ljava lang string java util properties set property ljava lang string ljava lang string ljava lang object pop iconst line 88 istore goto l1 l0 aload ljava util properties properties line 89 new java lang string builder dup getstatic glassbox client connection manager propname nick prefix ljava lang string invokestatic java lang string value ljava lang object ljava lang string java lang string builder init ljava lang string iload java lang string builder append ljava lang string builder java lang string builder string ljava lang string aload lglassbox client connection manager getfield glassbox client connection manager connection list ljava util list iload java util list get ljava lang object checkcast glassbox client connection manager agent connection glassbox client connection manager agent connection get nickname ljava lang string java util properties set property ljava lang string ljava lang string ljava lang object pop aload ljava util properties properties line 90 new java lang string builder dup getstatic glassbox client connection manager propname url prefix ljava lang string invokestatic java lang string value ljava lang object ljava lang string java lang string builder init ljava lang string iload java lang string builder append ljava lang string builder java lang string builder string ljava lang string aload lglassbox client connection manager getfield glassbox client connection manager connection list ljava util list iload java util list get ljava lang object checkcast glassbox client connection manager agent connection glassbox client connection manager agent connection get url ljava lang string java util properties set property ljava lang string ljava lang string ljava lang object pop aload ljava util properties properties line 91 new java lang string builder dup getstatic glassbox client connection manager propname viewed prefix ljava lang string invokestatic java lang string value ljava lang object ljava lang string java lang string builder init ljava lang string iload java lang string builder append ljava lang string builder java lang string builder string ljava lang string aload lglassbox client connection manager getfield glassbox client connection manager connection list ljava util list iload java util list get ljava lang object checkcast glassbox client connection manager agent connection glassbox client connection manager agent connection viewed invokestatic java lang string value ljava lang string java util properties set property ljava lang string ljava lang string ljava lang object pop iinc line 88 l1 iload aload lglassbox client connection manager getfield glassbox client connection manager connection list ljava util list java util list size icmplt l0 catch java io ioexception e0 new java io file line 94 dup getstatic glassbox client connection manager prop filename ljava lang string java io file init ljava lang string astore new java io file output stream line 95 dup aload ljava io file iconst java io file output stream init ljava io file astore aload ljava util properties properties line 96 aload ljava io file output stream fos aconst null java util properties store ljava io output stream ljava lang string aload ljava io file output stream fos line 97 java io file output stream close goto l2 catch java io ioexception e0 e0 astore line 98 getstatic java lang system err ljava io print stream line 99 ldc failed write connection properties file java io print stream println ljava lang string getstatic java lang system err ljava io print stream line 100 aload ljava io ioexception java io ioexception string ljava lang string java io print stream println ljava lang string l2 return line 102 method execution void glassbox client connection manager write file end public void write file public void read from file org aspectj weaver method declaration line number 105 3495 method execution void glassbox client connection manager read from file new java util array list line 107 dup java util array list init astore new java util properties line 108 dup java util properties init astore new java io file line 110 dup getstatic glassbox client connection manager prop filename ljava lang string java io file init ljava lang string astore catch java io ioexception e0 aload ljava util properties properties line 112 new java io file input stream dup aload ljava io file java io file input stream init ljava io file java util properties load ljava io input stream goto l0 catch java io ioexception e0 e0 astore line 113 new java lang runtime exception line 116 dup new java lang string builder dup ldc can open java lang string builder init ljava lang string aload ljava io file java io file get absolute path ljava lang string java lang string builder append ljava lang string ljava lang string builder java lang string builder string ljava lang string java lang runtime exception init ljava lang string athrow catch java lang exception e1 l0 aload ljava util properties properties line 119 getstatic glassbox client connection manager propname num ljava lang string java util properties get property ljava lang string ljava lang string invokestatic java lang integer value ljava lang string ljava lang integer java lang integer int value istore aload ljava util properties properties line 120 getstatic glassbox client connection manager propname default ljava lang string java util properties get property ljava lang string ljava lang string astore aload ljava lang string def nickname line 121 ifnonnull l1 new java lang runtime exception dup new java lang string builder dup ldc missing java lang string builder init ljava lang string getstatic glassbox client connection manager propname default ljava lang string java lang string builder append ljava lang string ljava lang string builder java lang string builder string ljava lang string java lang runtime exception init ljava lang string athrow l1 iload num line 122 iconst icmpge l2 new java lang runtime exception dup new java lang string builder dup ldc bad java lang string builder init ljava lang string getstatic glassbox client connection manager propname num ljava lang string java lang string builder append ljava lang string ljava lang string builder ldc java lang string builder append ljava lang string ljava lang string builder iload num java lang string builder append ljava lang string builder java lang string builder string ljava lang string java lang runtime exception init ljava lang string athrow l2 iconst line 123 istore goto l9 l3 aload ljava util properties properties line 124 new java lang string builder dup getstatic glassbox client connection manager propname nick prefix ljava lang string invokestatic java lang string value ljava lang object ljava lang string java lang string builder init ljava lang string iload java lang string builder append ljava lang string builder java lang string builder string ljava lang string java util properties get property ljava lang string ljava lang string astore aload ljava lang string nickname line 125 ifnonnull l4 new java lang runtime exception dup new java lang string builder dup ldc missing java lang string builder init ljava lang string getstatic glassbox client connection manager propname nick prefix ljava lang string java lang string builder append ljava lang string ljava lang string builder iload java lang string builder append ljava lang string builder java lang string builder string ljava lang string java lang runtime exception init ljava lang string athrow l4 aload ljava util properties properties line 126 new java lang string builder dup getstatic glassbox client connection manager propname url prefix ljava lang string invokestatic java lang string value ljava lang object ljava lang string java lang string builder init ljava lang string iload java lang string builder append ljava lang string builder java lang string builder string ljava lang string java util properties get property ljava lang string ljava lang string astore aload ljava lang string url line 127 ifnonnull l5 new java lang runtime exception dup new java lang string builder dup ldc missing java lang string builder init ljava lang string getstatic glassbox client connection manager propname url prefix ljava lang string java lang string builder append ljava lang string ljava lang string builder iload java lang string builder append ljava lang string builder java lang string builder string ljava lang string java lang runtime exception init ljava lang string athrow l5 aload ljava util properties properties line 128 new java lang string builder dup getstatic glassbox client connection manager propname viewed prefix ljava lang string invokestatic java lang string value ljava lang object ljava lang string java lang string builder init ljava lang string iload java lang string builder append ljava lang string builder java lang string builder string ljava lang string java util properties get property ljava lang string ljava lang string astore 10 aload 10 ljava lang string viewed str line 129 ldc true java lang string content equals ljava lang char sequence ifeq l6 iconst goto l7 l6 iconst l7 istore aload ljava lang string url line 130 ifnonnull l8 new java lang runtime exception dup new java lang string builder dup ldc missing java lang string builder init ljava lang string getstatic glassbox client connection manager propname viewed prefix ljava lang string java lang string builder append ljava lang string ljava lang string builder iload java lang string builder append ljava lang string builder java lang string builder string ljava lang string java lang runtime exception init ljava lang string athrow l8 aload ljava util list agcon line 131 new glassbox client connection manager agent connection dup aload lglassbox client connection manager aload ljava lang string nickname aload ljava lang string url iload viewed glassbox client connection manager agent connection init lglassbox client connection manager ljava lang string ljava lang string java util list add ljava lang object pop iinc line 123 l9 iload iload num icmplt l3 aload lglassbox client connection manager line 133 iconst m1 putfield glassbox client connection manager default connection index aload lglassbox client connection manager line 134 aload ljava util list agcon putfield glassbox client connection manager connection list ljava util list aload lglassbox client connection manager line 135 aload ljava lang string def nickname glassbox client connection manager set default ljava lang string aload lglassbox client connection manager line 136 getfield glassbox client connection manager default connection index iconst m1 icmpne l10 aload lglassbox client connection manager line 137 iconst putfield glassbox client connection manager default connection index goto l10 catch java lang exception e1 e1 astore line 140 getstatic java lang system err ljava io print stream line 141 ldc failed read connection properties file java io print stream println ljava lang string aload ljava lang exception e2 line 142 java lang exception print stack trace new java lang runtime exception line 143 dup aload ljava lang exception e2 java lang runtime exception init ljava lang throwable athrow l10 return line 145 method execution void glassbox client connection manager read from file end public void read from file public void delete string org aspectj weaver method declaration line number 147 5452 method execution void glassbox client connection manager delete java lang string aload lglassbox client connection manager line 148 getfield glassbox client connection manager connection list ljava util list java util list size iconst icmpgt l0 return l0 aload lglassbox client connection manager line 149 getfield glassbox client connection manager connection list ljava util list java util list iterator ljava util iterator astore goto l3 l1 aload java util iterator next ljava lang object checkcast glassbox client connection manager agent connection astore aload lglassbox client connection manager agent connection con line 151 glassbox client connection manager agent connection get nickname ljava lang string aload ljava lang string nickname java lang string equals ljava lang object ifeq l3 aload lglassbox client connection manager line 152 getfield glassbox client connection manager connection list ljava util list aload lglassbox client connection manager agent connection con java util list last index ljava lang object aload lglassbox client connection manager getfield glassbox client connection manager default connection index icmpne l2 aload lglassbox client connection manager iconst putfield glassbox client connection manager default connection index l2 aload lglassbox client connection manager line 154 getfield glassbox client connection manager connection list ljava util list aload lglassbox client connection manager agent connection con java util list remove ljava lang object pop goto l4 line 155 l3 aload line 149 java util iterator has next ifne l1 l4 return line 158 method execution void glassbox client connection manager delete java lang string end public void delete string public void set default string org aspectj weaver method declaration line number 160 5880 method execution void glassbox client connection manager set default java lang string aload lglassbox client connection manager line 161 getfield glassbox client connection manager connection list ljava util list java util list iterator ljava util iterator astore goto l1 l0 aload java util iterator next ljava lang object checkcast glassbox client connection manager agent connection astore aload lglassbox client connection manager agent connection con line 162 glassbox client connection manager agent connection get nickname ljava lang string aload ljava lang string nickname java lang string equals ljava lang object ifeq l1 aload lglassbox client connection manager line 163 aload lglassbox client connection manager getfield glassbox client connection manager connection list ljava util list aload lglassbox client connection manager agent connection con java util list last index ljava lang object putfield glassbox client connection manager default connection index aload lglassbox client connection manager agent connection con line 164 iconst glassbox client connection manager agent connection set viewed goto l2 line 165 l1 aload line 161 java util iterator has next ifne l0 l2 return line 168 method execution void glassbox client connection manager set default java lang string end public void set default string public void set select viewed string boolean org aspectj weaver method declaration line number 170 6156 method execution void glassbox client connection manager set select viewed java lang string boolean aload lglassbox client connection manager line 171 glassbox client connection manager get default nick ljava lang string astore aload lglassbox client connection manager line 172 getfield glassbox client connection manager connection list ljava util list java util list iterator ljava util iterator astore goto l2 l0 aload java util iterator next ljava lang object checkcast glassbox client connection manager agent connection astore aload lglassbox client connection manager agent connection con line 173 glassbox client connection manager agent connection get nickname ljava lang string aload ljava lang string nickname java lang string equals ljava lang object ifeq l2 iload val line 174 ifne l1 aload ljava lang string def nick aload lglassbox client connection manager agent connection con glassbox client connection manager agent connection get nickname ljava lang string acmpeq l2 l1 aload lglassbox client connection manager agent connection con line 177 iload val glassbox client connection manager agent connection set viewed goto l3 line 178 l2 aload line 172 java util iterator has next ifne l0 l3 return line 182 method execution void glassbox client connection manager set select viewed java lang string boolean end public void set select viewed string boolean public boolean get select viewed string org aspectj weaver method declaration line number 184 6636 method execution boolean glassbox client connection manager get select viewed java lang string aload lglassbox client connection manager line 185 getfield glassbox client connection manager connection list ljava util list java util list iterator ljava util iterator astore goto l1 l0 aload java util iterator next ljava lang object checkcast glassbox client connection manager agent connection astore aload lglassbox client connection manager agent connection con line 186 glassbox client connection manager agent connection get nickname ljava lang string aload ljava lang string nickname java lang string equals ljava lang object ifeq l1 aload lglassbox client connection manager agent connection con line 187 glassbox client connection manager agent connection viewed ireturn l1 aload line 185 java util iterator has next ifne l0 iconst line 190 ireturn method execution boolean glassbox client connection manager get select viewed java lang string end public boolean get select viewed string public string get nickname from url string org aspectj weaver method declaration line number 193 6903 method execution java lang string glassbox client connection manager get nickname from url java lang string aload lglassbox client connection manager line 194 getfield glassbox client connection manager connection list ljava util list java util list iterator ljava util iterator astore goto l1 l0 aload java util iterator next ljava lang object checkcast glassbox client connection manager agent connection astore aload lglassbox client connection manager agent connection con line 195 glassbox client connection manager agent connection get url ljava lang string aload ljava lang string url java lang string equals ljava lang object ifeq l1 aload lglassbox client connection manager agent connection con line 196 glassbox client connection manager agent connection get nickname ljava lang string areturn l1 aload line 194 java util iterator has next ifne l0 ldc line 199 areturn method execution java lang string glassbox client connection manager get nickname from url java lang string end public string get nickname from url string public glassbox client connection manager agent connection get agent connection from url string org aspectj weaver method declaration line number 202 7168 method execution glassbox client connection manager agent connection glassbox client connection manager get agent connection from url java lang string aload lglassbox client connection manager line 203 getfield glassbox client connection manager connection list ljava util list java util list iterator ljava util iterator astore goto l1 l0 aload java util iterator next ljava lang object checkcast glassbox client connection manager agent connection astore aload lglassbox client connection manager agent connection con line 204 glassbox client connection manager agent connection get url ljava lang string aload ljava lang string url java lang string equals ljava lang object ifeq l1 aload lglassbox client connection manager agent connection con line 205 areturn l1 aload line 203 java util iterator has next ifne l0 aconst null line 209 areturn method execution glassbox client connection manager agent connection glassbox client connection manager get agent connection from url java lang string end public glassbox client connection manager agent connection get agent connection from url string public glassbox client connection manager agent connection get agent connection from nick string org aspectj weaver method declaration line number 212 7429 method execution glassbox client bcexception invalid annotation match
when using perthis aspect see following internal compiler ajdt aspect 1a build eclipse windows xp jdk error java lang class cast exception org aspectj weaver patterns per target pointcut visitor get per type pointcut per target pointcut visitor java 41 org aspectj weaver patterns per target pointcut visitor visit per target pointcut visitor java 108 org aspectj weaver patterns pointcut accept pointcut java 119 org aspectj weaver patterns per target pointcut visitor get per type pointcut per target pointcut visitor java 41 org aspectj weaver per object interface type munger get test type pattern per object interface type munger java 64 org aspectj weaver per object interface type munger matches per object interface type munger java 85 org aspectj weaver concrete type munger matches concrete type munger java 65 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 508 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 109 org aspectj weaver bcel bcel weaver weave bcel weaver java 1560 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1511 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1291 org aspectj weaver bcel bcel weaver weave bcel weaver java 1089 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 311 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 183 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 862 org aspectj ajdt internal core builder aj build manager do build aj build manager java 242 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 161 org aspectj ajdt internal core builder aj build manager do build aj build manager java 278 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 168 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public abstract class org apache tapestry internal aspects abstract class targetting extends java lang object public void init aload lorg apache tapestry internal aspects abstract class targetting line 10 java lang object init void org apache tapestry internal aspects abstract class targetting init aload java lang object get class ljava lang class ldc org apache tapestry internal annotations synchronized java lang class annotation present ljava lang class ifeq l0 aload invokestatic org apache tapestry internal aspects internal ajc per object bind ljava lang object constructor execution void org apache tapestry internal aspects abstract class targetting init l0 aload java lang object get class ljava lang class ldc org apache tapestry internal annotations synchronized java lang class annotation present ljava lang class ifeq l1 aload invokestatic org apache tapestry internal aspects internal ajc per object bind ljava lang object l1 return constructor execution void org apache tapestry internal aspects abstract class targetting init void org apache tapestry internal aspects abstract class targetting init end public void init abstract void ajc pointcut target classes 274 org aspectj weaver method declaration line number 16 628 end public abstract class org apache tapestry internal aspects abstract class targetting when weaving type org apache tapestry internal aspects abstract class targetting when weaving aspects when weaving when batch building build config workspace metadata plugins org eclipse ajdt core tapestry5 generated lst files 70 ll attach files perthis causes class cast exception
needed add set activate lightweight delegates false my ant build troubleshoot out memory permgen condition however ant task support doesn currently support adding new xset style options andy added here small patch pass any xset options through worked me patch add support xset options
aspect 1a ajdt dev eclipse 2m6 using sapcewar example open game java add public void foo save incremental build fail java lang null pointer exception org aspectj weaver per object interface type munger equals per object interface type munger java 33 org aspectj weaver bcel bcel type munger equals bcel type munger java 1672 java util abstract list equals abstract list java 610 org aspectj weaver crosscutting members replace crosscutting members java 321 org aspectj weaver crosscutting members set add replace aspect crosscutting members set java 73 org aspectj ajdt internal compiler lookup aj lookup environment add crosscutting structures aj lookup environment java 397 org aspectj ajdt internal compiler lookup aj lookup environment collect all itds declares aj lookup environment java 333 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 173 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 301 org aspectj org eclipse jdt internal compiler compiler compile compiler java 315 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 862 org aspectj ajdt internal core builder aj build manager do build aj build manager java 269 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 168 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception thrown null null pointer exception per object interface type munger java 33
iajc error source information available iajc file aj internal compiler error iajc org aspectj weaver bcexception can open archive missingjar iajc when resolving types defined compilation unit file aj iajc when processing compilation unit file aj iajc when batch building build config null files 14 iajc iajc org aspectj weaver bcel class path manager zip file entry ensure pen class path manager java 258 iajc org aspectj weaver bcel class path manager zip file entry find cl ass path manager java 225 iajc org aspectj weaver bcel class path manager find class path manage java 92 iajc org aspectj weaver bcel bcel world resolve delegate bcel world ava 287 iajc org aspectj weaver world resolve reference type world java 33 iajc org aspectj weaver world resolve world java 251 iajc org aspectj weaver patterns wild type pattern lookup type world wild type pattern java 716 iajc org aspectj weaver patterns wild type pattern resolve bindings fr om fully qualified type name wild type pattern java 690 iajc org aspectj weaver patterns wild type pattern resolve bindings ild type pattern java 623 iajc org aspectj weaver patterns signature pattern resolve bindings signature pattern java 82 iajc org aspectj weaver patterns kinded pointcut resolve bindings ki nded pointcut java 259 iajc org aspectj weaver patterns pointcut resolve bindings po intcut java 74 iajc org aspectj weaver patterns pointcut resolve pointcut java 19 iajc org aspectj ajdt internal compiler ast pointcut designator fin ish resolve types pointcut designator java 84 iajc org aspectj ajdt internal compiler ast advice declaration reso lve statements advice declaration java 118 iajc org aspectj org eclipse jdt internal compiler ast abstract met hod declaration resolve abstract method declaration java 400 iajc org aspectj org eclipse jdt internal compiler ast type declara tion resolve type declaration java 1088 iajc org aspectj ajdt internal compiler ast aspect declaration reso lve aspect declaration java 116 iajc org aspectj org eclipse jdt internal compiler ast type declara tion resolve type declaration java 1137 iajc org aspectj org eclipse jdt internal compiler ast compilation unit declaration resolve compilation unit declaration java 305 iajc org aspectj org eclipse jdt internal compiler compiler proces compiler java 514 iajc org aspectj org eclipse jdt internal compiler compiler compil compiler java 329 iajc org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 845 iajc org aspectj ajdt internal core builder aj build manager do build aj build manager java 241 iajc org aspectj ajdt internal core builder aj build manager batch bu ild aj build manager java 161 iajc org aspectj ajdt ajc ajdt command do command ajdt command java 12 iajc org aspectj ajdt ajc ajdt command run command ajdt command java 60 iajc org aspectj tools ajc main run main java 356 iajc org aspectj tools ajc main run main main java 246 iajc org aspectj tools ant taskdefs ajc task execute same vm ajc tas java 1262 iajc org aspectj tools ant taskdefs ajc task execute ajc task java 056 iajc org apache tools ant unknown element execute unknown element ja va 275 iajc org apache tools ant task perform task java 364 iajc org apache tools ant target execute target java 341 iajc org apache tools ant target perform tasks target java 369 iajc org apache tools ant project execute target project java 1214 iajc org apache tools ant taskdefs ant execute ant java 386 iajc org apache tools ant taskdefs call target execute call target ava 106 iajc org apache tools ant unknown element execute unknown element ja va 275 iajc org apache tools ant task perform task java 364 iajc org apache tools ant target execute target java 341 iajc org apache tools ant target perform tasks target java 369 iajc org apache tools ant project execute target project java 1214 iajc org apache tools ant project execute targets project java 1062 iajc org apache tools ant main run build main java 673 iajc org apache tools ant main start ant main java 188 iajc org apache tools ant launch launcher run launcher java 196 iajc org apache tools ant launch launcher main launcher java 55 iajc caused java util zip zip exception error opening zip file iajc java util zip zip exception error opening zip file iajc java util zip zip file open native method iajc java util zip zip file init zip file java 111 iajc java util zip zip file init zip file java 127 iajc org aspectj weaver bcel class path manager zip file entry ensure pen class path manager java 252 iajc org aspectj weaver bcel class path manager zip file entry find cl ass path manager java 225 iajc org aspectj weaver bcel class path manager find class path manage java 92 iajc org aspectj weaver bcel bcel world resolve delegate bcel world ava 287 iajc org aspectj weaver world resolve reference type world java 33 iajc org aspectj weaver world resolve world java 251 iajc org aspectj weaver patterns wild type pattern lookup type world wild type pattern java 716 iajc org aspectj weaver patterns wild type pattern resolve bindings fr om fully qualified type name wild type pattern java 690 iajc org aspectj weaver patterns wild type pattern resolve bindings ild type pattern java 623 iajc org aspectj weaver patterns signature pattern resolve bindings signature pattern java 82 iajc org aspectj weaver patterns kinded pointcut resolve bindings ki nded pointcut java 259 iajc org aspectj weaver patterns pointcut resolve bindings po intcut java 74 iajc org aspectj weaver patterns pointcut resolve pointcut java 19 iajc org aspectj ajdt internal compiler ast pointcut designator fin ish resolve types pointcut designator java 84 iajc org aspectj ajdt internal compiler ast advice declaration reso lve statements advice declaration java 118 iajc org aspectj org eclipse jdt internal compiler ast abstract met hod declaration resolve abstract method declaration java 400 iajc org aspectj org eclipse jdt internal compiler ast type declara tion resolve type declaration java 1088 iajc org aspectj ajdt internal compiler ast aspect declaration reso lve aspect declaration java 116 iajc org aspectj org eclipse jdt internal compiler ast type declara tion resolve type declaration java 1137 iajc org aspectj org eclipse jdt internal compiler ast compilation unit declaration resolve compilation unit declaration java 305 iajc org aspectj org eclipse jdt internal compiler compiler proces compiler java 514 iajc org aspectj org eclipse jdt internal compiler compiler compil compiler java 329 iajc org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 845 iajc org aspectj ajdt internal core builder aj build manager do build aj build manager java 241 iajc org aspectj ajdt internal core builder aj build manager batch bu ild aj build manager java 161 iajc org aspectj ajdt ajc ajdt command do command ajdt command java 12 iajc org aspectj ajdt ajc ajdt command run command ajdt command java 60 iajc org aspectj tools ajc main run main java 356 iajc org aspectj tools ajc main run main main java 246 iajc org aspectj tools ant taskdefs ajc task execute same vm ajc tas java 1262 iajc org aspectj tools ant taskdefs ajc task execute ajc task java 056 iajc org apache tools ant unknown element execute unknown element ja va 275 iajc org apache tools ant task perform task java 364 iajc org apache tools ant target execute target java 341 iajc org apache tools ant target perform tasks target java 369 iajc org apache tools ant project execute target project java 1214 iajc org apache tools ant taskdefs ant execute ant java 386 iajc org apache tools ant taskdefs call target execute call target ava 106 iajc org apache tools ant unknown element execute unknown element ja va 275 iajc org apache tools ant task perform task java 364 iajc org apache tools ant target execute target java 341 iajc org apache tools ant target perform tasks target java 369 iajc org apache tools ant project execute target project java 1214 iajc org apache tools ant project execute targets project java 1062 iajc org apache tools ant main run build main java 673 iajc org apache tools ant main start ant main java 188 iajc org apache tools ant launch launcher run launcher java 196 iajc org apache tools ant launch launcher main launcher java 55 iajc abort abort bcexception can open archive wissing jar iajc when resolving types defined compilation unit file aj iajc when processing compilation unit file aj iajc when batch building build config null files 14 bug ajc fails missing classpath entries fix
java lang null pointer exception org aspectj weaver bcel bcel shadow weave around inline bcel shadow java 2109 org aspectj weaver bcel bcel advice implement bcel advice java 232 org aspectj weaver shadow implement mungers shadow java 639 org aspectj weaver shadow implement shadow java 456 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 2236 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 491 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 109 org aspectj weaver bcel bcel weaver weave bcel weaver java 1560 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1511 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1291 org aspectj weaver bcel bcel weaver weave bcel weaver java 1113 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 311 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 183 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 862 org aspectj ajdt internal core builder aj build manager do build aj build manager java 242 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 161 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 npe org aspectj weaver bcel bcel shadow weave around inline
when advice doesn match enabled project advice did match warning against line number advice you insert line before advice save warning stays associated original line new one full building puts warning against new line regression didn happen aj advice did match line number doesn keep up line number advice
java lang null pointer exception org aspectj ajdt internal compiler ast validate aspect jannotations visitor build formal advice bindings from validate aspect jannotations visitor java 417 org aspectj ajdt internal compiler ast validate aspect jannotations visitor resolve set pointcut validate aspect jannotations visitor java 364 org aspectj ajdt internal compiler ast validate aspect jannotations visitor validate advice validate aspect jannotations visitor java 336 org aspectj ajdt internal compiler ast validate aspect jannotations visitor visit validate aspect jannotations visitor java 186 org aspectj org eclipse jdt internal compiler ast method declaration traverse method declaration java 185 org aspectj org eclipse jdt internal compiler ast type declaration traverse type declaration java 1195 org aspectj org eclipse jdt internal compiler ast compilation unit declaration traverse compilation unit declaration java 339 org aspectj ajdt internal compiler aj compiler adapter before analysing aj compiler adapter java 154 org aspectj ajdt internal compiler compiler adapter ajc before org aspectj ajdt internal compiler compiler adapter db78446d compiler adapter aj 101 org aspectj org eclipse jdt internal compiler compiler process compiler java 517 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 824 org aspectj ajdt internal core builder aj build manager do build aj build manager java 234 org aspectj ajdt internal core builder aj build manager do build aj build manager java 189 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 164 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception thrown null exception while trying edit annotation based aspect class normal java class
get error from having unbound reference variable aspect see attached ajdt project example java lang null pointer exception org aspectj ajdt internal core builder asm hierarchy builder visit asm hierarchy builder java 412 org aspectj org eclipse jdt internal compiler ast method declaration traverse method declaration java 185 org aspectj org eclipse jdt internal compiler ast type declaration traverse type declaration java 1250 org aspectj org eclipse jdt internal compiler ast qualified allocation expression traverse qualified allocation expression java 392 org aspectj org eclipse jdt internal compiler ast local declaration traverse local declaration java 242 org aspectj org eclipse jdt internal compiler ast method declaration traverse method declaration java 212 org aspectj org eclipse jdt internal compiler ast type declaration traverse type declaration java 1195 org aspectj org eclipse jdt internal compiler ast compilation unit declaration traverse compilation unit declaration java 339 org aspectj ajdt internal core builder asm hierarchy builder internal build asm hierarchy builder java 143 org aspectj ajdt internal core builder asm hierarchy builder build structure compilation unit asm hierarchy builder java 82 org aspectj ajdt internal compiler lookup eclipse factory finished compilation unit eclipse factory java 927 org aspectj ajdt internal compiler aj compiler adapter after processing aj compiler adapter java 201 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 90 org aspectj org eclipse jdt internal compiler compiler process compiler java 528 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 843 org aspectj ajdt internal core builder aj build manager do build aj build manager java 243 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception thrown null npe from unbound variable advice
ing guts another aspect new file from another project porting over number errors aspect most references point other project just changed object from one type other project type project file eclipse sdk version build id m20060118 1600 version build id aspect version java lang null pointer exception org aspectj org eclipse jdt internal compiler ast single type reference get type binding single type reference java 39 org aspectj org eclipse jdt internal compiler ast type reference get type binding public type reference java 98 org aspectj ajdt internal core builder asm element formatter gen label kind asm element formatter java 230 org aspectj ajdt internal core builder asm hierarchy builder visit asm hierarchy builder java 399 org aspectj org eclipse jdt internal compiler ast method declaration traverse method declaration java 185 org aspectj org eclipse jdt internal compiler ast type declaration traverse type declaration java 1250 org aspectj org eclipse jdt internal compiler ast qualified allocation expression traverse qualified allocation expression java 392 org aspectj org eclipse jdt internal compiler ast local declaration traverse local declaration java 242 org aspectj org eclipse jdt internal compiler ast method declaration traverse method declaration java 212 org aspectj org eclipse jdt internal compiler ast type declaration traverse type declaration java 1195 org aspectj org eclipse jdt internal compiler ast compilation unit declaration traverse compilation unit declaration java 339 org aspectj ajdt internal core builder asm hierarchy builder internal build asm hierarchy builder java 142 org aspectj ajdt internal core builder asm hierarchy builder build structure compilation unit asm hierarchy builder java 82 org aspectj ajdt internal compiler lookup eclipse factory finished compilation unit eclipse factory java 926 org aspectj ajdt internal compiler aj compiler adapter after processing aj compiler adapter java 195 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 89 org aspectj org eclipse jdt internal compiler compiler process compiler java 528 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 811 org aspectj ajdt internal core builder aj build manager do build aj build manager java 230 org aspectj ajdt internal core builder aj build manager do build aj build manager java 185 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception thrown null npe single type reference
have following construct public interface test extends test public class test class public aspect test aspect declare parents test class implements test test class later aspect does compile although public class test class implements test test class valid class declare parents implementing generic interface referencing same type
just upgraded latest ajdt version build id aspect version compiler crashed while rebulding project which used work fine using using march 16th version retrying clean build produced same crash java lang null pointer exception org aspectj weaver annotation ensure target initialized annotation java 158 org aspectj weaver annotation specifies target annotation java 98 org aspectj weaver bcel bcel weaver verify target ok bcel weaver java 1450 org aspectj weaver bcel bcel weaver apply declare type bcel weaver java 1417 org aspectj weaver bcel bcel weaver weave parent type mungers bcel weaver java 1366 org aspectj weaver bcel bcel weaver weave parents bcel weaver java 1223 org aspectj weaver bcel bcel weaver weave parents bcel weaver java 1211 org aspectj weaver bcel bcel weaver weave bcel weaver java 1058 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 311 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 183 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 845 org aspectj ajdt internal core builder aj build manager do build aj build manager java 241 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 161 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception thrown null compiler crashes processing annotations
program when all entered one file don see marker from declare annotated method annotated method another file do sure fields ctors types also problem public aspect basic declare method debit secured role supervisor class bank account public void debit long acc id long amount interface secured string role missing relationship declare method when annotating co located method
import java util list public aspect slide74 public bar get first return lts get static class bar list lts ajdt program incorrectly shows relationship from type bar class rather than from itd bar class structure model bug generic method itd
import java util list public aspect slide71 before generic type string foo before generic type my list foo before generic type foo class generic type public pointcut foo execution programs gives because my list known type java lang class cast exception org aspectj weaver patterns type pattern resolve exact type type pattern java 193 org aspectj weaver patterns reference pointcut resolve bindings reference pointcut java 130 org aspectj weaver patterns pointcut resolve pointcut java 194 org aspectj ajdt internal compiler ast pointcut designator finish resolve types pointcut designator java 84 org aspectj ajdt internal compiler ast advice declaration resolve statements advice declaration java 118 org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve abstract method declaration java 400 org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1088 org aspectj ajdt internal compiler ast aspect declaration resolve aspect declaration java 116 org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1137 org aspectj org eclipse jdt internal compiler ast compilation unit declaration resolve compilation unit declaration java 305 org aspectj org eclipse jdt internal compiler compiler process compiler java 514 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 843 org aspectj ajdt internal core builder aj build manager do build aj build manager java 268 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 170 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 class cast exception thrown org aspectj weaver patterns wild type pattern grotty class cast exception referring pointcut generic type
using outxml option ajdt generated aop xml files correct after first build contain all aspects have ever been built including those different projects duplicates aspect has been built twice seems global list aspects aspect names aj build manager never cleared generated aop xml files contain aspects all projects ever built
from emails needs decision hi andy way weaver add weaved classes serial ver uid field based pre weaved bytecode computation right now issues lint warning when serializable class without serial ver uid encountered due evil 75442 very annoying ltw first step would least deal when we had per obbject type munger should change any kind previous stuff alex andy generating suid sounds like nice idea code jvm used private inside object stream class also we need take care itd fields ensure correct behaviour when sending receiving from non woven classes basically programmer needs engaged only affects serializable classes warning you don declare field so strong hint programmer solve problem ltw we should make enhancement allow user configure lint other things example may may interested advice matching matthew webster alex we should make distinction between benign changes suid those affect members generating suid when we add static initializer support join point join point accessor methods privileged aspects transient per fields ok doing itds more problematic matthew webster serial version uid handling
option redundant apart from use aspect development maintenance confusing users source new problems ltw remove hide obfuscate xno weave
code weaver member get declared signature never used weaver my memory analysis showed can pin several megabytes memory large system patch removes yagni contribution remove memory consuming declared signature
patch adds ireflection world interface changes various places code where casts made reflection world use interface creates some common methods creates ltwworld implements interface sets up class loader weaving adaptor use important ltwworld have just one type map performance memory efficiency performance contribution refactoring support ltw world reflection delegates bootstrap types
aspect aspect advises itself using after throwing advice itself throws exception running resulting program causes verify error java lang verify error class method stop signature catch type subclass throwable java lang class get declared methods0 native method java lang class private get declared methods class java 2365 java lang class get method0 class java 2611 java lang class get method class java 1579 org aspectj tools ajc ajc test case run ajc test case java 608 org aspectj testing run spec execute run spec java 56 org aspectj testing ajc test run test ajc test java 68 org aspectj testing xmlbased ajc test case run test xmlbased ajc test case java 111 org aspectj systemtest ajc150 ajc150tests test error ajc150tests java 877 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 java lang reflect method invoke method java 585 junit framework test case run test test case java 154 junit framework test case run bare test case java 127 junit framework test result protect test result java 106 junit framework test result run protected test result java 124 junit framework test result run test result java 109 junit framework test case run test case java 118 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 478 org eclipse jdt internal junit runner remote test runner run remote test runner java 344 org eclipse jdt internal junit runner remote test runner main remote test runner java 196 aspect verify error after throwing after returning extra join point argument
zip file am about attach contains two aspect project one depending other you make small change main class java test project save you see strange warning class advice defined ras ffdc has been applied xlint advice did match you do full build warning goes away note error would line 36 were 36 lines class which relates line ffdc aspect contains advice incremental xlint warnings wrong place incremental compilation
aspect npe aj code pointcut which contains logical operation
ltw doesn work using jre1 eclipse now want support jre1 when ltw defined aop xml file application meta inf path works fine using jre1 command line aop xml file used when ltw command below work btm eclipse eclipse sdk win32 eclipse jre bin java classpath aspectj1 lib jar djava system class loader org aspectj weaver loadtime weaving urlclass loader daj class path work btm eclipse jre1 my test aspectj1 doc examples armtest jar btm deps e3 jar aspectj1 doc examples armtest jar btm rt jar hello doesn work eclipse added upper command vm arguments can find aop xml because changed aop xml wrong any error when execute application eclipse error when execute command line based point think aop xml didn used eclipse also tried add daj aspect path work btm eclipse jre1 my test still so want confirm aspect only supports command line jre1 doesn support eclipse jre1 btw my eclipse env eclipse ajdt eclipse sun jdk also tried use eclipse problem still existed ltw doesn work using jre1 eclipse
error associated declare construct incorrect current message expected one error warning parents soft dominates dominates should changed precendence new annotation related declararions should mentioned here suggestion expected one error warning parents soft precedence type method constructor field incorrect error declare statements
when defining generic aspect paramterized pc using pc advice declaration causes incompatible type error example public abstract aspect generic aspect par1 abstract pointcut checkpoint par1 par1 advice declaration causes error after par1 par1 checkpoint par1 do something using aspect compiler complains incompatible type expected java lang object found binding type pattern tpar1 check type specified your pointcut since possible paramterize named pc subaspects public abstract aspect generic aspect par1 abstract pointcut checkpoint par1 par1 public aspect sub aspect1 extends generic aspect main pointcut checkpoint main main call void main test target main after main main checkpoint main system out println caught public aspect sub aspect2 extends generic aspect main2 pointcut checkpoint main2 main call void main2 test target main after main2 main checkpoint main system out println caught since possible use generic pc utilizing unnamed pcs generic aspect public abstract aspect generic aspect par1 works after par1 par1 call void par1 test target par1 something seems bug can use named pointcut advice decl generic aspect
adding setter moody example makes clear annotation style declare parents results different behavior than classic declare parents style calling setter declare parents advised object behaves one would expect however calling setter declare parents advised object has effect you can call setter see been called immediately call getter only find value didn change following examples all package moody illustrate public enum mood happy jolly classic style public aspect classic mood indicator public interface moody mood get mood void set mood mood mood private mood moody mood mood happy public mood moody get mood return mood public void moody set mood mood mood mood mood declare parents moody classic mood implementor implements moody public class classic mood implementor annotation style import org aspectj lang annotation aspect import org aspectj lang annotation declare parents aspect public class annotation mood indicator public interface moody mood get mood void set mood mood mood public static class moody impl implements moody private mood mood mood happy public mood get mood return mood public void set mood mood mood mood mood declare parents value moody annotation mood implementor default impl moody impl class private moody implemented interface public class annotation mood implementor junit test case import junit framework test case public class mood tester extends test case public mood tester string name super name public void test classic classic mood implementor cmi0 new classic mood implementor classic mood implementor cmi1 new classic mood implementor assert equals cmi0 should happy mood happy cmi0 get mood cmi1 set mood mood jolly assert equals cmi1 should jolly mood jolly cmi1 get mood assert equals cmi0 should still happy mood happy cmi0 get mood public void test annotation annotation mood implementor ami0 new annotation mood implementor annotation mood implementor ami1 new annotation mood implementor assert equals ami0 should happy mood happy annotation mood indicator moody ami0 get mood annotation mood indicator moody ami1 set mood mood jolly assert equals ami1 should jolly mood jolly annotation mood indicator moody ami1 get mood assert equals ami0 should still happy mood happy annotation mood indicator moody ami0 get mood result test run follows time 021 failure test annotation moody mood tester junit framework assertion failed error ami1 should jolly expected jolly happy moody mood tester test annotation mood tester java 27 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 moody mood tester main mood tester java failures tests run failures errors classic you can see cmi1 set mood successful cmi0 cmi1 decoupled calling set mood cmi1 has impact cmi0 annotation style however fails because ami1 set mood appears have done nothing result should have been ami1 jolly ami0 happy include second assert because both ami0 ami1 ended up jolly rc1 current behavior makes declare parents unusable retaining field state near can tell retains state throughout method invocation beyond like creating discarding backing object each method invocation aspect declare parents declare parents equivalent
aspect lacking import join point crahes compiler
org aspectj weaver bcexception org aspectj weaver bcel bcel weaver weave bcel weaver java 1087 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 300 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 811 org aspectj ajdt internal core builder aj build manager do build aj build manager java 254 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 bcexception thrown can find bcel delegate training casino konto type class org aspectj weaver reference type when weaving classes when weaving when building build config documents settings mheidt workspace metadata plugins org eclipse ajdt core asp jtraining generated lst files 11 deleted java source file before class file possibly pointed log aspect created new source file error occurs after saving new file bcexception when deleting java source file
perhaps issue asm struct deow since cross struct empty ajdt despite error warning gutter message ok aj decl err warn does show cross structure view
exception when compile project under svn java io file found exception java io file output stream open native method java io file output stream init file output stream java 179 java io file output stream init file output stream java 131 org aspectj util file util make output stream file util java 1258 org aspectj ajdt internal core builder aj build manager write resource aj build manager java 466 org aspectj ajdt internal core builder aj build manager copy resources from file aj build manager java 444 org aspectj ajdt internal core builder aj build manager copy resources destination aj build manager java 386 org aspectj ajdt internal core builder aj build manager do build aj build manager java 298 org aspectj ajdt internal core builder aj build manager do build aj build manager java 185 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 file found exception thrown home chomats fede svn fede repos tool product product server classes svn format permission non accordee skip subversion resources when copying files from input output folders
aj type declaration should have properties privileged per clause which subtype aspect declaration has shown up whilst building aspectj ajdt failure one visitor tests aj type declaration dom shouldn have properties subtype aspect declaration
from within eclipse rad get error partial details listed below my aspect looks like public aspect aawt event dispatcher thread protection pointcut awt component method java awt component component target component call before java awt component component awt component method component swing utilities event dispatch thread component displayable system err println awt component method called from another thread than awt event dispatch thread source join point get source location target join point long string details shortened because size exceeded 65k limit java lang null pointer exception org aspectj weaver bcel bcel shadow ensure target type correct bcel shadow java 1313 org aspectj weaver bcel bcel shadow initialize target var bcel shadow java 1274 org aspectj weaver bcel bcel shadow get target var bcel shadow java 968 org aspectj weaver patterns target pointcut find residue internal target pointcut java 185 org aspectj weaver patterns pointcut find residue pointcut java 268 org aspectj weaver patterns pointcut find residue internal pointcut java 97 org aspectj weaver patterns pointcut find residue pointcut java 268 org aspectj weaver patterns pointcut find residue internal pointcut java 97 org aspectj weaver patterns pointcut find residue pointcut java 268 org aspectj weaver bcel bcel advice specialize bcel advice java 132 org aspectj weaver bcel bcel shadow prepare mungers bcel shadow java 313 org aspectj weaver shadow implement shadow java 404 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 2146 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 467 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 102 org aspectj weaver bcel bcel weaver weave bcel weaver java 1543 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1494 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1275 org aspectj weaver bcel bcel weaver weave bcel weaver java 1097 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 300 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 811 org aspectj ajdt internal core builder aj build manager do build aj build manager java 230 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 156 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public class com sun imageio plugins gif gifimage metadata extends javax imageio metadata iiometadata null pointer exception from bcel shadow java 1313
java lang null pointer exception org aspectj ajdt internal compiler ast access inline visitor end visit access inline visitor java 105 org aspectj org eclipse jdt internal compiler ast qualified name reference traverse qualified name reference java compiled code org aspectj org eclipse jdt internal compiler ast message send traverse message send java compiled code org aspectj org eclipse jdt internal compiler ast message send traverse message send java compiled code org aspectj org eclipse jdt internal compiler ast method declaration traverse method declaration java compiled code org aspectj ajdt internal compiler ast advice declaration resolve statements advice declaration java 172 org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve abstract method declaration java compiled code org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java compiled code org aspectj ajdt internal compiler ast aspect declaration resolve aspect declaration java 115 org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java inlined compiled code org aspectj org eclipse jdt internal compiler ast compilation unit declaration resolve compilation unit declaration java compiled code org aspectj org eclipse jdt internal compiler compiler process compiler java 514 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java compiled code org aspectj ajdt internal core builder aj build manager do build aj build manager java 230 org aspectj ajdt internal core builder aj build manager do build aj build manager java 185 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception thrown null npe access inline visitor end visit access inline visitor java 105
invalid aspectj path missing jar file throws java io file found exception java io file input stream open native method java io file input stream init file input stream java 106 org aspectj weaver bcel bcel weaver add aspects from jar file bcel weaver java 202 org aspectj weaver bcel bcel weaver add library jar file bcel weaver java 192 org aspectj ajdt internal core builder aj build manager init bcel world aj build manager java 623 org aspectj ajdt internal core builder aj build manager do build aj build manager java 209 org aspectj ajdt internal core builder aj build manager do build aj build manager java 185 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 file found exception thrown users frankstolle documents workspace lib aspects deploy lib aspects jar file directory should generate problem entry problems list invalid aspectj path throws
fix bug 58520 caused ajdt test failures
hi am weaving two aspects jar file jar jar ajc gives me huge error message see attachement would great could get any thanks eric stack over flow reference type assignable from
generics incorrect call generic inherited method around advice
eclipse ajdt december 20th 2005 release got message error dialog org aspectj weaver bcexception org aspectj weaver bcel lazy class gen get lazy method gen lazy class gen java 1216 org aspectj weaver bcel lazy class gen get lazy method gen lazy class gen java 1201 org aspectj weaver bcel bcel shadow weave around inline bcel shadow java 2048 org aspectj weaver bcel bcel advice implement bcel advice java 232 org aspectj weaver shadow implement mungers shadow java 588 org aspectj weaver shadow implement shadow java 405 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 2146 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 467 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 102 org aspectj weaver bcel bcel weaver weave bcel weaver java 1543 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1494 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1275 org aspectj weaver bcel bcel weaver weave bcel weaver java 1097 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 300 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 811 org aspectj ajdt internal core builder aj build manager do build aj build manager java 254 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public class edu ucsd aosd my application extends java lang object public void init aload edu ucsd aosd my application line java lang object init constructor execution void edu ucsd aosd my application init return constructor execution void edu ucsd aosd my application init end public void init public static void main string org aspectj weaver method declaration line number 124 method execution void edu ucsd aosd my application main java lang string aload java lang string args line astore iconst istore aload arraylength istore goto l1 l0 aload iload aaload astore getstatic java lang system out ljava io print stream line 10 new java lang string builder dup ldc got java lang string builder init ljava lang string aload java lang string arg method call java lang string builder java lang string builder append java lang string java lang string builder append ljava lang string ljava lang string builder method call java lang string builder java lang string builder append java lang string method call java lang string java lang string builder string java lang string builder string ljava lang string method call java lang string java lang string builder string astore astore method call void java io print stream println java lang string aload aload java io print stream println ljava lang string method call void java io print stream println java lang string getstatic java lang system out ljava io print stream line 11 ldc got iconst anewarray java lang object dup iconst aload java lang string arg aastore method call java io print stream java io print stream printf java lang string java lang object java io print stream printf ljava lang string ljava lang object ljava io print stream method call java io print stream java io print stream printf java lang string java lang object pop iinc line l1 iload iload icmplt l0 return line 13 method execution void edu ucsd aosd my application main java lang string end public static void main string end public class edu ucsd aosd my application when implementing shadow method call void java io print stream println java lang string when weaving type edu ucsd aosd my application when weaving classes when weaving when building build config eclipse workspace metadata plugins org eclipse ajdt core aspect jsemantics test generated lst files occured when editing file aspect project recently renamed aj extension package edu ucsd aosd import java io print stream public class my application main public static void main string args string arg args system out println got arg system out printf got arg aspect printing pointcut println calls print stream ps string out call print stream println string target ps args out object around print stream ps string out println calls ps out return proceed ps out pointcut printf calls print stream ps string fmt object objs call print stream printf string object target ps args fmt objs where where my cursor when saved my previously saved version didn have printf calls pointcut nor call printf main thus you might want try println version first save make new additions though hope debug information enough ajdt aspect internal compiler error
capture method annotation generic aspect does compile
hi here second generics issue java code public class test extends integer set ints new hash set public set foo return ints public static void main string args test integer new test integer set integer ints foo aspect public privileged aspect test aspect pointcut getting member collection test target get public set number com mprv secsph within test aspect after test test getting member collection test system out println go aspects compiler output warning after test test getting member collection test root idea projects aspects test src com mprv secsph test aspect aj 19 advice defined com mprv secsph test aspect has been applied xlint advice did match would expect getting member collection catch access ints member test thanks lot misha generics detecting field get field type
hi guys didn talk you while ve found several new issues related generics here first most annoying one just compile testcase iajc you get java lang illegal state exception wrong number type parameters supplied java code public interface generic1 extends number public void foo public interface generic2 extends number extends number extends generic1 public void foo2 public class test extends number implements generic2 public void foo2 public void foo aspect public privileged aspect test aspect pointcut test inheritance test test target test execution com mprv secsph generic1 after test test test inheritance test system out println go aspects exception iajc abort trouble public class com mprv secsph test extends java lang object implements com mprv secsph generic2 public void init aload com mprv secsph test line 10 java lang object init constructor execution void com mprv secsph test init return constructor execution void com mprv secsph test init end public void init public void foo2 number org aspectj weaver method declaration line number 11 259 return line 12 end public void foo2 number public void foo number org aspectj weaver method declaration line number 13 287 return line 14 end public void foo number end public class com mprv secsph test illegal state exception wrong number type parameters supplied wrong number type parameters supplied java lang illegal state exception wrong number type parameters supplied org aspectj weaver resolved member impl resolved member impl java 609 org aspectj weaver resolved member impl resolved member impl java 590 org aspectj weaver reference type get declared methods reference type java 472 org aspectj weaver resolved type add recurse resolved type java 262 org aspectj weaver resolved type add recurse resolved type java 301 org aspectj weaver resolved type get methods without iterator resolved type java 257 org aspectj weaver resolved type lookup resolved member resolved type java 375 org aspectj weaver join point signature iterator find signatures from supertypes join point signature iterator java 177 org aspectj weaver join point signature iterator has next join point signature iterator java 68 org aspectj weaver patterns signature pattern matches signature pattern java 286 org aspectj weaver patterns kinded pointcut match internal kinded pointcut java 106 org aspectj weaver patterns pointcut match pointcut java 145 org aspectj weaver patterns pointcut match internal pointcut java 55 org aspectj weaver patterns pointcut match pointcut java 145 org aspectj weaver patterns pointcut match internal pointcut java 55 org aspectj weaver patterns pointcut match pointcut java 145 org aspectj weaver shadow munger match shadow munger java 64 org aspectj weaver advice match advice java 109 org aspectj weaver bcel bcel advice match bcel advice java 104 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2149 org aspectj weaver bcel bcel class weaver match bcel class weaver java 1716 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 458 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 105 org aspectj weaver bcel bcel weaver weave bcel weaver java 1543 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1494 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1275 org aspectj weaver bcel bcel weaver weave bcel weaver java 1097 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 300 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 819 org aspectj ajdt internal core builder aj build manager do build aj build manager java 234 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 157 org aspectj ajdt ajc ajdt command do command ajdt command java 112 org aspectj ajdt ajc ajdt command run command ajdt command java 60 org aspectj tools ajc main run main java 326 org aspectj tools ajc main run main main java 240 org aspectj tools ant taskdefs ajc task execute same vm ajc task java 1254 org aspectj tools ant taskdefs ajc task execute ajc task java 1048 org apache tools ant unknown element execute unknown element java 275 org apache tools ant task perform task java 364 org apache tools ant target execute target java 341 org apache tools ant target perform tasks target java 369 org apache tools ant project execute sorted targets project java 1216 org apache tools ant project execute target project java 1185 org apache tools ant helper default executor execute targets default executor java 40 org apache tools ant project execute targets project java 1068 org apache tools ant main run build main java 668 org apache tools ant main start ant main java 187 org apache tools ant launch launcher run launcher java 246 org apache tools ant launch launcher main launcher java 67 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 java lang reflect method invoke method java 585 com intellij rt ant execution ant main2 main ant main2 java 16 warning after test test test inheritance test root idea projects aspects test src com mprv secsph test aspect aj 44 advice defined com mprv secsph test aspect has been applied xlint advice did match generics mixing matching numbers type variables parameters hierarchy
here patch single file weaver src org aspectj weaver world improves memory footprint weaves see details below would like help resolving one bug hit aspect weaver tests does following keeps weak references values expendable map allow evicting them whereas weak hash map keeps weak references only keys allows configuring expendable map keep hard references up types dorg aspectj weaver world cache retention number current default nice tuning option so projects can use bit more memory avoid evicting types moves expendible check from type map world allow different worlds ltwworld change what evictable lets ltwworld keep references already defined classes change breaks tests run tests before checking code suite all them npe same line reference type get type variables generic signatures presumably code implicitly relying expendable types never being evicted have attached error output all cases my initial tests have shown relatively small performance loss return significant memory footprint gains using aspect cvs head standard bcel world ltwworld world tomcat glassbox inspector web apps aspect overhead optimization 48 million heap bytes 60 million total heap bytes versus 61 million bytes using cvs head optimization has limited benefit bcel world where almost all code exposed weaver since few types expendible however martin lippert tried version his ajeer eclipse load time weaving environment reported reduction from 230 mb heap 30 mb heap used cost 25 increase start up time likewise facility major contributor enabling my other ltw can reduce heap overhead my test case million heap bytes principally having ltw world allow evicting types already woven using reflective proxies see similar start up times when using expendable map my tests ability increase number hard references cache should provide users ability allocate more memory speed up performance note only hard reference keys signatures from values least haven noticed any cases my load time weaving tests so weak hash map compacting itself properly when reference type weakly reachable key weakly reachable map ultimately purges theses entries contribution memory efficient expendable type map
given following code public aspect declare type my annotation interface my annotation class you comment out declare type statement do incremental build following array index out bounds exception occurs java lang array index out bounds exception org aspectj ajdt internal compiler lookup aj lookup environment do declare annotations aj lookup environment java 754 org aspectj ajdt internal compiler lookup aj lookup environment weave inter type declarations aj lookup environment java 571 org aspectj ajdt internal compiler lookup aj lookup environment weave intertypes aj lookup environment java 357 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 209 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 301 org aspectj org eclipse jdt internal compiler compiler compile compiler java 315 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 811 org aspectj ajdt internal core builder aj build manager do build aj build manager java 254 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 against latest code head array index out bounds exception incremental declare type
order speed up porting porting old html generation code ajdoc continues use following classes org aspectj tools ajdoc declaration org aspectj tools ajdoc symbol manager funtion only wrapper asm needed next refactoring effort should get rid them all those static methods well ajdoc should use declaration symbol manager classes
hi use ajdt eclipse zip eclipse fick error when eclipse try make workbrench java lang illegal state exception org aspectj weaver type factory create type type factory java 42 org aspectj weaver bcel bcel generic signature type xconverter class type bcel generic signature type xconverter java 82 org aspectj weaver bcel bcel generic signature type xconverter class type bcel generic signature type xconverter java 42 org aspectj weaver bcel bcel object type unpack generic signature bcel object type java 657 org aspectj weaver bcel bcel object type get superclass bcel object type java 181 org aspectj weaver reference type get superclass reference type java 514 org aspectj weaver bcel bcel weaver weave parents bcel weaver java 1192 org aspectj weaver bcel bcel weaver weave bcel weaver java 1047 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 300 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 811 org aspectj ajdt internal core builder aj build manager do build aj build manager java 230 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 156 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 illegal state exception thrown expecting raw type bug ajdt eclipse zip
methinks constant misspelled join point lacking between join point might correct version note value constant spelled correctly sorry harald waiting website doc refresh typo org aspectj lang join point string constant symbolic name
exception occurs using ajdt eclipse plugin when compiling project first time add ajdt nature aspects defined project suppose exception occurs when compiling class sorry can post entire source code signature public class fixed width parser extends tabular data parser only noticeable things about class presence inherited type parameter redefined same name some custom annotations methods varags method parameter all things present other classes same project aspect apprently compiles well sure about fact compiles them hope helped you clues here complete stacktrace java lang string index out bounds exception java lang string substring unknown source org aspectj weaver type factory create type from signature type factory java 86 org aspectj weaver type factory create type from signature type factory java 116 org aspectj weaver unresolved type signature unresolved type java 430 org aspectj weaver unresolved type make array unresolved type java 286 org aspectj ajdt internal compiler lookup eclipse factory from binding eclipse factory java 214 org aspectj ajdt internal compiler lookup eclipse factory make resolved member eclipse factory java 516 org aspectj ajdt internal compiler lookup eclipse factory make resolved member eclipse factory java 494 org aspectj ajdt internal compiler lookup eclipse factory make resolved member eclipse factory java 451 org aspectj ajdt internal core builder asm hierarchy builder gen bytecode info asm hierarchy builder java 525 org aspectj ajdt internal core builder asm hierarchy builder visit asm hierarchy builder java 400 org aspectj org eclipse jdt internal compiler ast method declaration traverse method declaration java 185 org aspectj org eclipse jdt internal compiler ast type declaration traverse type declaration java 1195 org aspectj org eclipse jdt internal compiler ast compilation unit declaration traverse compilation unit declaration java 339 org aspectj ajdt internal core builder asm hierarchy builder internal build asm hierarchy builder java 142 org aspectj ajdt internal core builder asm hierarchy builder build structure compilation unit asm hierarchy builder java 82 org aspectj ajdt internal compiler lookup eclipse factory finished compilation unit eclipse factory java 926 org aspectj ajdt internal compiler aj compiler adapter after processing aj compiler adapter java 195 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter aj 89 org aspectj org eclipse jdt internal compiler compiler process compiler java 528 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 811 org aspectj ajdt internal core builder aj build manager do build aj build manager java 230 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 156 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 string index out bounds exception thrown string index out range java lang string index out bounds exception when compiling build
description property editor still shows properties layout items when switch master page viewer steps reproduce new report insert label select label property editor shows label properties switch master page expected result property editor changs reflect master page properties actual result still showed label properties confuse customers thought master page editor set properties without click master page viewer first property editor still shows properties layout items when switch master page viewer
ajdoc crashes
defined aop xml aspect have already copy jar work btm lib jar added javaagent work btm lib jar option jvm eclipse works fine before after advice aspect wrong once used around advice use compile time weaving around advice works fine my eclipse env eclipse ajdt rc1 release sun jdk aspect file import org aspectj lang signature import org aspectj lang join point public abstract aspect world private object result pointcut greeting execution hello say world object around greeting system out println around start object result proceed system out println around end return result before greeting signature signature join point get signature system out println before signature get name after returning greeting signature signature join point get signature system out println after signature get name aop xml file xml version encoding utf aspectj aspects aspect name world concrete aspect name world1 extends world pointcut name greeting expression execution hello say world execution hello say hello concrete aspect aspects weaver options xreweavable verbose xlazy tjp show weave info include within hello weaver aspectj around advice error message eclipse console below info register aspect world info generating class world1 info weaving hello info weaver operating reweavable mode need verify any required types exist abort trouble public class hello extends java lang object public void init aload hello line java lang object init constructor execution void hello init return constructor execution void hello init end public void init public static void main string org aspectj weaver method declaration line number 75 invokestatic hello say hello line return line 10 end public static void main string public static void say hello org aspectj weaver method declaration line number 12 180 end public static void say hello public static int say world org aspectj weaver method declaration line number 17 268 method execution int hello say world getstatic java lang system out ljava io print stream line 18 ldc world java io print stream println ljava lang string iconst line 19 ireturn method execution int hello say world end public static int say world static final void say hello around body0 getstatic java lang system out ljava io print stream line 13 ldc hello java io print stream println ljava lang string invokestatic hello say world line 14 pop return line 15 end static final void say hello around body0 end public class hello public class hello ajc closure1 extends org aspectj runtime internal around closure public void init object aload aload org aspectj runtime internal around closure init ljava lang object return end public void init object public object run object aload getfield org aspectj runtime internal around closure state ljava lang object astore invokestatic hello say hello around body0 aconst null areturn end public object run object end public class hello ajc closure1 null pointer exception null null java lang null pointer exception org aspectj weaver bcel bcel advice get advice arg setup bcel advice java 457 org aspectj weaver bcel bcel shadow weave around closure bcel shadow java 2685 org aspectj weaver bcel bcel advice implement bcel advice java 230 org aspectj weaver shadow implement mungers shadow java 588 org aspectj weaver shadow implement shadow java 405 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 2146 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 467 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 102 org aspectj weaver bcel bcel weaver weave bcel weaver java 1543 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1494 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1275 org aspectj weaver bcel bcel weaver weave bcel weaver java 1097 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 263 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 196 org aspectj weaver loadtime aj pre process aj java 65 org aspectj weaver loadtime class pre processor agent adapter transform class pre processor agent adapter java 52 sun instrument transformer manager transform transformer manager java 122 sun instrument impl transform impl java 155 java lang class loader define class1 native method java lang class loader define class class loader java 620 java security secure class loader define class secure class loader java 124 java net urlclass loader define class urlclass loader java 260 java net urlclass loader access 100 urlclass loader java 56 java net urlclass loader run urlclass loader java 195 java security access controller do privileged native method java net urlclass loader find class urlclass loader java 188 java lang class loader load class class loader java 306 sun misc launcher app class loader load class launcher java 268 java lang class loader load class class loader java 251 java lang class loader load class internal class loader java 319 message abort trouble public class hello extends java lang object public void init aload hello line java lang object init constructor execution void hello init return constructor execution void hello init end public void init public static void main string org aspectj weaver method declaration line number 75 invokestatic hello say hello line return line 10 end public static void main string public static void say hello org aspectj weaver method declaration line number 12 180 end public static void say hello public static int say world org aspectj weaver method declaration line number 17 268 method execution int hello say world getstatic java lang system out ljava io print stream line 18 ldc world java io print stream println ljava lang string iconst line 19 ireturn method execution int hello say world end public static int say world static final void say hello around body0 getstatic java lang system out ljava io print stream line 13 ldc hello java io print stream println ljava lang string invokestatic hello say world line 14 pop return line 15 end static final void say hello around body0 end public class hello public class hello ajc closure1 extends org aspectj runtime internal around closure public void init object aload aload org aspectj runtime internal around closure init ljava lang object return end public void init object public object run object aload getfield org aspectj runtime internal around closure state ljava lang object astore invokestatic hello say hello around body0 aconst null areturn end public object run object end public class hello ajc closure1 null pointer exception null null java lang null pointer exception org aspectj weaver bcel bcel advice get advice arg setup bcel advice java 457 org aspectj weaver bcel bcel shadow weave around closure bcel shadow java 2685 org aspectj weaver bcel bcel advice implement bcel advice java 230 org aspectj weaver shadow implement mungers shadow java 588 org aspectj weaver shadow implement shadow java 405 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 2146 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 467 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 102 org aspectj weaver bcel bcel weaver weave bcel weaver java 1543 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1494 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1275 org aspectj weaver bcel bcel weaver weave bcel weaver java 1097 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 263 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 196 org aspectj weaver loadtime aj pre process aj java 65 org aspectj weaver loadtime class pre processor agent adapter transform class pre processor agent adapter java 52 sun instrument transformer manager transform transformer manager java 122 sun instrument impl transform impl java 155 java lang class loader define class1 native method java lang class loader define class class loader java 620 java security secure class loader define class secure class loader java 124 java net urlclass loader define class urlclass loader java 260 java net urlclass loader access 100 urlclass loader java 56 java net urlclass loader run urlclass loader java 195 java security access controller do privileged native method java net urlclass loader find class urlclass loader java 188 java lang class loader load class class loader java 306 sun misc launcher app class loader load class launcher java 268 java lang class loader load class class loader java 251 java lang class loader load class internal class loader java 319 org aspectj bridge abort exception trouble public class hello extends java lang object public void init aload hello line java lang object init constructor execution void hello init return constructor execution void hello init end public void init public static void main string org aspectj weaver method declaration line number 75 invokestatic hello say hello line return line 10 end public static void main string public static void say hello org aspectj weaver method declaration line number 12 180 end public static void say hello public static int say world org aspectj weaver method declaration line number 17 268 method execution int hello say world getstatic java lang system out ljava io print stream line 18 ldc world java io print stream println ljava lang string iconst line 19 ireturn method execution int hello say world end public static int say world static final void say hello around body0 getstatic java lang system out ljava io print stream line 13 ldc hello java io print stream println ljava lang string invokestatic hello say world line 14 pop return line 15 end static final void say hello around body0 end public class hello public class hello ajc closure1 extends org aspectj runtime internal around closure public void init object aload aload org aspectj runtime internal around closure init ljava lang object return end public void init object public object run object aload getfield org aspectj runtime internal around closure state ljava lang object astore invokestatic hello say hello around body0 aconst null areturn end public object run object end public class hello ajc closure1 org aspectj bridge message writer handle message message writer java 47 org aspectj weaver tools weaving adaptor weaving adaptor message handler handle message weaving adaptor java 395 org aspectj weaver bcel bcel weaver weave bcel weaver java 1554 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1494 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1275 org aspectj weaver bcel bcel weaver weave bcel weaver java 1097 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 263 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 196 org aspectj weaver loadtime aj pre process aj java 65 org aspectj weaver loadtime class pre processor agent adapter transform class pre processor agent adapter java 52 sun instrument transformer manager transform transformer manager java 122 sun instrument impl transform impl java 155 java lang class loader define class1 native method java lang class loader define class class loader java 620 java security secure class loader define class secure class loader java 124 java net urlclass loader define class urlclass loader java 260 java net urlclass loader access 100 urlclass loader java 56 java net urlclass loader run urlclass loader java 195 java security access controller do privileged native method java net urlclass loader find class urlclass loader java 188 java lang class loader load class class loader java 306 sun misc launcher app class loader load class launcher java 268 java lang class loader load class class loader java 251 java lang class loader load class internal class loader java 319 hello world around advice does work when ltw
when file advised javadoc uses following naming convention setting its name convert checked exception java lang throwable however ajdoc uses unqualified name argument resuting follwing file anchor link class name html convert checked exception throwable which fails navigate anchor within file although does always go right file ajdoc doesn navigate target details some cases
reflection based reference type delegate test test compare subclass delegates junit framework assertion failed error errors couldn find void java util hash map entry bcel set couldn find void java util hash map exit bcel set couldn find void java util hash map transfer0 java util hash map entry bcel set junit framework assert fail assert java 47 junit framework assert assert true assert java 20 org aspectj weaver reflect reflection based reference type delegate test test compare subclass delegates reflection based reference type delegate test java 278 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 64 sun reflect delegating method accessor impl invoke delegating method accessor impl java 43 java lang reflect method invoke method java 615 junit framework test case run test test case java 154 junit framework test case run bare test case java 127 junit framework test result protect test result java 106 junit framework test result run protected test result java 124 junit framework test result run test result java 109 junit framework test case run test case java 118 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 478 org eclipse jdt internal junit runner remote test runner run remote test runner java 344 org eclipse jdt internal junit runner remote test runner main remote test runner java 196 failure occures because when we compare becl world reflection world we still picking up default sun version hash map jre15 lib bcel solution create both worlds same class loader ajc150tests test modifier overrides junit framework assertion failed error expecting output execution void pr119749 exec me pr119749 me execution void pr119749 exec ex found output execution void pr119749 exec me pr119749 me execution void pr119749 exec ex first difference line junit framework assert fail assert java 47 org aspectj testing output spec match against output spec java 58 org aspectj testing run spec execute run spec java 61 org aspectj testing ajc test run test ajc test java 68 org aspectj testing xmlbased ajc test case run test xmlbased ajc test case java 111 org aspectj systemtest ajc150 ajc150tests test modifier overrides ajc150tests java 852 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 64 sun reflect delegating method accessor impl invoke delegating method accessor impl java 43 java lang reflect method invoke method java 615 junit framework test case run test test case java 154 junit framework test case run bare test case java 127 junit framework test result protect test result java 106 junit framework test result run protected test result java 124 junit framework test result run test result java 109 junit framework test case run test case java 118 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 junit extensions test decorator basic run test decorator java 22 junit extensions test setup protect test setup java 19 junit framework test result run protected test result java 124 junit extensions test setup run test setup java 23 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 478 org eclipse jdt internal junit runner remote test runner run remote test runner java 344 org eclipse jdt internal junit runner remote test runner main remote test runner java 196 failure due difference between jdks string annotations test failures using ibm java
panel where server location button install server shown couple usability improvements could made choose browse choose location hit install server fs browser should brought back up since have already hitten browse selected location location chosen contains server server downlodable classpath validation errors should show message stating server found can installed selecting install server button improvements define new server wizard page
profiling load time weaving from head found total time over 10 weaving time spent org aspectj weaver lint clear suppressions mostly from use inside bcel class weaver match made small change parts bcel advice clear suppressions save list cleared only clear alone saves about 15 total cpu time start up my sample contribution more efficient lint warnings 15 performance increase
would very useful know exactly which version weaver being used ltw message could issued when each weaving adaptor instance created possible have multiple versions aspect system message could similar issued ajc version issue version message during load time weaving
get incorrect error can find pointcut when declaring pertarget pointcut using pointcut declared outside aspect true head right now true pointcuts declared inside aspect issingleton aspects thought reported fixed couldn find bug sorry duplicate package bugs public class per target subaspect error public static void main string args run static class static void run pointcut doit execution void run error pertarget static aspect cpt pertarget pc error doit defined cpt protected pointcut pc doit unexpected ce before doit ce named pointcut resolved pertarget pointcut
keep getting unresolved type unsupported operation exception unhelpful message resolve type first so adding signature message without permission hence bug notice throw new unsupported operation exception unable parameterize unresolved type signature java lang unsupported operation exception org aspectj weaver unresolved type parameterize unresolved type java 218 org aspectj weaver patterns exact type pattern parameterize exact type pattern java 242 org aspectj weaver patterns type pattern list parameterize type pattern list java 195 org aspectj weaver patterns declare parents parameterize declare parents java 77 org aspectj weaver reference type get declares reference type java 484 org aspectj weaver resolved type collect declares resolved type java 523 org aspectj weaver resolved type collect crosscutting members resolved type java 488 org aspectj weaver crosscutting members set add replace aspect crosscutting members set java 60 org aspectj ajdt internal compiler lookup aj lookup environment add crosscutting structures aj lookup environment java 378 org aspectj ajdt internal compiler lookup aj lookup environment add crosscutting structures aj lookup environment java 388 org aspectj ajdt internal compiler lookup aj lookup environment collect all itds declares aj lookup environment java 314 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 168 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 301 org aspectj org eclipse jdt internal compiler compiler compile compiler java 315 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 811 org aspectj ajdt internal core builder aj build manager do build aj build manager java 230 org aspectj ajdt internal core builder aj build manager do build aj build manager java 185 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 unsupported operation exception thrown resolve type first add signature unresolved type parameterize exception
ltw weaver include exclude does behave correctly
cflowbelow issue when binding aj
ajdoc produces incorrect warning package accessed aspects
am running problem load time weaving when use reflection delegates because weaver generating incorrect bridge method when perform inter type declaration struts action servlet init method bcel world recognizing overriding method because its version get declared methods returning declared methods all ancestor superclasses however reflection world returning only declared methods one class therefore appears weaver expects get declared methods return all them making name quite misleading think previously method being implemented between reflection reflection delegates looks like needs handled consistently include all superclass methods however dont know what other places map really expecting get declared methods its siblings behave like java reflection version started work adding get all declared methods method reference type delegates alternative provide weaver ability check method overriding case little bit involved wanted flag issue first here test fails illustrates issue index reflection based reference type delegate test java rcs file home technology org aspectj modules weaver testsrc org aspectj weaver reflect reflection based reference type delegate test java retrieving revision diff r1 reflection based reference type delegate test java reflection based reference type delegate test java 28 nov 2005 17 44 40 0000 reflection based reference type delegate test java dec 2005 04 11 41 0000 238 238 18 assert true superclass map generic type should object rt2 rt2 equals unresolved type object public void test compare subclass delegates world set behave java5way true bcel world bcel world new bcel world bcel world set behave java5way true unresolved type java util hash map unresolved type name java util hash map reference type raw type reference type bcel world resolve java util hash map reference type raw reflect type reference type world resolve java util hash map assert equals raw type get delegate get declared methods length raw reflect type get delegate get declared methods length todo array int protected void set up throws exception results junit framework assertion failed error expected 41 29 junit framework assert fail assert java 47 junit framework assert fail equals assert java 282 junit framework assert assert equals assert java 64 junit framework assert assert equals assert java 201 junit framework assert assert equals assert java 207 org aspectj weaver reflect reflection based reference type delegate test test compare subclass delegates reflection based reference type delegate test java 250 java lang reflect method invoke native method junit framework test case run test test case java 154 junit framework test case run bare test case java 127 junit framework test result protect test result java 106 junit framework test result run protected test result java 124 junit framework test result run test result java 109 junit framework test case run test case java 118 junit framework test suite run test test suite java 208 junit framework test suite run test suite java 203 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 478 org eclipse jdt internal junit runner remote test runner run remote test runner java 344 org eclipse jdt internal junit runner remote test runner main remote test runner java 196 inconsistent reference type get declared methods
waiting build iajc task java lang runtime exception ranges must updated enclosing instruction list
ran while using reflection proxies ltw see attached patches test cases my fix public void test object supertype aj type object super aj type system get aj type object class get supertype assert null object super public void test interface supertype aj type serializable super aj type system get aj type serializable class get supertype assert null serializable super public aj type super get supertype class super superclass clazz get superclass return superclass null null aj type super new aj type impl superclass aj type get supertype breaks null
class loader weaving adaptor weaver option lint null loaded xlint properties file gets overwritten default xlint properties see attached patch fix problem load time weaving wipes out xlint files xlint values
am using latest version ajdt reason entirely clear have pointcut form public pointcut real pc common entity pc1 entity pc2 entity just few hours back used get error regarding incompatible binding entity poincut when got error eclipse frozen point clicking details exception report made eclipse hang had kill using task manager so modified program avoid expression pointcut after trying various ways express pointcut ugly thing do since essentially had duplicate advice both pointcuts anyway tried reproduce smaller project provide minimal program reproduced bug however worked just fine project couldn see any material difference pointcuts classes involved encouraged retried ed version pointcut real project time get crash can acccess stack trace java lang null pointer exception org aspectj weaver ast test make instanceof test java 78 org aspectj weaver patterns pointcut find residue internal pointcut java 181 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver patterns pointcut find residue internal pointcut java 97 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver patterns pointcut find residue internal pointcut java 97 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver patterns pointcut find residue internal pointcut java 99 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver patterns pointcut find residue internal pointcut java 99 org aspectj weaver patterns pointcut find residue pointcut java 267 org aspectj weaver bcel bcel advice specialize bcel advice java 133 org aspectj weaver bcel bcel shadow prepare mungers bcel shadow java 308 org aspectj weaver shadow implement shadow java 404 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 2146 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 467 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 102 org aspectj weaver bcel bcel weaver weave bcel weaver java 1534 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1485 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1266 org aspectj weaver bcel bcel weaver weave bcel weaver java 1088 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 300 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 809 org aspectj ajdt internal core builder aj build manager do build aj build manager java 230 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 156 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public abstract class com aspectivity mgmt web entity manage entity extends com aspectivity mgmt web template page public void init com aspectivity mgmt model entity boolean string string string string string org aspectj weaver method declaration line number 19 557 aload com aspectivity mgmt web entity manage entity line 19 com aspectivity mgmt web template page init aload astore iload istore 10 aload astore 11 aload astore 12 aload astore 13 aload astore 14 aload astore 15 constructor execution void com aspectivity mgmt web entity manage entity init com aspectivity mgmt model entity boolean java lang string java lang string java lang string java lang string java lang string aload com aspectivity mgmt web entity manage entity line 23 aload java lang string page title com aspectivity mgmt web entity manage entity set page title ljava lang string aload com aspectivity mgmt web entity manage entity line 25 aload com aspectivity mgmt web entity manage entity aload com aspectivity mgmt model entity entity aload java lang string add entity link text com aspectivity mgmt web entity manage entity get entities list view lcom aspectivity mgmt model entity ljava lang string lwicket markup html list list view com aspectivity mgmt web entity manage entity add lwicket component lwicket markup container pop aload com aspectivity mgmt web entity manage entity line 27 ldc add entity link aconst null com aspectivity mgmt web entity manage entity get edit link ljava lang string lcom aspectivity mgmt model entity lwicket markup html link link astore aload com aspectivity mgmt web entity manage entity line 28 aload wicket markup html link link add entity link com aspectivity mgmt web entity manage entity add lwicket component lwicket markup container pop aload wicket markup html link link add entity link line 29 new wicket markup html basic label dup ldc add entity link text aload java lang string add entity link text wicket markup html basic label init ljava lang string ljava lang string wicket markup html link link add lwicket component lwicket markup container pop iload boolean initial view line 31 ifeq l0 aload com aspectivity mgmt web entity manage entity line 32 new wicket markup html basic label dup ldc edit entity ldc wicket markup html basic label init ljava lang string ljava lang string com aspectivity mgmt web entity manage entity add lwicket component lwicket markup container pop goto l1 l0 aload com aspectivity mgmt web entity manage entity line 34 aload com aspectivity mgmt web entity manage entity aload com aspectivity mgmt model entity entity iload boolean initial view aload java lang string add panel ttile aload java lang string edit panel title com aspectivity mgmt web entity manage entity get edit panel lcom aspectivity mgmt model entity zljava lang string ljava lang string lwicket component com aspectivity mgmt web entity manage entity add lwicket component lwicket markup container pop l1 aload com aspectivity mgmt web entity manage entity line 37 new wicket markup html basic label dup ldc list view title aload java lang string list view title wicket markup html basic label init ljava lang string ljava lang string com aspectivity mgmt web entity manage entity add lwicket component lwicket markup container pop return line 38 constructor execution void com aspectivity mgmt web entity manage entity init com aspectivity mgmt model entity boolean java lang string java lang string java lang string java lang string java lang string end public void init com aspectivity mgmt model entity boolean string string string string string protected abstract com aspectivity mgmt model entity create new entity org aspectj weaver method declaration line number 40 1233 protected abstract void remove entity com aspectivity mgmt model entity org aspectj weaver method declaration line number 41 1278 protected abstract java util list get all entities org aspectj weaver method declaration line number 42 1351 protected abstract com aspectivity mgmt web entity manage entity create new page com aspectivity mgmt model entity boolean org aspectj weaver method declaration line number 44 1406 protected abstract wicket component create edit panel string string com aspectivity mgmt model entity org aspectj weaver method declaration line number 45 1490 protected wicket markup html list list view get entities list view com aspectivity mgmt model entity string org aspectj weaver method declaration line number 47 1581 new com aspectivity mgmt web entity entity list view line 48 dup aload com aspectivity mgmt web entity manage entity ldc entity list aload com aspectivity mgmt web entity manage entity com aspectivity mgmt web entity manage entity get all entities ljava util list aload com aspectivity mgmt model entity entity com aspectivity mgmt web entity entity list view init lcom aspectivity mgmt web entity manage entity ljava lang string ljava util list lcom aspectivity mgmt model entity areturn end protected wicket markup html list list view get entities list view com aspectivity mgmt model entity string protected wicket markup html link link get edit link string com aspectivity mgmt model entity org aspectj weaver method declaration line number 51 1743 new wicket markup html link page link line 52 dup aload java lang string name new com aspectivity mgmt web entity manage entity dup aload com aspectivity mgmt web entity manage entity aload com aspectivity mgmt model entity entity com aspectivity mgmt web entity manage entity init lcom aspectivity mgmt web entity manage entity lcom aspectivity mgmt model entity wicket markup html link page link init ljava lang string lwicket markup html link ipage link areturn end protected wicket markup html link link get edit link string com aspectivity mgmt model entity protected wicket markup html link link get remove link string wicket markup html list list item org aspectj weaver method declaration line number 63 2013 new com aspectivity mgmt web entity manage entity line 64 dup aload com aspectivity mgmt web entity manage entity aload java lang string id aload wicket markup html list list item item com aspectivity mgmt web entity manage entity init lcom aspectivity mgmt web entity manage entity ljava lang string lwicket markup html list list item areturn end protected wicket markup html link link get remove link string wicket markup html list list item private wicket component get edit panel com aspectivity mgmt model entity boolean string string org aspectj weaver method declaration line number 75 2376 aload com aspectivity mgmt model entity entity line 77 ifnonnull l0 aload java lang string add panel ttile goto l1 l0 aload java lang string edit panel title l1 astore aload com aspectivity mgmt model entity entity line 78 ifnonnull l2 aload com aspectivity mgmt web entity manage entity line 79 com aspectivity mgmt web entity manage entity create new entity lcom aspectivity mgmt model entity astore com aspectivity mgmt model entity entity l2 aload com aspectivity mgmt web entity manage entity line 81 ldc edit entity aload java lang string panel title aload com aspectivity mgmt model entity entity com aspectivity mgmt web entity manage entity create edit panel ljava lang string ljava lang string lcom aspectivity mgmt model entity lwicket component areturn end private wicket component get edit panel com aspectivity mgmt model entity boolean string string end public abstract class com aspectivity mgmt web entity manage entity when implementing shadow constructor execution void com aspectivity mgmt web entity manage entity init com aspectivity mgmt model entity boolean java lang string java lang string java lang string java lang string java lang string when weaving type com aspectivity mgmt web entity manage entity when weaving classes when weaving when batch building build config work projects workspace metadata plugins org eclipse ajdt core aspectivity generated lst files 87 aspect compiler crahses possibly due poincut context binding issue
aspect failing allow access private itd field from type nested inside aspect which inconsistent java access rules here source see also follow up patch tests integrates ajc150 test suite public aspect pr unknown private static interface marker private class foo implements marker public foo bar null allowed listener null should also allowed listener null so should marker listener null marker listener null private object marker listener private object bar allowing access private itd inside nested type
fairly new aspect so probably going well explained ve started working project working fine added methods classes take dimensional string array parameter suddenly getting verify error exception java lang verify error class com drkw cpds obligor facades version 00 obligor detail facade 00 method search obligor summaries group around body24 signature lcom drkw cpds obligor facades version 00 obligor detail facade 00 ljava lang string ljava lang string ljava 130 com drkw cpds obligor facades version 00 obligor obligor manager clinit obligor manager java 48 com drkw cpds obligor integration version 00 obligor get obligor details grouping test test get obligor details using groups get obligor details grouping test java 45 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke unknown source sun reflect delegating method accessor impl invoke unknown source waiting build verify error aspect
runtime error stack size too large bug 69706 related
propose compiler spit out warning anytime has apply default advice precedence also should spit out default ordering guaranteed from release release compiler you can see thread aspectj dev titled change runtime execution order one aspectj users titled ajdt aspectj reasoning behind why good thing produce compile warning when default advice precedence applied
reflection based reference type delegate factory line 44 code breaking my use weaver looking up bootstrap classes where classloader null aspect weaver isn accessible bootstrap loader commented out code works just fine me real need resolve aspect runtime from different classloader than one already used load class from aspect runtime class delegate class class name org aspectj weaver reflect based reference type delegate false using class loader reflection based reference type delegate class get class loader use weaver class loader using class loader factory
open cvs repository view java perspective double click title bar maximize switch resource perspective come back java perspective cvs repository view longer maximized view maximized should stay maximized view mgmt switching perspectives loses view maximized state
dump properties dump file ajcore 20051122 152749 326 txt dump reason org aspectj weaver bcexception dump exception true dump exit condition abort exception information org aspectj weaver bcexception bad resolve void org apache log4j category log java lang string org apache log4j level java lang object java lang throwable org aspectj weaver world get modifiers world java 216 org aspectj weaver member get modifiers member java 406 org aspectj weaver patterns kinded pointcut warn confusing sig kinded pointcut java 109 org aspectj weaver patterns kinded pointcut match kinded pointcut java 69 org aspectj weaver patterns pointcut match pointcut java 44 org aspectj weaver patterns pointcut match pointcut java 43 org aspectj weaver patterns pointcut match pointcut java 43 org aspectj weaver shadow munger match shadow munger java 62 org aspectj weaver advice match advice java 91 org aspectj weaver bcel bcel class weaver match bcel class weaver java 1126 org aspectj weaver bcel bcel class weaver match invoke instruction bcel class weaver java 1115 org aspectj weaver bcel bcel class weaver match bcel class weaver java 987 org aspectj weaver bcel bcel class weaver match bcel class weaver java 827 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 348 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 83 org aspectj weaver bcel bcel weaver weave bcel weaver java 742 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 707 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 634 org aspectj weaver bcel bcel weaver weave bcel weaver java 577 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 243 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 118 org aspectj org eclipse jdt internal compiler compiler compile compiler java 383 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 680 org aspectj ajdt internal core builder aj build manager do build aj build manager java 168 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 102 org aspectj ajdt ajc ajdt command do command ajdt command java 109 org aspectj ajdt ajc ajdt command run command ajdt command java 60 org aspectj tools ajc main run main java 291 ajc crashes common logging jar
verbose option ltw consistent other uses aspect ajc iajc should allow info well warining error messages output option parser testcase need updated using verbose aop xml does yield info messages
unqualified superaspect pointcut sortafunny subaspect
cuiplugin get active workbench window get active page can return null npe ccontent outline page create content provider
aj type system interface cannot used ltw environment
using sun jdk1 04 audit java public interface audit public string get last updated public void set last updated string un audit impl java public class audit impl implements audit private string last updated public string get last updated return last updated public void set last updated string un last updated un test aspect java import org aspectj lang annotation test java aspect public class test aspect declare parents test public static audit introduced new audit impl public class test public static void main string args test new test audit audit set last updated username system out println username get last updated files lst audit java audit impl java test aspect java test java compiled using following command aspectj1 bin ajc classpath aspectj1 lib aspectjrt jar argfi le files lst aspectj1 bin aj5 test exception thread main java lang verify error class test method set last updated signature ljava lang string incompatible argument function aspectj1 bin aj5 noverify test username verify error when using annotations define inter type annotation
today found out following when writing advice after returning object system out println advice indeed executed every time type returns from however since returned object bound null think inconsistent fact where we have something like after returning call object foo bar system out println here afaik advice would execute cases where returned object instance thus would propose first advice should only execute joinpoints where return value available after returning should bind null return value
patch class loader weaving adaptor adds two when enabled false adaptor immediately returns false accept also avoids overhead constructing weaver world also contains commented out code letting me improve performance loading reflective proxies instead creating bcel objects resolution loader which currently broken since reflective proxies now require reflection world contribution reduce overhead when aspects define
following aspect should compile successfully import java io ioexception public aspect soften advice declare soft ioexception within soften advice before execution main throw new ioexception test public static void main string args both 0m2 head from days ago give output devel scratch err ajc soften advice aj devel scratch err soften advice aj error unhandled exception type ioexcept ion throw new ioexception test error however you change declare soft following correctly softens advice execution join point declare soft ioexception within soften advice withincode declare soft affecting explicit
reflection api detecting itd method correctly all
program interface class simple public aspect declare type simple all file called java open aj editor when built shows incorrect gutter markers shows double headed arrow simple implying annotates itself rather than something outgoing from declare statement something incoming simple type incorrect structure model simple declare type program
testing reflection weaver tools apis when using following code pointcut parser parse new pointcut parser string expr call public main hello pointcut expression pex parse parse pointcut expression expr whenever use full qualified class name pointcut expression exception throwed out java lang illegal argument exception warning match type name obj xlint invalid absolute type name try turn off lint exception seems must access world field pointcut parser inconvenient because world field exposed pointcut parser existing pointcut parser interface implicitly creates world does allow any including classpath lint developers may need kind control pointcut parser configurable
sorry don have small test case looks like npe happens when annotation refered compiled aspect longer exists because renamed class being woven first one method being woven does have annotation let me know you need test case sorry late bugs just now writing article java lang null pointer exception org aspectj weaver patterns wild annotation type pattern matches wild annotation type pattern java 61 org aspectj weaver patterns signature pattern matches annotations signature pattern java 321 org aspectj weaver patterns signature pattern matches exactly signature pattern java 169 org aspectj weaver patterns signature pattern matches signature pattern java 131 org aspectj weaver patterns withincode pointcut match internal withincode pointcut java 73 org aspectj weaver patterns pointcut match pointcut java 143 org aspectj weaver patterns pointcut match internal pointcut java 55 org aspectj weaver patterns pointcut match pointcut java 143 org aspectj weaver patterns pointcut match internal pointcut java 55 org aspectj weaver patterns pointcut match pointcut java 143 org aspectj weaver shadow munger match shadow munger java 64 org aspectj weaver advice match advice java 109 org aspectj weaver bcel bcel advice match bcel advice java 97 org aspectj weaver bcel bcel class weaver match bcel class weaver java 1749 org aspectj weaver bcel bcel class weaver match invoke instruction bcel class weaver java 1736 org aspectj weaver bcel bcel class weaver match bcel class weaver java 1533 org aspectj weaver bcel bcel class weaver match bcel class weaver java 1359 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 382 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 98 org aspectj weaver bcel bcel weaver weave bcel weaver java 1478 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1443 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1217 org aspectj weaver bcel bcel weaver weave bcel weaver java 1021 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 300 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 759 org aspectj ajdt internal core builder aj build manager do build aj build manager java 225 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 151 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public class com isberg articles aop7 bean abean test aplus extends java lang object type mungers bcel type munger resolved type munger method java lang string com isberg articles aop7 bean abean test cplus property name java lang string declares declare parents com isberg articles aop7 bean abean test cplus extends com isberg articles aop7 bean abean ibean private static throwable ajc init failure cause public static final com isberg articles aop7 bean abean test aplus ajc per singleton instance static void clinit void com isberg articles aop7 bean abean test aplus clinit catch java lang throwable e0 invokestatic com isberg articles aop7 bean abean test aplus ajc post clinit line 125 catch java lang throwable e0 goto l0 e0 astore aload putstatic com isberg articles aop7 bean abean test aplus ajc init failure cause ljava lang throwable l0 return void com isberg articles aop7 bean abean test aplus clinit end static void clinit void init aload com isberg articles aop7 bean abean test aplus line 125 java lang object init constructor execution void com isberg articles aop7 bean abean test aplus init return constructor execution void com isberg articles aop7 bean abean test aplus init end void init void ajc declare parents org aspectj weaver method declaration line number 127 3678 return line 127 end void ajc declare parents public static string ajc inter method com isberg articles aop7 bean abean test aplus com isberg articles aop7 bean abean test cplus property name com isberg articles aop7 bean abean test cplus string effective signature attribute java lang string com isberg articles aop7 bean abean test cplus property name java lang string method execution method execution java lang string com isberg articles aop7 bean abean test cplus property name java lang string aload com isberg articles aop7 bean abean test cplus ajc line 132 aload java lang string method name invokestatic com isberg articles aop7 bean abean ajc inter method com isberg articles aop7 bean abean com isberg articles aop7 bean abean ibean property name lcom isberg articles aop7 bean abean ibean ljava lang string ljava lang string astore ldc something line 133 aload java lang string result method call boolean java lang string equals java lang object java lang string equals ljava lang object method call boolean java lang string equals java lang object ifeq l0 ldc line 134 astore java lang string result l0 aload java lang string result line 136 areturn method execution java lang string com isberg articles aop7 bean abean test cplus property name java lang string end public static string ajc inter method com isberg articles aop7 bean abean test aplus com isberg articles aop7 bean abean test cplus property name com isberg articles aop7 bean abean test cplus string public static string ajc inter method dispatch1 com isberg articles aop7 bean abean test aplus com isberg articles aop7 bean abean test cplus property name com isberg articles aop7 bean abean test cplus string effective signature attribute java lang string com isberg articles aop7 bean abean test cplus property name java lang string method call aload aload com isberg articles aop7 bean abean test cplus property name ljava lang string ljava lang string areturn end public static string ajc inter method dispatch1 com isberg articles aop7 bean abean test aplus com isberg articles aop7 bean abean test cplus property name com isberg articles aop7 bean abean test cplus string public static com isberg articles aop7 bean abean test aplus aspect org aspectj weaver aj attribute aj synthetic 591171 getstatic com isberg articles aop7 bean abean test aplus ajc per singleton instance lcom isberg articles aop7 bean abean test aplus ifnonnull l0 new org aspectj lang aspect bound exception dup ldc com isberg articles aop7 bean abean test aplus getstatic com isberg articles aop7 bean abean test aplus ajc init failure cause ljava lang throwable org aspectj lang aspect bound exception init ljava lang string ljava lang throwable athrow l0 getstatic com isberg articles aop7 bean abean test aplus ajc per singleton instance lcom isberg articles aop7 bean abean test aplus areturn end public static com isberg articles aop7 bean abean test aplus aspect public static boolean has aspect org aspectj weaver aj attribute aj synthetic 16e3eb3 getstatic com isberg articles aop7 bean abean test aplus ajc per singleton instance lcom isberg articles aop7 bean abean test aplus ifnull l0 iconst ireturn l0 iconst ireturn end public static boolean has aspect private static void ajc post clinit org aspectj weaver aj attribute aj synthetic d7cf62 new com isberg articles aop7 bean abean test aplus dup com isberg articles aop7 bean abean test aplus init putstatic com isberg articles aop7 bean abean test aplus ajc per singleton instance lcom isberg articles aop7 bean abean test aplus return end private static void ajc post clinit end public class com isberg articles aop7 bean abean test aplus when matching pointcut withincode parallel call void percflow com isberg articles aop7 concurrent parallel method impl execution parallel when matching shadow method call boolean java lang string equals java lang object when weaving type com isberg articles aop7 bean abean test aplus when weaving aspects when weaving when batch building build config home ws main 31 metadata plugins org eclipse ajdt core devworks fall generated lst files 70 wild annotation type pattern java 61 npe after renaming method annotation class
java lang class cast exception org aspectj weaver bcel bcel class weaver check override bcel class weaver java 607 org aspectj weaver bcel bcel class weaver calculate any required bridge methods bcel class weaver java 676 org aspectj weaver bcel bcel weaver weave bcel weaver java 1537 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1485 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1266 org aspectj weaver bcel bcel weaver weave bcel weaver java 1088 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 300 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspect ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 809 org aspectj ajdt internal core builder aj build manager do build aj build manager java 254 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 163 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public class ts simul client abstract client option setter extends ts util cmd line program option setter base final ts simul client abstract client private static final org aspectj lang join point static part ajc tjp public void init ts simul client abstract client org aspectj weaver method declaration line number 59 1411 aload ts simul client abstract client option setter line 60 aload putfield ts simul client abstract client option setter lts simul client abstract client aload ts simul client abstract client option setter line 59 aload ts util cmd line program option setter base init lts util cmd line program constructor execution void ts simul client abstract client option setter init ts simul client abstract client return constructor execution void ts simul client abstract client option setter init ts simul client abstract client end public void init ts simul client abstract client public boolean set option file string throws ts util illegal program argument exception org aspectj weaver method declaration line number 62 1469 method execution boolean ts simul client abstract client option setter set option file java lang string aload java lang string opt param line 65 method call int java lang string length java lang string length method call int java lang string length ifle l1 aload ts simul client abstract client option setter line 66 getfield ts simul client abstract client option setter lts simul client abstract client aload java lang string opt param putfield ts simul client abstract client file name ljava lang string new java io file line 67 dup aload ts simul client abstract client option setter getfield ts simul client abstract client option setter lts simul client abstract client getfield ts simul client abstract client file name ljava lang string constructor call void java io file init java lang string java io file init ljava lang string constructor call void java io file init java lang string astore aload java io file file line 68 method call boolean java io file exists java io file exists method call boolean java io file exists ifne l0 new ts util illegal program argument exception line 69 dup new java lang string builder dup ldc cannot find file constructor call void java lang string builder init java lang string java lang string builder init ljava lang string constructor call void java lang string builder init java lang string aload ts simul client abstract client option setter getfield ts simul client abstract client option setter lts simul client abstract client getfield ts simul client abstract client file name ljava lang string method call java lang string builder java lang string builder append java lang string java lang string builder append ljava lang string ljava lang string builder method call java lang string builder java lang string builder append java lang string ldc method call java lang string builder java lang string builder append java lang string java lang string builder append ljava lang string ljava lang string builder method call java lang string builder java lang string builder append java lang string method call java lang string java lang string builder string java lang string builder string ljava lang string method call java lang string java lang string builder string constructor call void ts util illegal program argument exception init java lang string ts util illegal program argument exception init ljava lang string constructor call void ts util illegal program argument exception init java lang string athrow l0 iconst line 70 ireturn l1 iconst line 73 ireturn method execution boolean ts simul client abstract client option setter set option file java lang string end public boolean set option file string throws ts util illegal program argument exception public boolean set option class string throws ts util illegal program argument exception org aspectj weaver method declaration line number 76 1971 method execution boolean ts simul client abstract client option setter set option class java lang string aload java lang string opt param line 79 method call int java lang string length java lang string length method call int java lang string length ifle l1 aload ts simul client abstract client option setter line 80 getfield ts simul client abstract client option setter lts simul client abstract client aload java lang string opt param putfield ts simul client abstract client class name ljava lang string catch ts simul simulation exception e0 aload ts simul client abstract client option setter line 82 getfield ts simul client abstract client option setter lts simul client abstract client aload ts simul client abstract client option setter getfield ts simul client abstract client option setter lts simul client abstract client getfield ts simul client abstract client class name ljava lang string method call java lang class ts simul scene factory get scene class java lang string invokestatic ts simul scene factory get scene class ljava lang string ljava lang class method call java lang class ts simul scene factory get scene class java lang string putfield ts simul client abstract client scene class ljava lang class aload ts simul client abstract client option setter line 83 getfield ts simul client abstract client option setter lts simul client abstract client method call void ts simul client abstract client set bean info search path invokestatic ts simul architecture aspect lts simul architecture getstatic ts simul client abstract client option setter ajc tjp lorg aspectj lang join point static part ts simul architecture ajc before ts simul architecture ae285a4d lorg aspectj lang join point static part ts simul client abstract client set bean info search path method call void ts simul client abstract client set bean info search path goto l0 catch ts simul simulation exception e0 e0 astore line 85 new ts util illegal program argument exception line 86 dup aload ts simul simulation exception method call java lang string ts simul simulation exception get message ts simul simulation exception get message ljava lang string method call java lang string ts simul simulation exception get message constructor call void ts util illegal program argument exception init java lang string ts util illegal program argument exception init ljava lang string constructor call void ts util illegal program argument exception init java lang string athrow l0 iconst line 88 ireturn l1 iconst line 91 ireturn method execution boolean ts simul client abstract client option setter set option class java lang string end public boolean set option class string throws ts util illegal program argument exception public boolean set option name string org aspectj weaver method declaration line number 94 2593 method execution boolean ts simul client abstract client option setter set option name java lang string aload ts simul client abstract client option setter line 96 getfield ts simul client abstract client option setter lts simul client abstract client aload java lang string opt param putfield ts simul client abstract client scene name ljava lang string iconst line 97 ireturn method execution boolean ts simul client abstract client option setter set option name java lang string end public boolean set option name string public boolean set option actors string org aspectj weaver method declaration line number 100 2739 method execution boolean ts simul client abstract client option setter set option actors java lang string catch java lang number format exception e0 aload java lang string opt param line 103 method call int java lang integer parse int java lang string invokestatic java lang integer parse int ljava lang string method call int java lang integer parse int java lang string istore goto l0 catch java lang number format exception e0 e0 astore int line 105 iconst line 106 ireturn l0 iconst line 108 ireturn method execution boolean ts simul client abstract client option setter set option actors java lang string end public boolean set option actors string end public class ts simul client abstract client option setter when weaving type ts simul client abstract client option setter when weaving classes when weaving when building build config projects eclipse metadata plugins org eclipse ajdt core ts generated lst files 79 waiting ajdtdrop exception thrown from aspect compiler
hi again trying use loadtime weaving getting exception please look testcase java code public class test set ints set public test ints set new hash set public get objs return ints set array public static void main string args system out println aaa new ttt foo class ttt public void foo test object mt new test object object arr mt get objs new object aspect public privileged aspect test aspect pointcut test array test mt target mt within test aspect object around test mt object objs test array mt args objs execution object com mprv secsph test get objs object objs proceed mt objs system out println go aspects return objs aop xml aspectj aspects aspect name com mprv secsph test aspect aspects weaver options verbose xlazy tjp show weave info include within com mprv weaver aspectj program output aaa info weaving com mprv secsph test aspect java lang null pointer exception org aspectj weaver tools weaving adaptor weaving class file provider get bytes weaving adaptor java 390 org aspectj weaver tools weaving adaptor get aspect jaspect bytes weaving adaptor java 259 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 181 org aspectj weaver loadtime aj pre process aj java 66 org aspectj weaver loadtime class pre processor agent adapter transform class pre processor agent adapter java 52 sun instrument transformer manager transform transformer manager java 122 sun instrument impl transform impl java 155 java lang class loader define class1 native method java lang class loader define class class loader java 620 java security secure class loader define class secure class loader java 124 java net urlclass loader define class urlclass loader java 260 java net urlclass loader access 100 urlclass loader java 56 java net urlclass loader run urlclass loader java 195 java security access controller do privileged native method java net urlclass loader find class urlclass loader java 188 java lang class loader load class class loader java 306 sun misc launcher app class loader load class launcher java 268 java lang class loader load class class loader java 251 java lang class loader load class internal class loader java 319 com mprv secsph test get objs test java com mprv secsph ttt foo test java 34 com mprv secsph test main test java 27 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 java lang reflect method invoke method java 585 com intellij rt execution application app main main app main java 86 go aspects exception doesn happen all time you try few times you probably get may you can understand what problem event without running test case anyway took look your code have guess only guess my aspect application classpath actually same package so may you trying weave aspect itself somehow thanks misha load time weaving exception from weaver
am trying out recent dev build aspect am now seeing new linkage error when load web app contains xml deployment descriptor trying narrow down date when error first appeared build run sept 23 dev build all works properly build run nov 14 dev build fails like here output severe error deploying descriptor jpetstore xml java lang linkage error org apache xerces jaxp saxparser factory impl already defined loader java lang class loader define class ljava lang string biiljava security protection domain ljava lang class unknown source java security secure class loader define class secure class loader java 124 org apache catalina loader webapp class loader find class internal webapp class loader java 1629 org apache catalina loader webapp class loader find class webapp class loader java 850 org apache catalina loader webapp class loader load class webapp class loader java 1299 org apache catalina loader webapp class loader load class webapp class loader java 1181 javax xml parsers factory finder new instance factory finder java 88 javax xml parsers factory finder find jar service provider factory finder java 278 javax xml parsers factory finder find factory finder java 185 javax xml parsers saxparser factory new instance saxparser factory java 107 org apache tomcat util digester digester get factory digester java 486 org apache tomcat util digester digester get parser digester java 691 org apache tomcat util digester digester get xmlreader digester java 899 org apache tomcat util digester digester parse digester java 1561 org apache catalina startup tld config tld scan stream tld config java 513 org apache catalina startup tld config tld scan tld tld config java 545 org apache catalina startup tld config execute tld config java 300 org apache catalina core standard context process tlds standard context java 4193 org apache catalina core standard context start standard context java 4049 org apache catalina core container base add child internal container base java 759 org apache catalina core container base add child container base java 739 org apache catalina core standard host add child standard host java 524 org apache catalina startup host config deploy descriptor host config java 589 org apache catalina startup host config deploy descriptors host config java 536 org apache catalina startup host config deploy apps host config java 471 org apache catalina startup host config start host config java 1102 org apache catalina startup host config lifecycle event host config java 311 org apache catalina util lifecycle support fire lifecycle event lifecycle support java 119 org apache catalina core container base start container base java 1020 org apache catalina core standard host start standard host java 718 org apache catalina core container base start container base java 1012 error can determine implemented interfaces missing type javax xml rpc call when matching pointcut within call public javax xml rpc call invoke target binding type pattern java lang object boolean glassbox inspector monitor resource remote call monitor ajc 12 persingleton glassbox inspector monitor resource remote call monitor when matching shadow method call boolean org apache crimson parser content model empty when weaving type org apache crimson parser content model when weaving classes when weaving abort trouble final class org apache crimson parser content model extends java lang object public char type public object content public org apache crimson parser content model next private org apache crimson parser simple hashtable cache public void init string aload org apache crimson parser content model line 116 java lang object init constructor execution void org apache crimson parser content model init java lang string aload org apache crimson parser content model line 110 new org apache crimson parser simple hashtable dup constructor call void org apache crimson parser simple hashtable init org apache crimson parser simple hashtable init constructor call void org apache crimson parser simple hashtable init putfield org apache crimson parser content model cache lorg apache crimson parser simple hashtable aload org apache crimson parser content model line 117 iconst putfield org apache crimson parser content model type aload org apache crimson parser content model line 118 aload java lang string element putfield org apache crimson parser content model content ljava lang object return line 119 constructor execution void org apache crimson parser content model init java lang string end public void init string public void init char org apache crimson parser content model aload org apache crimson parser content model line 125 java lang object init constructor execution void org apache crimson parser content model init char org apache crimson parser content model aload org apache crimson parser content model line 110 new org apache crimson parser simple hashtable dup constructor call void org apache crimson parser simple hashtable init org apache crimson parser simple hashtable init constructor call void org apache crimson parser simple hashtable init putfield org apache crimson parser content model cache lorg apache crimson parser simple hashtable aload org apache crimson parser content model line 126 iload char type putfield org apache crimson parser content model type aload org apache crimson parser content model line 127 aload org apache crimson parser content model content putfield org apache crimson parser content model content ljava lang object return line 128 constructor execution void org apache crimson parser content model init char org apache crimson parser content model end public void init char org apache crimson parser content model public boolean empty method execution boolean org apache crimson parser content model empty aload org apache crimson parser content model line 137 getfield org apache crimson parser content model type lookupswitch l1 42 l0 43 l1 44 l7 63 l0 124 l2 default l13 l0 iconst line 140 ireturn l1 iconst line 144 ireturn l2 aload org apache crimson parser content model line 147 getfield org apache crimson parser content model content ljava lang object instanceof org apache crimson parser content model ifeq l3 aload org apache crimson parser content model getfield org apache crimson parser content model content ljava lang object checkcast org apache crimson parser content model method call boolean org apache crimson parser content model empty org apache crimson parser content model empty method call boolean org apache crimson parser content model empty ifeq l3 iconst line 149 ireturn l3 aload org apache crimson parser content model line 151 getfield org apache crimson parser content model next lorg apache crimson parser content model astore goto l6 l4 aload org apache crimson parser content model line 154 org apache crimson parser content model empty ifeq l5 iconst line 155 ireturn l5 aload org apache crimson parser content model line 153 getfield org apache crimson parser content model next lorg apache crimson parser content model astore org apache crimson parser content model l6 aload org apache crimson parser content model line 152 ifnonnull l4 iconst line 157 ireturn l7 aload org apache crimson parser content model line 160 getfield org apache crimson parser content model content ljava lang object instanceof org apache crimson parser content model ifeq l8 aload org apache crimson parser content model line 161 getfield org apache crimson parser content model content ljava lang object checkcast org apache crimson parser content model org apache crimson parser content model empty ifne l9 iconst line 162 ireturn l8 iconst line 165 ireturn l9 aload org apache crimson parser content model line 167 getfield org apache crimson parser content model next lorg apache crimson parser content model astore goto l12 l10 aload org apache crimson parser content model line 170 org apache crimson parser content model empty ifne l11 iconst line 171 ireturn l11 aload org apache crimson parser content model line 169 getfield org apache crimson parser content model next lorg apache crimson parser content model astore org apache crimson parser content model l12 aload org apache crimson parser content model line 168 ifnonnull l10 iconst line 173 ireturn l13 new java lang internal error line 176 dup java lang internal error init athrow method execution boolean org apache crimson parser content model empty end public boolean empty public boolean first string aload org apache crimson parser content model line 186 getfield org apache crimson parser content model cache lorg apache crimson parser simple hashtable aload java lang string token org apache crimson parser simple hashtable get ljava lang string ljava lang object checkcast java lang boolean astore aload java lang boolean line 189 ifnull l0 aload java lang boolean line 190 java lang boolean boolean value ireturn l0 aload org apache crimson parser content model line 193 getfield org apache crimson parser content model type lookupswitch l1 42 l1 43 l1 44 l5 63 l1 124 l12 default l16 l1 aload org apache crimson parser content model line 198 getfield org apache crimson parser content model content ljava lang object instanceof java lang string ifeq l4 aload org apache crimson parser content model line 199 getfield org apache crimson parser content model content ljava lang object aload java lang string token acmpne l2 iconst goto l3 l2 iconst l3 istore goto l17 l4 aload org apache crimson parser content model line 201 getfield org apache crimson parser content model content ljava lang object checkcast org apache crimson parser content model aload java lang string token org apache crimson parser content model first ljava lang string istore boolean retval goto l17 line 202 l5 aload org apache crimson parser content model line 205 getfield org apache crimson parser content model content ljava lang object instanceof java lang string ifeq l8 aload org apache crimson parser content model line 206 getfield org apache crimson parser content model content ljava lang object aload java lang string token acmpne l6 iconst goto l7 l6 iconst l7 istore boolean retval goto l17 l8 aload org apache crimson parser content model line 207 getfield org apache crimson parser content model content ljava lang object checkcast org apache crimson parser content model aload java lang string token org apache crimson parser content model first ljava lang string ifeq l9 iconst line 208 istore boolean retval goto l17 l9 aload org apache crimson parser content model line 209 getfield org apache crimson parser content model content ljava lang object checkcast org apache crimson parser content model org apache crimson parser content model empty ifne l10 iconst line 210 istore boolean retval goto l17 l10 aload org apache crimson parser content model line 211 getfield org apache crimson parser content model next lorg apache crimson parser content model ifnull l11 aload org apache crimson parser content model line 212 getfield org apache crimson parser content model next lorg apache crimson parser content model aload java lang string token org apache crimson parser content model first ljava lang string istore boolean retval goto l17 l11 iconst line 214 istore boolean retval goto l17 line 215 l12 aload org apache crimson parser content model line 218 getfield org apache crimson parser content model content ljava lang object instanceof java lang string ifeq l13 aload org apache crimson parser content model getfield org apache crimson parser content model content ljava lang object aload java lang string token acmpne l13 iconst line 219 istore boolean retval goto l17 l13 aload org apache crimson parser content model line 220 getfield org apache crimson parser content model content ljava lang object checkcast org apache crimson parser content model aload java lang string token org apache crimson parser content model first ljava lang string ifeq l14 iconst line 221 istore boolean retval goto l17 l14 aload org apache crimson parser content model line 222 getfield org apache crimson parser content model next lorg apache crimson parser content model ifnull l15 aload org apache crimson parser content model line 223 getfield org apache crimson parser content model next lorg apache crimson parser content model aload java lang string token org apache crimson parser content model first ljava lang string istore boolean retval goto l17 l15 iconst line 225 istore boolean retval goto l17 line 226 l16 new java lang internal error line 229 dup java lang internal error init athrow l17 iload boolean retval line 233 ifeq l18 aload org apache crimson parser content model line 234 getfield org apache crimson parser content model cache lorg apache crimson parser simple hashtable aload java lang string token getstatic java lang boolean true ljava lang boolean org apache crimson parser simple hashtable put ljava lang object ljava lang object ljava lang obj ect pop goto l19 l18 aload org apache crimson parser content model line 236 getfield org apache crimson parser content model cache lorg apache crimson parser simple hashtable aload java lang string token getstatic java lang boolean false ljava lang boolean org apache crimson parser simple hashtable put ljava lang object ljava lang object ljava lang obj ect pop l19 iload boolean retval line 238 ireturn end public boolean first string end final class org apache crimson parser content model xml linkage error ltw
have reusable library code imports type jax rpc call case use two ways matching method signature casting use advice body used work properly when used load time weaving without call type being available classpath think broke last week however am now getting abort error can determine implemented interfaces missing type when weaving aspect another type when imported call type isnt visible classloader tried changing code remove import use fully qualified name pointcut reflective invocation advice body however still fails same way pointcuts presumably causing error public abstract aspect abstract request monitor protected pointcut scope within true protected pointcut monitor enabled monitor enabled scope protected abstract pointcut monitor enabled public abstract aspect abstract resource monitor extends abstract request monitor public aspect remote call monitor extends abstract resource monitor protected pointcut monitor enabled aspect enabled public pointcut jax rpc client call object ws call obj call public javax xml rpc call invoke target ws call obj object around final object ws call obj jax rpc client call ws call obj monitor enabled here output org aspectj bridge abort exception can determine implemented interfaces missing type javax xml rpc call when matching pointcut within call public javax xml rpc call invoke target binding type pattern java lang object boolean glassbox inspector monitor resource remote call monitor ajc 12 persingleton glassbox inspector monitor resource remote call monitor when matching shadow method call java util locale java util locale get default when weaving type org apache struts action action servlet when weaving classes when weaving org aspectj weaver tools weaving adaptor weaving adaptor message handler handle messa ge weaving adaptor java 364 org aspectj bridge message util error message util java 81 org aspectj weaver missing resolved type known signature raise cant find type missing resolved type known signature java 195 org aspectj weaver missing resolved type known signature get declared interfaces missing resolved type known signature java 77 org aspectj weaver resolved type get direct supertypes resolved type java 64 org aspectj weaver reference type assignable from reference type java 312 org aspectj weaver reference type assignable from reference type java 236 org aspectj weaver patterns kinded pointcut warn confusing sig kinded pointcut java 151 org aspectj weaver patterns kinded pointcut match internal kinded pointcut java 108 org aspectj weaver patterns pointcut match pointcut java 145 org aspectj weaver patterns pointcut match internal pointcut java 57 org aspectj weaver patterns pointcut match pointcut java 145 org aspectj weaver patterns pointcut match internal pointcut java 55 org aspectj weaver patterns pointcut match pointcut java 145 org aspectj weaver patterns pointcut match internal pointcut java 55 org aspectj weaver patterns pointcut match pointcut java 145 org aspectj weaver patterns pointcut match internal pointcut java 55 org aspectj weaver patterns pointcut match pointcut java 145 org aspectj weaver shadow munger match shadow munger java 64 org aspectj weaver advice match advice java 109 org aspectj weaver bcel bcel advice match bcel advice java 98 org aspectj weaver bcel bcel class weaver match bcel class weaver java 2098 org aspectj weaver bcel bcel class weaver match invoke instruction bcel class weaver java 2085 org aspectj weaver bcel bcel class weaver match bcel class weaver java 1867 org aspectj weaver bcel bcel class weaver match init bcel class weaver java 1731 org aspectj weaver bcel bcel class weaver match bcel class weaver java 1660 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 445 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 101 org aspectj weaver bcel bcel weaver weave bcel weaver java 1531 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1485 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1266 org aspectj weaver bcel bcel weaver weave bcel weaver java 1088 org aspectj weaver tools weaving adaptor get woven bytes weaving adaptor java 266 org aspectj weaver tools weaving adaptor weave class weaving adaptor java 198 org aspectj weaver loadtime aj pre process aj java 67 org aspectj weaver loadtime class pre processor agent adapter transform class pre processor agent adapter java 52 unexpected error can determine implemented interfaces missing type
code below overflows when concretizing circular pointcut from aspect true when aspect public class self pc public static void main string args new foo static class pointcut doit doit ce expected void foo pertarget static abstract aspect pt parm pertarget pc abstract protected pointcut pc before pc static aspect cpt parm extends pt parm protected pointcut pc doit issingleton static abstract aspect parm abstract protected pointcut pc before pc static aspect cis parm extends parm protected pointcut pc doit pertarget static abstract aspect pt pertarget pc abstract protected pointcut pc before pc static aspect cpt extends pt protected pointcut pc doit issingleton static abstract aspect sis abstract protected pointcut pc before pc static aspect csis extends sis protected pointcut pc doit java lang stack overflow error java lang string buffer append string buffer java 225 org aspectj weaver unresolved type name signature unresolved type java 734 org aspectj weaver unresolved type name unresolved type java 308 org aspectj ajdt internal compiler lookup eclipse factory from binding eclipse factory java 302 org aspectj ajdt internal compiler lookup eclipse factory from eclipse eclipse factory java 129 org aspectj ajdt internal compiler lookup eclipse source type get superclass eclipse source type java 119 org aspectj weaver reference type get superclass reference type java 481 org aspectj weaver resolved type get direct supertypes resolved type java 65 org aspectj weaver resolved type get resolved type java 447 org aspectj weaver iterators next iterators java 148 org aspectj weaver iterators has next iterators java 117 org aspectj weaver iterators has next iterators java 128 org aspectj weaver resolved type find pointcut resolved type java 466 org aspectj weaver patterns reference pointcut concretize1 reference pointcut java 269 org aspectj weaver patterns pointcut concretize pointcut java 229 org aspectj weaver patterns reference pointcut concretize1 reference pointcut java 326 org aspectj weaver patterns pointcut concretize pointcut java 229 stack overflow error circular pointcut iff aspect
build id aspect version 200510141300 following aspect resulted cfe public aspect call trace marker interface used pick classes trace declare any class you want trace implement interface best way using aspect like one class comment block above public static interface traced marker annoation can used instead link traced documented retention retention policy runtime target element type type element type annotation type public interface traced anno private static level level level info set global logging level used reporting traced calls defaults info param new level public static void set level level new level level new level return level used writing traced output public static level get level return level private static logger log logger get logger traced class private int nesting private static string buffer prefix str null static new string buffer 1024 int 128 stuff prefix str append public pointcut exclusions within call trace within tracer distinguish between jps other method calls work around aj limitation around advice isn supported public pointcut trace intf init traced new public pointcut trace intf call traced public pointcut trace anno init com adteractive new target traced anno public pointcut trace anno call com adteractive target traced anno public pointcut trace init exclusions trace intf init trace anno init public pointcut trace exclusions trace intf trace anno before trace init nesting string pre prefix str substring nesting log log level pre join point static part after trace init string pre prefix str substring nesting log log level pre join point static part nesting object around trace nesting string pre prefix str substring nesting log log level pre join point static part object result proceed log log level pre join point static part nesting return result separate aspect used declare parent declare type either marker interface annotation thereby adding tracing user specified classes public aspect call trace test tracer declare type com me foo call trace traced anno declare parents com me foo implements call trace traced exception wasn thrown previous version when used just before advice both trace trace init pointcuts org aspectj apache bcel classfile class format exception org aspectj apache bcel classfile utility type signature utility java 1293 org aspectj apache bcel generic type get type internal type java 166 org aspectj apache bcel generic type get type internal type java 174 org aspectj apache bcel generic type get type type java 155 org aspectj weaver bcel bcel world make bcel type bcel world java 198 org aspectj weaver bcel bcel shadow create method gen bcel shadow java 2999 org aspectj weaver bcel bcel shadow extract method bcel shadow java 2826 org aspectj weaver bcel bcel shadow weave around inline bcel shadow java 2020 org aspectj weaver bcel bcel advice implement bcel advice java 211 org aspectj weaver shadow implement mungers shadow java 514 org aspectj weaver shadow implement shadow java 391 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 1781 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 394 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 98 org aspectj weaver bcel bcel weaver weave bcel weaver java 1464 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1429 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1203 org aspectj weaver bcel bcel weaver weave bcel weaver java 1039 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 300 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj jdt internal core builder aj build manager perform compilation aj build manager java 759 org aspectj ajdt internal core builder aj build manager do build aj build manager java 249 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 158 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 trouble public class com adteractive framework test condition test filter test extends junit framework test case com adteractive framework condition test filter ctf signature lcom adteractive framework condition test filter lcom adteractive framework test input stub lcom adteractive framework test output stub static class class private static final org aspectj lang join point static part ajc tjp public void init aload com adteractive framework test condition test filter test line 16 junit framework test case init constructor execution void com adteractive framework test condition test filter test init aload com adteractive framework test condition test filter test line 17 aconst null putfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter return line 16 constructor execution void com adteractive framework test condition test filter test init end public void init protected void set up throws java lang exception org aspectj weaver method declaration line number 23 543 method execution void com adteractive framework test condition test filter test set up aload com adteractive framework test condition test filter test line 24 junit framework test case set up aload com adteractive framework test condition test filter test line 25 new com adteractive framework test condition test filter stub dup ldc ctf aload com adteractive framework test condition test filter test astore method call com adteractive framework filter com adteractive framework test condition test filter test make branches aload com adteractive framework test condition test filter test make branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework test condition test filter test make branches com adteractive framework test condition test filter stub init ljava lang string lcom adteractive framework filter putfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter return line 26 method execution void com adteractive framework test condition test filter test set up end protected void set up throws java lang exception public void test execute org aspectj weaver method declaration line number 31 754 method execution void com adteractive framework test condition test filter test test execute aload com adteractive framework test condition test filter test line 32 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter new com adteractive framework test input stub dup com adteractive framework test input stub init method call com adteractive framework output com adteractive framework condition test filter execute com adteractive framework input com adteractive framework condition test filter execute lcom adteractive framework input lcom adteractive framework output method call com adteractive framework output com adteractive framework condition test filter execute com adteractive framework input checkcast com adteractive framework test output stub astore ldc bf12 line 33 aload com adteractive framework test output stub output method call com adteractive framework status com adteractive framework test output stub get status com adteractive framework test output stub get status lcom adteractive framework status method call com adteractive framework status com adteractive framework test output stub get status method call java lang string com adteractive framework status get additional message com adteractive framework status get additional message ljava lang string method call java lang string com adteractive framework status get additional message method call void junit framework assert assert equals java lang string java lang string invokestatic com adteractive framework test condition test filter test assert equals ljava lang string ljava lang string method call void junit framework assert assert equals java lang string java lang string aload com adteractive framework test condition test filter test line 34 new com adteractive framework test condition test filter stub dup com adteractive framework test condition test filter stub init putfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter aload com adteractive framework test condition test filter test line 35 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter new com adteractive framework test input stub dup com adteractive framework test input stub init method call com adteractive framework output com adteractive framework condition test filter execute com adteractive framework input com adteractive framework condition test filter execute lcom adteractive framework input lcom adteractive framework output method call com adteractive framework output com adteractive framework condition test filter execute com adteractive framework input checkcast com adteractive framework test output stub astore com adteractive framework test output stub output aload com adteractive framework test output stub output line 36 method call void junit framework assert assert null java lang object invokestatic com adteractive framework test condition test filter test assert null ljava lang object method call void junit framework assert assert null java lang object return line 37 method execution void com adteractive framework test condition test filter test test execute end public void test execute public void test get filter branches org aspectj weaver method declaration line number 42 1111 method execution void com adteractive framework test condition test filter test test get filter branches aload com adteractive framework test condition test filter test line 43 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches com adteractive framework condition test filter get filter branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches method call void junit framework assert assert null java lang object invokestatic com adteractive framework test condition test filter test assert null ljava lang object method call void junit framework assert assert null java lang object iconst line 44 aload com adteractive framework test condition test filter test getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches com adteractive framework condition test filter get filter branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches arraylength method call void junit framework assert assert equals int int invokestatic com adteractive framework test condition test filter test assert equals ii method call void junit framework assert assert equals int int aload com adteractive framework test condition test filter test line 45 new com adteractive framework test condition test filter stub dup com adteractive framework test condition test filter stub init putfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter aload com adteractive framework test condition test filter test line 46 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches com adteractive framework condition test filter get filter branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches method call void junit framework assert assert null java lang object invokestatic com adteractive framework test condition test filter test assert null ljava lang object method call void junit framework assert assert null java lang object return line 47 method execution void com adteractive framework test condition test filter test test get filter branches end public void test get filter branches public void test set filter branches org aspectj weaver method declaration line number 52 1441 method execution void com adteractive framework test condition test filter test test set filter branches aload com adteractive framework test condition test filter test line 53 method call com adteractive framework filter com adteractive framework test condition test filter test make branches com adteractive framework test condition test filter test make branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework test condition test filter test make branches astore aload com adteractive framework test condition test filter test line 54 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter aload com adteractive framework filter branches method call void com adteractive framework condition test filter set filter branches com adteractive framework filter com adteractive framework condition test filter set filter branches lcom adteractive framework filter method call void com adteractive framework condition test filter set filter branches com adteractive framework filter aload com adteractive framework test condition test filter test line 55 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches com adteractive framework condition test filter get filter branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches method call void junit framework assert assert null java lang object invokestatic com adteractive framework test condition test filter test assert null ljava lang object method call void junit framework assert assert null java lang object iconst line 56 aload com adteractive framework test condition test filter test getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches com adteractive framework condition test filter get filter branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches arraylength method call void junit framework assert assert equals int int invokestatic com adteractive framework test condition test filter test assert equals ii method call void junit framework assert assert equals int int aload com adteractive framework test condition test filter test line 57 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter aconst null method call void com adteractive framework condition test filter set filter branches com adteractive framework filter com adteractive framework condition test filter set filter branches lcom adteractive framework filter method call void com adteractive framework condition test filter set filter branches com adteractive framework filter aload com adteractive framework test condition test filter test line 58 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches com adteractive framework condition test filter get filter branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches method call void junit framework assert assert null java lang object invokestatic com adteractive framework test condition test filter test assert null ljava lang object method call void junit framework assert assert null java lang object return line 59 method execution void com adteractive framework test condition test filter test test set filter branches end public void test set filter branches public void test condition test filter org aspectj weaver method declaration line number 64 1847 method execution void com adteractive framework test condition test filter test test condition test filter aload com adteractive framework test condition test filter test line 65 new com adteractive framework test condition test filter stub dup com adteractive framework test condition test filter stub init putfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter aload com adteractive framework test condition test filter test line 66 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches com adteractive framework condition test filter get filter branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches method call void junit framework assert assert null java lang object invokestatic com adteractive framework test condition test filter test assert null ljava lang object method call void junit framework assert assert null java lang object ldc com adteractive framework test condition test filter stub line 67 method call java lang string java lang class get simple name java lang class get simple name ljava lang string method call java lang string java lang class get simple name aload com adteractive framework test condition test filter test getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call java lang string com adteractive framework filter helper get name com adteractive framework filter helper get name ljava lang string method call java lang string com adteractive framework filter helper get name method call void junit framework assert assert equals java lang string java lang string invokestatic com adteractive framework test condition test filter test assert equals ljava lang string ljava lang string method call void junit framework assert assert equals java lang string java lang string return line 68 method execution void com adteractive framework test condition test filter test test condition test filter end public void test condition test filter public void test condition test filter string org aspectj weaver method declaration line number 73 2158 method execution void com adteractive framework test condition test filter test test condition test filter string aload com adteractive framework test condition test filter test line 74 new com adteractive framework test condition test filter stub dup ldc foo com adteractive framework test condition test filter stub init ljava lang string putfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter aload com adteractive framework test condition test filter test line 75 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches com adteractive framework condition test filter get filter branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches method call void junit framework assert assert null java lang object invokestatic com adteractive framework test condition test filter test assert null ljava lang object method call void junit framework assert assert null java lang object ldc foo line 76 aload com adteractive framework test condition test filter test getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call java lang string com adteractive framework filter helper get name com adteractive framework filter helper get name ljava lang string method call java lang string com adteractive framework filter helper get name method call void junit framework assert assert equals java lang string java lang string invokestatic com adteractive framework test condition test filter test assert equals ljava lang string ljava lang string method call void junit framework assert assert equals java lang string java lang string return line 77 method execution void com adteractive framework test condition test filter test test condition test filter string end public void test condition test filter string public void test condition test filter string filter ioarray org aspectj weaver method declaration line number 82 2456 method execution void com adteractive framework test condition test filter test test condition test filter string filter ioarray aload com adteractive framework test condition test filter test line 83 new com adteractive framework test condition test filter stub dup ldc foo aload com adteractive framework test condition test filter test method call com adteractive framework filter com adteractive framework test condition test filter test make branches com adteractive framework test condition test filter test make branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework test condition test filter test make branches com adteractive framework test condition test filter stub init ljava lang string lcom adteractive framework filter putfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter aload com adteractive framework test condition test filter test line 84 getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches com adteractive framework condition test filter get filter branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches method call void junit framework assert assert null java lang object invokestatic com adteractive framework test condition test filter test assert null ljava lang object method call void junit framework assert assert null java lang object iconst line 85 aload com adteractive framework test condition test filter test getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches com adteractive framework condition test filter get filter branches lcom adteractive framework filter method call com adteractive framework filter com adteractive framework condition test filter get filter branches arraylength method call void junit framework assert assert equals int int invokestatic com adteractive framework test condition test filter test assert equals ii method call void junit framework assert assert equals int int ldc foo line 86 aload com adteractive framework test condition test filter test getfield com adteractive framework test condition test filter test ctf lcom adteractive framework condition test filter method call java lang string com adteractive framework filter helper get name com adteractive framework filter helper get name ljava lang string method call java lang string com adteractive framework filter helper get name method call void junit framework assert assert equals java lang string java lang string invokestatic com adteractive framework test condition test filter test assert equals ljava lang string ljava lang string method call void junit framework assert assert equals java lang string java lang string return line 87 method execution void com adteractive framework test condition test filter test test condition test filter string filter ioarray end public void test condition test filter string filter ioarray private com adteractive framework filter make branches org aspectj weaver method declaration line number 89 2749 method execution com adteractive framework filter com adteractive framework test condition test filter test make branches iconst line 90 anewarray com adteractive framework test filter helper stub astore aload com adteractive framework filter branches line 91 iconst new com adteractive framework test filter helper stub dup ldc bf1 com adteractive framework test filter helper stub init ljava lang string aastore aload com adteractive framework filter branches line 92 iconst new com adteractive framework test filter helper stub dup ldc bf12 com adteractive framework test filter helper stub init ljava lang string aastore aload com adteractive framework filter branches line 93 iconst new com adteractive framework test filter helper stub dup ldc bf com adteractive framework test filter helper stub init ljava lang string aastore aload com adteractive framework filter branches line 94 areturn method execution com adteractive framework filter com adteractive framework test condition test filter test make branches end private com adteractive framework filter make branches end public class com adteractive framework test condition test filter test when implementing shadow method call com adteractive framework filter com adteractive framework test condition test filter test make branches when weaving type com adteractive framework test condition test filter test when weaving classes when weaving when building build config cygwin home dwampler work workspace metadata plugins org eclipse ajdt core adserver service generated lst files 259 class format exception tracing aspect
working aspect should raise error junit test methods didn use any assertions apparently had use pointcut like call void assert assert which ajdt compiler complained about using assert keyword don think warning should shown case anyway here complete aspect code import junit framework test import junit framework assert import junit framework assertion failed error public aspect assertion counter private thread local counts new thread local public pointcut test method execution execution void test test public pointcut assert call cflow test method execution call void assert assert void around test method execution counts set new counter proceed counter counts get get count throw new assertion failed error assertions had been called before assert call counter counts get inc ajdt compiler generate false warnings
compiler makes warning aspectrt jar file has different name like aspectrt jar which case when compiling maven warning couldn find aspectjrt jar classpath
annotated itd fields interfaces have annotation
itd method declared interface anonymous inner class returned result compiler generates error any super xxx calls anonymous inner class example project shows nested inner interface same problem occurs itd kind any interface error does occur itd declared inner class shown example normal class itds problem itd interface
declare parents does work bytecode weaving
when compiling program ajc public aspect wildcard class extends wildcard wildcard cl void foo throws exception wildcard ci cl new instance ajc throws exception java lang null pointer exception org aspectj org eclipse jdt internal compiler lookup capture binding initialize bounds capture binding java 75 org aspectj org eclipse jdt internal compiler lookup type binding capture type binding java 105 org aspectj org eclipse jdt internal compiler ast single name reference resolve type single name reference java 772 org aspectj org eclipse jdt internal compiler ast message send resolve type message send java 293 org aspectj org eclipse jdt internal compiler ast local declaration resolve local declaration java 199 org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve statements abstract method declaration java 422 org aspectj org eclipse jdt internal compiler ast method declaration resolve statements method declaration java 178 org aspectj org eclipse jdt internal compiler ast abstract method declaration resolve abstract method declaration java 400 org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1076 org aspectj ajdt internal compiler ast aspect declaration resolve aspect declaration java 114 org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1125 org aspectj org eclipse jdt internal compiler ast compilation unit declaration resolve compilation unit declaration java 305 org aspectj org eclipse jdt internal compiler compiler process compiler java 514 org aspectj org eclipse jdt internal compiler compiler compile compiler java 329 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 759 org aspectj ajdt internal core builder aj build manager do build aj build manager java 225 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 151 org aspectj ajdt ajc ajdt command do command ajdt command java 112 org aspectj ajdt ajc ajdt command run command ajdt command java 60 org aspectj tools ajc main run main java 326 org aspectj tools ajc main run main main java 240 org aspectj tools ajc main main main java 83 npe capture binding java wildcard intertype field type
clearly define what goal read aspect old byte per byte reading cause npe some test case current impl hashcode aspect name classloader ie unstable across startups read aspect
am trying weave tomcat system level aspect meta inf aop xml found jar system classpath also have web application aop xml properly deployed when try run them both together only system level aspects work remove system level aspect jar from classpath application level aspects work what would reasonable way isolate test case could package up simple system jar app war file tomcat would useful you use debugging tried making simple standalone version aop xml files same app classloader works just fine load time weaving problem aspect definition levels hierarchy
hi when compiling following example getting errors test aspect aj 21 error incompatible return type applying field get java util set com mprv secsph test ints set test java 18 error incompatible return type applying field get java util set com mprv secsph test ints set here example java code package com public class test set integer ints set public set integer foo 18 return ints set aspect public privileged aspect test aspect pointcut getting member test target get public set integer com within test aspect 21 set integer around test getting member collection set proceed return ve tried many kinds workarounds only thing which worked defining member field without using generics regular set one more disturbing fiture worked m2 release example worked my project m2 now also reports same error java code same aspect public privileged aspect test aspect pointcut getting member test target get public set com within test aspect set around test getting member collection set proceed return bug am doing something wrong thanks misha generics field get problems when generic field used
code interface interface aspect declare field int field interface should error don get error even though field doesn exist try declare field class field do get error though declare field allowed non existent fields
test ajdt install bean example add new interface called add following line bound point aj declare parents hasmethod set implements now open aspect compiler preference page select has member advanced tab click ok rebuild option working project would build correctly stands error type pattern hasmethod set can only used when xhas member option set xhas member processed correctly when passed from ajdt
alex here basic patch working well before you leave weekend ll let matthew post officially bugzilla since his idea earlier return from enabled small addition made seems help further would great have head so can report performance numbers based part my article hope you enjoying your new addition thanks index class loader weaving adaptor java rcs file home technology org aspectj modules loadtime src org aspectj weaver loadtim class loader weaving adaptor java retrieving revision 18 diff r1 18 class loader weaving adaptor java class loader weaving adaptor java 19 oct 2005 13 11 36 0000 18 class loader weaving adaptor java 21 oct 2005 16 04 41 0000 107 107 13 register definitions register definitions weaver loader enabled return message handler bcel world get message handler bcel world set resolution loader class loader null loader get parent after adding aspects weaver prepare weave 148 153 11 definitions add document parser parse xml definitions empty enabled false return still go thru definitions empty since we configure default message handler register options weaver loader definitions ltw enhancements
org aspectj weaver bcexception org aspectj weaver patterns reference pointcut concretize1 reference pointcut java 306 org aspectj weaver patterns pointcut concretize pointcut java 229 org aspectj weaver patterns reference pointcut concretize1 reference pointcut java 331 org aspectj weaver patterns pointcut concretize pointcut java 229 org aspectj weaver patterns pointcut concretize pointcut java 216 org aspectj weaver advice concretize advice java 273 org aspectj weaver bcel bcel advice concretize bcel advice java 83 org aspectj weaver crosscutting members add shadow munger crosscutting members java 84 org aspectj weaver crosscutting members add shadow mungers crosscutting members java 78 org aspectj weaver resolved type collect crosscutting members resolved type java 462 org aspectj weaver crosscutting members set add replace aspect crosscutting members set java 62 org aspectj weaver bcel bcel weaver prepare weave bcel weaver java 426 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 283 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 178 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 367 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 760 org aspectj ajdt internal core builder aj build manager do build aj build manager java 225 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 151 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 bcexception thrown illegal change pointcut declaration spike np command case handle command binding type pattern spike np other handler my world when batch building build config home guido workspace metadata plugins org eclipse ajdt core np generated lst files 11 illegal change pointcut declaration
given following class interface annotation aspect declare method public another method annotation class aspect public void another method string public void another method would expect two weaveinfo messages form weaveinfo public void another method pr99191 java annotated annotation method annotation from pr99191 java weaveinfo public void another method string pr99191 java annotated annotation method annotation from pr99191 java however only two intertyped messages coming out weaveinfo messages reported applying declare method itd method
0m4 get error parameter tis bound all branches pointcut true untested other development versions branches all duplicate package demo per public class per public static void main string args new test aspect per test perthis pc tut index example basic perthis pointcut pc within per test call void run before tis pc tis system out println bef tis class int void test run void run system out println run unexpected error unbound formal pc
ajc doesn recognize windows absolute file paths don start drive letter run ajc inpath test jar error build config error bad inpath component test jar ajc inpath test jar works ajc aspectpath test jar test aj error build config error bad aspectpath test jar ajc aspectpath test jar test aj works aspectpath inpath arguments fail without drive letter
ajc compile crash giving information which class file cause
compiler core dump apparent fix
currently ajdoc only exposes advises advised from structure model needs support inter type field member declarations using ui similar how javadoc presents inherited members also needs support other declare forms error warning soft parents precedence ajdoc add ajdoc support inter type declarations other declare forms
my project when save aspect calls inter type declaration defined itself incremental compiler gives message like method log error string exception undefined type foo foo java running full build clears error might compiler bug might ajdt never run command line incremental compilation so don know simple test cases extracts just aspects aren reproducing issue so let me know you need me spend some time trying create small isolated version issue inc compilation incremental compilation fails itd aspects
order facilitate widespread use ltw we need ensure code compiled xreweavable however we cannot rely developers use flag so must default current code bloat unacceptable large projects xreweavable should default
requires completion parameterize pointcut ast nodes much more exhaustive test suite around complete abstract generic aspects
varargs doesn work itd constructors
advice associated pointcuts match join points inner classes shown declare warning error shown however see attached screenshot example below notice weaveinfo messages indicate problem ajdt aspect also notice phantom entry outline view injar aspect test java package bug nnnnn public class test public void test new runnable public void run try throw new exception catch exception ex handle exception ex public static void handle exception throwable th public static void main string args try throw new exception catch exception ex handle exception ex aspect aspect declare warning call void handle exception within aspect only aspect should handle exceptions pointcut caught exceptions throwable th handler throwable args th before throwable th caught exceptions th test handle exception th advice inner classes show outline view gutter
ensure suppress ajwarnings indeed suppressed during pointcut operations requires wrapping major pointcut operations calls lint from associated advice complete suppress aj warnings
aspect version development also observed when weaving before after advice generated local variable table branch instructions offset length field local variable wrongly one instruction also weaver mix up local variables same name thus violating java vm test aj aspect test before execution foo foo system out println before foo java public class foo private string my string string public static void main string args new foo foo private void foo string my local my string my local ends string local1 local1 system out println local1 else my local ends string local2 local2 system out println local2 else string local1 local3 system out println local1 we compilw ajc sourceroots dumps foo javap javap private foo private void foo signature code invokestatic 65 method test aspect ltest 68 method test ajc before test f0485e90 aload getfield 15 field my string ljava lang string 10 astore 11 aload 12 ldc 30 string 14 36 method java lang string ends ljava lang string 17 ifeq 33 20 ldc 38 string local1 22 astore 23 getstatic 44 field java lang system out ljava io print stream 26 aload 27 50 method java io print stream println ljava lang string 30 goto 65 33 aload 34 ldc 52 string 36 36 method java lang string ends ljava lang string 39 ifeq 55 42 ldc 54 string local2 44 astore 45 getstatic 44 field java lang system out ljava io print stream 48 aload 49 50 method java io print stream println ljava lang string 52 goto 65 55 ldc 56 string local3 57 astore 58 getstatic 44 field java lang system out ljava io print stream 61 aload 62 50 method java io print stream println ljava lang string 65 return line number table line line 11 line 20 line 10 23 line 11 33 line 12 42 line 13 45 line 15 55 line 16 58 line 18 65 local variable table start length slot name signature 60 lfoo 11 55 my local ljava lang string 45 12 local2 ljava lang string 23 43 local1 ljava lang string we see two occurences local1 variable erroneously have been combined one entry starting byte 23 ending byte 66 obviously wrong since local1 has value local2 block secondly local2 variable end wrongly offset one instruction offset weaver produces wrong local variable table bytecode
steps reproduce open birt new project top menu file click new report create report drag table element from palette report layout view save report drag mouse select two cells table select report navigator view top menu select save save pop up dialog window change file name file name field click ok button expected result error click ok button actual result error window pops up error log follows java lang null pointer exception org eclipse gef editparts abstract edit part get root abstract edit part java 587 org eclipse gef editparts abstract edit part get root abstract edit part java 587 org eclipse gef editparts abstract edit part get viewer abstract edit part java 637 org eclipse birt report designer internal ui editors schematic editparts table til get selection cells table util java 258 org eclipse birt report designer internal ui editors schematic editparts table dit part can merge table edit part java 1244 org eclipse birt report designer internal ui editors schematic actions merge act ion calculate enabled merge action java 51 org eclipse gef ui actions workbench part action enabled workbench part action java 111 org eclipse ui actions retarget action set action handler retarget action java 249 org eclipse ui actions retarget action part activated retarget action java 144 org eclipse ui internal part listener list run part listener list java 49 org eclipse core internal runtime internal platform run internal platform java 616 org eclipse core runtime platform run platform java 747 org eclipse ui internal part listener list fire part activated part listener list java 47 org eclipse ui internal workbench page fire part activated workbench page java 1370 org eclipse ui internal workbench page set active part workbench page java 2738 org eclipse ui internal workbench page request activation workbench page java 2415 org eclipse ui internal part pane request activation part pane java 304 org eclipse ui internal editor pane request activation editor pane java 127 org eclipse ui internal part pane handle event part pane java 284 org eclipse swt widgets event table send event event table java 82 org eclipse swt widgets widget send event widget java 796 org eclipse swt widgets widget send event widget java 820 org eclipse swt widgets widget send event widget java 801 org eclipse swt widgets shell set active control shell java 935 org eclipse swt widgets control send focus event control java 1768 org eclipse swt widgets control wm setfocus control java 4139 org eclipse swt widgets canvas wm setfocus canvas java 239 org eclipse swt widgets control window proc control java 3032 org eclipse swt widgets display window proc display java 3338 org eclipse swt internal win32 os set focus native method org eclipse swt widgets control force focus control java 607 org eclipse swt widgets control set focus control java 2054 org eclipse swt widgets composite set focus composite java 447 org eclipse gef ui parts graphical editor set focus graphical editor java 346 org eclipse ui part multi page editor part set focus multi page editor part java 545 org eclipse ui part multi page editor part set focus multi page editor part java 519 org eclipse ui part multi page editor part set focus multi page editor part java 545 org eclipse ui part multi page editor part set focus multi page editor part java 519 org eclipse ui part multi page editor part page change multi page editor part java 433 org eclipse birt report designer ui editors report editor page change report editor java 1179 org eclipse birt report designer ui editors report editor rebuild report design report editor java 584 org eclipse birt report designer ui editors report editor set input report editor java 547 org eclipse birt report designer ui editors report editor perform save report editor java 870 org eclipse birt report designer ui editors report editor do save report editor java 812 org eclipse ui internal save action run save action java 64 org eclipse jface action action run event action java 881 org eclipse jface action action contribution item handle widget selection action contribution item java 915 org eclipse jface action action contribution item access action contribution item java 866 org eclipse jface action action contribution item handle event action contribution item java 785 org eclipse swt widgets event table send event event table java 82 org eclipse swt widgets widget send event widget java 796 org eclipse swt widgets display run deferred events display java 2772 org eclipse swt widgets display read dispatch display java 2431 org eclipse ui internal workbench run event loop workbench java 1377 org eclipse ui internal workbench run ui workbench java 1348 org eclipse ui internal workbench create run workbench workbench java 254 org eclipse ui platform ui create run workbench platform ui java 141 org eclipse ui internal ide run java 96 org eclipse core internal runtime platform activator run platform activator java 335 org eclipse core runtime adaptor eclipse starter run eclipse starter java 273 org eclipse core runtime adaptor eclipse starter run eclipse starter java 129 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 java lang reflect method invoke method java 324 org eclipse core launcher main basic run main java 185 org eclipse core launcher main run main java 704 org eclipse core launcher main main main java 688 null pointer exception when selecting save top menu
problem object arrays clone class
consider following aspect public aspect runnable default impl public void runnable run note makes little sense have default runnable however am using allow easy reproduction bug compiling aspect leads following warning test runnable default impl aj warning affected type exposed weaver java lang runnable xlint type exposed weaver public void runnable run warning isn really necessary weaver doesn shouldn need have runnable exposed fact everything works expected already now good warning even error trying introduce new method following aspect public aspect runnable default impl public void runnable walk unnecessary warning itds
am trying profile jdbc access spring based application since all jdbc interaction performed through spring classes need weave spring jar however many classes referred spring jar aren available me am using implemented many classes when try weave spring jar get errors complaining can find types those classes expected ajc would ignore unknown classes unless weaving would affected content api those classes using jar files refer foreign classes one may never have need common scenario example spring jar refers velocity struts jdo hibernate quartz classes am unlikely use all referred frameworks application bug limitation prevents using aspect jars reproduce bug controlled environment created following aspect which should make weaving process pass thru filter join point matched pointcut class temporary class public aspect weave aspect before call temporary class within org spring weaving aspect spring jar should result logically identical jar file however when compile using following command equivalent ant task get following errors work aop bugs injar nonexisting classes ajc version aspect compiler 1rc1 built friday oct 22 2004 13 31 47 gmt work aop bugs injar nonexisting classes ajc injars spring jar outjar pring woven jar weave aspect java work aop bugs injar nonexisting classes spring jar error can find ty pe org quartz xml job scheduling data processor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org quartz stateful job source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org quartz simple trigger source information available work aop bugs injar nonexisting classes spring jar error can find ty pe freemarker cache template loader source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org quartz cron trigger source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org quartz job detail source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org quartz job source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org quartz impl jdbcjobstore job store cmt source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache struts action plug source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache velocity tools generic number tool source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache struts action action source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache struts tiles tiles request processor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache struts action request processor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache velocity runtime resource loader resource loader source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache velocity runtime log log system source information available work aop bugs injar nonexisting classes spring jar error can find ty pe javax faces el variable resolver source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache velocity tools generic date tool source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache commons attributes attribute repository class source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe net sf cglib proxy method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache commons pool poolable object factory source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe net sf cglib proxy method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe net sf cglib proxy dispatcher source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method invocation source information available work aop bugs injar nonexisting classes spring jar error can find ty pe net sf cglib proxy callback filter source information available work aop bugs injar nonexisting classes spring jar error can find ty pe net sf cglib proxy op source information available work aop bugs injar nonexisting classes spring jar error can find ty pe net sf hibernate transaction transaction manager lookup source information available work aop bugs injar nonexisting classes spring jar error can find ty pe net sf hibernate connection connection provider source information available work aop bugs injar nonexisting classes spring jar error can find ty pe net sf hibernate user type source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org apache ojb broker accesslayer connection factory managed impl source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe net sf cglib proxy method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe net sf cglib proxy callback filter source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method interceptor source information available work aop bugs injar nonexisting classes spring jar error can find ty pe org aopalliance intercept method interceptor source information available 41 errors weaving jar fails some referred classes unavailable
here some suggested enhancements result exhaustive testing eclipse osgi environment aspects declared particular class loader either because visible aop xml files contain aspect definitions we should short circuit weave class so byte code passed weaver especially important under osgi where may hundreds class bundles each own class loader only some which being woven we can use existing enabled flag previously discussed aspectj dev meta inf directory considered private osgi therefore location aop xml files declaring shared aspects therefore propose system property set resource names finding aop xml files which would default meta inf aop xml dorg aspectj weaver loadtime meta inf aop xml org aspectj aop xml we should catching throwable aj instead we should catch known exceptions bcexception issue messages while letting other runtime exceptions pass back class loader user provided imessage handler can decide under what abort aj considered safe interface weaving agents jvmti dump logic contains should moved weaving adaptor so can used directly from class loader weaving adaptor enhancements performance diagnosis
when compiling aspect enabled projects java source mode indirect access static modifier warnings following code incorrectly gives compiler warning doesn occur non aspect enabled projects public class test enum foo wibble wobble woo public static void main string args enum set foo set enum set none foo class invalid indirect static access warning enum set none
non public classes when explicitly named do get woven test case below exhibits problem when package declaration uncommented package declaration commented out class woven correctly package declaration uncommented compilation failure occurs aspect according andrew clement aspect compiles does weave my inner class changed public regardless package declaration status class woven correctly also when my inner class moved out my class kept my class java file following behavior exhibited package declaration commented out class woven correctly package declaration uncommented out compilation failure occurs aspect note case my inner class cannot declared public also appears runnable aspect placed same package my class weaving occurs correctly regardless any class access modifiers my class java package mypackage public class my class public my class my inner class mic new my inner class mic instanceof runnable mic run class my inner class public void run system out println my inner class run public static void main string args new my class my class java runnable aspect aj public aspect runnable aspect declare parents my class my inner class implements runnable declare parents mypackage my class my inner class implements runnable runnable aspect aj problem declare parents when using non public classes
when running ajc gnu interpreter java received error java lang null pointer exception org aspectj apache bcel generic instruction comparator equals org aspectj apache bcel generic instruction org aspectj apache bcel eneric instruction tmp cache local aspectj1 lib jar so org aspectj apache bcel generic instruction equals java lang object tmp cache local aspectj1 lib jar so java util abstract map equals java lang object java lang object usr lib libgcj so java util hash map put java lang object java lang object usr lib libgcj so java util hash set add java lang object usr lib libgcj so org aspectj apache bcel generic instruction handle add targeter org aspectj apache bcel generic instruction targeter tmp cache local aspectj1 lib jar so org aspectj apache bcel generic branch instruction notify target org aspectj apache bcel generic instruction handle org aspectj apache bcel generic instruction handle org aspectj apache bcel generic instruction targeter tmp cache local aspectj1 lib jar so org aspectj apache bcel generic branch instruction set target org aspectj apache bcel generic instruction handle tmp cache local aspe ctj1 lib jar so org aspectj apache bcel generic branch instruction branch instruction short org aspectj apache bcel generic instruction handle tmp ache local aspectj1 lib jar so org aspectj apache bcel generic select select short int org aspectj apache bcel generic instruction handle org aspectj apache cel generic instruction handle tmp cache local aspectj1 lib jar so org aspectj apache bcel generic lookupswitch lookupswitch int org aspectj apache bcel generic instruction handle org aspectj apa che bcel generic instruction handle tmp cache local aspectj1 lib jar so org aspectj apache bcel generic switch switch int org aspectj apache bcel generic instruction handle org aspectj apache bcel gen eric instruction handle int tmp cache local aspectj1 lib jar so org aspectj apache bcel generic switch switch int org aspectj apache bcel generic instruction handle org aspectj apache bcel gen eric instruction handle tmp cache local aspectj1 lib jar so org aspectj weaver bcel utility copy instruction org aspectj apache bcel generic instruction tmp cache local aspectj1 lib aspectj weaver jar so org aspectj weaver bcel lazy method gen pack body org aspectj apache bcel generic method gen tmp cache local aspectj1 lib aspectjwea ver jar so org aspectj weaver bcel lazy method gen pack tmp cache local aspectj1 lib jar so org aspectj weaver bcel lazy method gen get method tmp cache local aspectj1 lib jar so org aspectj weaver bcel lazy class gen write back org aspectj weaver bcel bcel world tmp cache local aspectj1 lib jar so org aspectj weaver bcel lazy class gen get java class org aspectj weaver bcel bcel world tmp cache local aspectj1 lib ar so org aspectj weaver bcel bcel weaver get class files org aspectj weaver bcel lazy class gen tmp cache local aspectj1 lib aspectjwea ver jar so org aspectj weaver bcel bcel weaver weave notify org aspectj weaver bcel unwoven class file org aspectj weaver bcel bcel object type rg aspectj weaver iweave requestor tmp cache local aspectj1 lib jar so org aspectj weaver bcel bcel weaver weave org aspectj weaver iclass file provider tmp cache local aspectj1 lib jar so org aspectj ajdt internal compiler aj compiler adapter weave unknown source org aspectj ajdt internal compiler aj compiler adapter after compiling unknown source org aspectj org eclipse jdt internal compiler compiler compile org aspectj org eclipse jdt internal compiler env icompilation unit unknown source org aspectj ajdt internal core builder aj build manager perform compilation java util list unknown source org aspectj ajdt internal core builder aj build manager do build org aspectj ajdt internal core builder aj build config org aspectj bridg imessage handler boolean unknown source org aspectj ajdt internal core builder aj build manager batch build org aspectj ajdt internal core builder aj build config org aspectj br idge imessage handler unknown source org aspectj ajdt ajc ajdt command do command org aspectj bridge imessage handler boolean unknown source org aspectj ajdt ajc ajdt command run command java lang string org aspectj bridge imessage handler unknown source org aspectj tools ajc main run java lang string org aspectj bridge imessage holder unknown source org aspectj tools ajc main run main java lang string boolean unknown source org aspectj tools ajc main main java lang string unknown source gnu java lang main thread call main usr lib libgcj so gnu java lang main thread run usr lib libgcj so above stack trace contains line number information however running program under gdb debugger able get backtrace line numbers relevant part stack trace gdb bt 0x011a0246 org aspectj apache bcel generic instruction comparator equals org aspectj apache bcel generic instruction org aspectj apache bcel generic instruction 5c71ea8 i1 610fe70 i2 610fc60 org aspectj apache bcel generic instruction comparator java 79 0x011a004e org aspectj apache bcel generic instruction equals java lang object 610fe70 610fc60 org aspectj apache bcel generic instruction java 499 0x031b5f9b java util abstract map equals java lang object java lang object o1 610fe70 o2 610fc60 libjava java util abstract map java 603 0x031cc0ae java util hash map put java lang object java lang object 6483690 key 610fe70 value 2dfc0 libjava java util hash map java 349 0x031cca00 java util hash set add java lang object null 610fe70 libjava java util hash set java 151 0x011b30ad org aspectj apache bcel generic instruction handle add targeter org aspectj apache bcel generic instruction targeter 6949d20 610fe70 org aspectj apache bcel generic instruction handle java 208 0x011861e6 org aspectj apache bcel generic branch instruction notify target org aspectj apache bcel generic instruction handle org aspectj apache bcel generic instruction handle org aspectj apache bcel generic instruction targeter old ih null new ih 6949d20 610fe70 org aspectj apache bcel generic branch instruction java 217 0x01186133 org aspectj apache bcel generic branch instruction set target org aspectj apache bcel generic instruction handle 610fe70 target 6949d20 org aspectj apache bcel generic branch instruction java 205 0x011857ef org aspectj apache bcel generic branch instruction branch instruction short org aspectj apache bcel generic instruction handle 610fe70 opcode 171 target 6949d20 org aspectj apache bcel generic branch instruction java 86 0x011d3489 org aspectj apache bcel generic select select short int org aspectj apache bcel generic instruction handle org aspectj apache bcel generic instruction handle 610fe70 opcode 171 match 6f63b90 targets 6eeabe0 target 6949d20 org aspectj apache bcel generic select java 106 10 0x011c3152 org aspectj apache bcel generic lookupswitch lookupswitch int org aspectj apache bcel generic instruction handle org aspectj apache bcel generic instruction handle 610fe70 match 6f63b90 targets 6eeabe0 target 6949d20 org aspectj apache bcel generic lookupswitch java 80 11 0x011d4f94 org aspectj apache bcel generic switch switch int org aspectj apache bcel generic instruction handle org aspectj apache bcel generic instruction handle int 6a20978 match 5b1ccd0 targets 6eeac08 target 6949d20 max gap org aspectj apache bcel generic switch java 104 12 0x011d5002 org aspectj apache bcel generic switch switch int org aspectj apache bcel generic instruction handle org aspectj apache bcel generic instruction handle 6a20978 match 5b1ccd0 targets 6eeac08 target 6949d20 org aspectj apache bcel generic switch java 109 13 0x01332eb6 org aspectj weaver bcel utility copy instruction org aspectj apache bcel generic instruction 610fc60 org aspectj weaver bcel utility java 474 14 0x01326f66 org aspectj weaver bcel lazy method gen pack body org aspectj apache bcel generic method gen 6d98000 gen 6d983c0 org aspectj weaver bcel lazy method gen java 813 15 0x01326d08 org aspectj weaver bcel lazy method gen pack 6d98000 org aspectj weaver bcel lazy method gen java 790 16 0x01324c81 org aspectj weaver bcel lazy method gen get method 6d98000 org aspectj weaver bcel lazy method gen java 336 17 0x0131b502 org aspectj weaver bcel lazy class gen write back org aspectj weaver bcel bcel world 610ff00 world 5642d20 org aspectj weaver bcel lazy class gen java 418 18 0x0131b95e org aspectj weaver bcel lazy class gen get java class org aspectj weaver bcel bcel world 610ff00 world 5642d20 org aspectj weaver bcel lazy class gen java 446 19 0x01311589 org aspectj weaver bcel bcel weaver get class files org aspectj weaver bcel lazy class gen a33c0 clazz 610ff00 snip might difficult me provide reproducable test case might depend gij version can try wanted however happily having examined bytecode bcel classes from first few lines stack trace think can explain why exception occurs without needing provide test case very simple whoever wrote bcel code question obviously never ran data set virtual machine where hash collision hash set would occur because bcel snapshot hash collision does occur object being added hash set guaranteed cause null pointer exception comparator method can seen merely examining code path described stack trace field targets lookupswitch object has been initialized when notify target called so hash collision hash set instruction comparator called guaranteed call get targets access its array length which cause null pointer exception hope explanation sufficiently clear happy provide further details null pointer exception when running ajc gij
weaver api runtime pointcut parsing matching needs extending all new pointcuts we have added aj5 recommended approach implement java lang reflect object type new reference type delegate java lang reflect world place bcel world complete runtime pointcut parsing matching
testcase aj containing final abstract aspect causes compiler abort internal compiler error documents settings mchapman aj error internal compiler error org aspectj apache bcel classfile class format exception class can both final abstract org aspectj apache bcel classfile class parser read class info class pars er java 242 org aspectj apache bcel classfile class parser parse class parser java 165 org aspectj weaver bcel utility make java class utility java 489 org aspectj weaver bcel unwoven class file get java class unwoven class fil java 63 org aspectj weaver bcel unwoven class file get class name unwoven class fil java 147 org aspectj ajdt internal core builder aj state note result aj state jav 497 org aspectj ajdt internal core builder aj build manager accept result aj build manager java 748 org aspectj ajdt internal compiler aj compiler adapter after processing aj compiler adapter java 186 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspectj ajdt internal compiler compiler adapter 6b855184 compiler adapter 89 org aspectj org eclipse jdt internal compiler compiler process compil er java 528 org aspectj org eclipse jdt internal compiler compiler compile compil er java 329 org aspectj ajdt internal core builder aj build manager perform compilat ion aj build manager java 728 org aspectj ajdt internal core builder aj build manager do build aj build manager java 206 org aspectj ajdt internal core builder aj build manager batch build aj bu ild manager java 140 org aspectj ajdt ajc ajdt command do command ajdt command java 112 org aspectj ajdt ajc ajdt command run command ajdt command java 60 org aspectj tools ajc main run main java 324 org aspectj tools ajc main run main main java 238 org aspectj tools ajc main main main java 82 source information available documents settings mchapman aj error class can either abst ract final both final abstract aspect abort exception thrown from aspect development documents settings mchapman ajc version aspect compiler development built tuesday sep 13 2005 22 31 40 gmt expected behaviour naturally just get regular compiler errror saying aspect can either abstract final both internal compiler error class parser java 242
using ajc embedded latest dev build ajdt build small example illustrates problem public abstract aspect abstract request monitor public pointcut request execution request context request context execution request context execute request context public abstract class request context public abstract object execute after request context request context throwing throwable request execution request context import java lang annotation retention import java lang annotation retention policy retention retention policy runtime public interface around advice public aspect error handling declare soft exception annotation around advice withincode object around annotation around advice try return proceed catch exception return null here stack trace get org aspectj weaver bcexception bad org aspectj weaver bcel bcel renderer visit bcel renderer java 228 org aspectj weaver ast literal accept literal java 29 org aspectj weaver bcel bcel renderer recur bcel renderer java 151 org aspectj weaver bcel bcel renderer render test bcel renderer java 117 org aspectj weaver bcel bcel advice get test instructions bcel advice java 445 org aspectj weaver bcel bcel shadow weave around closure bcel shadow java 2585 org aspectj weaver bcel bcel advice implement bcel advice java 182 org aspectj weaver shadow implement mungers shadow java 480 org aspectj weaver shadow implement shadow java 358 org aspectj weaver bcel bcel class weaver implement bcel class weaver java 1703 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 389 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 94 org aspectj weaver bcel bcel weaver weave bcel weaver java 1362 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 1327 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 1106 org aspectj weaver bcel bcel weaver weave bcel weaver java 981 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 286 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 165 org aspectj ajdt internal compiler compiler adapter ajc after returning org aspec tj ajdt internal compiler compiler adapter f9cc9ca0 compiler adapter aj 70 org aspectj org eclipse jdt internal compiler compiler compile compiler java 368 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 727 org aspectj ajdt internal core builder aj build manager do build aj build manager java 206 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 140 org aspectj ajde internal compiler adapter compile compiler adapter java 121 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 compiler failure annotation
eclipse using latest aspect build m3a compiler plugin get error can find type test using following code package test public class cant find type public method array return null error occurs return type parameter array generic type code compiles fine eclipse shows error doesn show folder location error ajdt error can find type
verify error inner classes
exception below seems happening any lst file message null pointer exception thrown null stack trace java lang null pointer exception org aspectj ajde internal compiler adapter configure build options compiler adapter java 296 org aspectj ajde internal compiler adapter gen build config compiler adapter java 170 org aspectj ajde internal compiler adapter compile compiler adapter java 95 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 191 null pointer exception when building
am attaching small test case reproduce error sure how attach hopefully should feasible do so after log bug getting exception during compilation java lang runtime exception internal compiler error unexpected null source location passed see also location
parameter ajc never read
from aspectj users program below produces erroneous message iajc workdir dpsample main src com observer observer prot ocol aj 39 error type mismatch cannot convert from collection collection iajc return observers iajc subject java interface subject public void add observer observer observer public void remove observer observer observer public collection get observers observer java interface observer public void update observer protocol public abstract aspect observer protocol abstract pointcut state change subject subject after subject subject state change subject iterator subject get observers iterator while has next observer observer observer next observer update private collection subject observers new array list public void subject add observer observer observer observers add observer public void subject remove observer observer observer observers remove observer public collection subject get observers return observers type mismatch cannot convert from collection collection
aspect development compiler chokes advice cflow
what vm sais java lang class format error repetitive method name signature class file com netvisor metadata view component factory java lang class loader define class1 native method java lang class loader define class class loader java 620 java security secure class loader define class secure class loader java 124 java net urlclass loader define class urlclass loader java 260 java net urlclass loader access 100 urlclass loader java 56 java net urlclass loader run urlclass loader java 195 java security access controller do privileged native method java net urlclass loader find class urlclass loader java 188 java lang class loader load class class loader java 306 sun misc launcher app class loader load class launcher java 268 java lang class loader load class class loader java 251 java lang class loader load class internal class loader java 319 why ve got interface component factory aspect adds various itd methods trough interface ve added some methods both interface aspect some other methods only added trough aspect situation bit more complex ve got base interface aspect two methods subaspects implement problematic two methods those methods both interface aspect ones get duplicated interface class file working fine old cvs branch hope helps good luck repetitive method name signature class file
eclipse click window preferences java compiler select unused code tab compiler preference page change unused unread private members warning error create project contains aspect some private pointcuts you see warnings errors pointcuts saying unused aspect compiler does process unused code compiler options properly aspects
when using intertype declaration compiler doesn check illegal modifier combinations abstract synchronized another problem when using intertype declaration add synchronized method interface problem more severe case because conceptually method abstract all interface interface abstract class parent class child extends parent implements interface aspect bug illegal modifier combination caught ajc public abstract synchronized void parent abstract public synchronized void child abstract following has same effect easier miss public implicit abstract synchronized void interface interface use child make java complain illegal modifiers 0x421 corresponds public abstract synchronized public static void main string args new child itds abstract synchronized compile error expected
following code aspect before call cflow execution two advice appied xlint messages produced one before advice one cflow within before advice xlint advice applied appears twice cflows
npe when opening resources double click from cvs resources history view java lang null pointer exception org eclipse mylar java ui editor mylar java element descriptor draw composite image mylar java element descriptor java 40 org eclipse jface resource composite image descriptor get image data composite image descriptor java 205 org eclipse jface resource image descriptor create image image descriptor java 279 org eclipse jface resource image descriptor create image image descriptor java 233 org eclipse jface resource image descriptor create image image descriptor java 211 org eclipse mylar ui mylar images get image mylar images java 108 org eclipse mylar java ui editor mylar compilation unit editor updated title image mylar compilation unit editor java 55 org eclipse jdt internal ui javaeditor java editor error tick updater run java editor error tick updater java 86 org eclipse swt widgets synchronizer sync exec synchronizer java 152 org eclipse ui internal sync exec java 28 org eclipse swt widgets display sync exec display java 3413 org eclipse jdt internal ui javaeditor java editor error tick updater post image change java editor error tick updater java 84 org eclipse jdt internal ui javaeditor java editor error tick updater update editor image java editor error tick updater java 77 org eclipse jdt internal ui javaeditor compilation unit editor do set input compilation unit editor java 1548 org eclipse ui texteditor abstract text editor 16 run abstract text editor java 2360 org eclipse jface operation modal context run current thread modal context java 346 org eclipse jface operation modal context run modal context java 291 org eclipse jface window application window run application window java 624 org eclipse swt custom busy indicator show while busy indicator java 69 org eclipse jface window application window run application window java 621 org eclipse ui internal workbench window run workbench window java 2135 org eclipse ui texteditor abstract text editor internal init abstract text editor java 2378 org eclipse ui texteditor abstract text editor init abstract text editor java 2405 org eclipse ui internal editor manager create site editor manager java 773 org eclipse ui internal editor reference create part helper editor reference java 572 org eclipse ui internal editor reference create part editor reference java 365 org eclipse ui internal workbench part reference get part workbench part reference java 552 org eclipse ui internal editor reference get editor editor reference java 214 org eclipse ui internal workbench page busy open editor batched workbench page java 2325 org eclipse ui internal workbench page busy open editor workbench page java 2258 org eclipse ui internal workbench page access workbench page java 2250 org eclipse ui internal workbench page run workbench page java 2236 org eclipse swt custom busy indicator show while busy indicator java 69 org eclipse ui internal workbench page open editor workbench page java 2231 org eclipse ui internal workbench page open editor workbench page java 2204 org eclipse team internal ccvs ui actions open log entry action run open log entry action java 85 org eclipse team internal ccvs ui repo repository manager run repository manager java 651 org eclipse team internal ccvs ui actions cvsaction run cvsaction java 347 org eclipse team internal ccvs ui actions cvsaction run cvsaction java 356 org eclipse swt custom busy indicator show while busy indicator java 69 org eclipse team internal ccvs ui actions cvsaction run cvsaction java 353 org eclipse team internal ccvs ui actions open log entry action execute open log entry action java 64 org eclipse team internal ccvs ui actions cvsaction run cvsaction java 117 org eclipse team internal ccvs ui history view handle event history view java 199 org eclipse swt widgets event table send event event table java 66 org eclipse swt widgets widget send event widget java 843 org eclipse swt widgets display run deferred events display java 3080 org eclipse swt widgets display read dispatch display java 2713 org eclipse ui internal workbench run event loop workbench java 1699 org eclipse ui internal workbench run ui workbench java 1663 org eclipse ui internal workbench create run workbench workbench java 367 org eclipse ui platform ui create run workbench platform ui java 143 org eclipse ui internal ide run java 103 org eclipse core internal runtime platform activator run platform activator java 226 org eclipse core runtime adaptor eclipse starter run eclipse starter java 376 org eclipse core runtime adaptor eclipse starter run eclipse starter java 163 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke native method accessor impl java 39 sun reflect delegating method accessor impl invoke delegating method accessor impl java 25 java lang reflect method invoke method java 585 org eclipse core launcher main invoke framework main java 334 org eclipse core launcher main basic run main java 278 org eclipse core launcher main run main java 973 org eclipse core launcher main main main java 948 npe when opening resources from cvs resources history
project containing one class one aspect package pack public class public static void main string args new say hello public void say hello system out println hello package pack public aspect declare warning execution say hello blah blah has matched entry aj doesn have matches declare entry java means ajdt say hello isn added our map consequently we don get any showing cross reference view aj matches declare entry structure model single declare warning statement
when advice executed object you have work joinpoint can queried get various information out would nice part weaving you could get hold same information particularly useful case writing coverage tool order measure where you ve been you have know all places you could possibly go introduction show weave info option means we can record places however would greatly enhanced providing similar information which collected program running information which would good same obtained from join point static part get signature long string provide more detail show weave info messages
tests show each object consumes 180 bytes large project 1000 classes where aspect used implement pervasive cross cutting concern exception logging can lead 1mb additional heap space two possible approaches could break literal string used factory make xxxsig methods component parts package class method names could shared jvm interned strings lazy handler static jps catch block any enhancements could enabled compiler option similar xlazy tjp reduce footprint join point static part objects
ajdt reports unnecessary compile time warnings private static aspects
following sample advice defined other aspect does pick up execution around advice defined some aspect matches only against before advice defined some aspect implicit around closure parameter around advice seems come way args matching aspect some aspect pointcut call int int call int test args before int int call int around int int call aspect other aspect before int int within some aspect args aspect doc has state explicitly args pcd does pick up around advice execution because args does match around closure parameter
aspectjtools jar ajc v1 we believe call pointcut has matching behaviour inconsistent what we expect from java relation invocations methods subclasses superclasses background our goal use aspect declare ajc compiler warnings any invocation target method where space targets defined any visible method any class specified package its subpackages well straight invocations from types packages oustide its subpackages we wish match method invocations where methods invoked inherited from obtained type directly extends type its subpackages fragment aspect we using public aspect aspect1 pointcut method calls within aspect1 call target package space declare warning method calls invoking consider cases case method inheritance superclass package declares implements public method direct subclass package outside directly extends inherits method now any calls inside matched call join point above which seeks match calls we would expect since package space actually being called case method overriding superclass package declares implements public method direct subclass package outside overrides its own does invoke now calls inside still matched call join point above which seeks match calls even though does invoke depend we do expect result since we do think actually called case non visible method same name superclass package declares implements private method direct subclass package outside introduces its own method having same signature now calls still matched call join point above which seeks match calls even though visible never called we do expect result since we do think ever called only way we can explain apparent behaviour reasoning compiler treating subclass type its parent somehow concluding method calls can equated calls methods identical signature however seems odds rules java visibility our expectations when call joinpoint should match we have experimented execution join points perform matching has turned up different set problems which we still analyzing please can you shed any light what call joinpoint doing here regards dave pointcut call method pattern matches non visible methods parent class
context where proceed requires zero arguments calling extra argument crashes compiler only argument field access class foo foo field void test public aspect bug void around call void foo test foo foo new foo field proceed foo caught compile time proceed new foo field crashes home user sgelin3 dev java ajc new bug bug java error internal compiler error java lang null pointer exception org aspectj ajdt internal compiler ast access inline visitor get accessible field access inline visitor java 145 org aspectj ajdt internal compiler ast access inline visitor end visit access inline visitor java 108 org aspectj org eclipse jdt internal compiler ast field reference traverse field reference java 609 org aspectj org eclipse jdt internal compiler ast message send traverse message send java 467 org aspectj org eclipse jdt internal compiler ast method declaration traverse method declaration java 212 illegal argument proceed crashes parser
class outer public class inner public class bug public void varargs object varargs public void test outer inner inner new outer new inner varargs inner works varargs new outer new inner crashes combining varargs inner classes crashes parser
ajc reports error when compiling following code interface base static interface inner class test extends test inner test implements base static class inner test implements inner ajc test java test java 14 error inner cannot resolved type static class inner test implements inner sun javac compiles without any error error can avoided simply writing base inner instead just inner also compiles fine constraint extends test inner test left away problems resolving type name inside generic class
illegal state exception undeclared type variable when hiding
when run program public class public static void main string args system out println new foo aspect aspect1 public public string value public string foo return value get error exception thread main java lang verify error class aspect1 method ajc inter method aspect1 foo signature la ljava lang string incompatible type getting setting field init java main java javap reveals field name missing class name part getfield 50 field la getfield 46 field value ljava lang string replace value value correct code generated getfield 37 field la getfield 46 field value ljava lang string verify error intertype field indirection intertype method
following sample code fails because compiler isn matching execution do post mock servlet4 declare warning servlet request doesn match case nor does advice join point actually run runtime though simplified code only shows problem declare warning working until fairly recently certainly m2 even ajdt from august 11 public abstract class mock servlet extends http servlet protected void do post private static aspect find matches declare warning execution http servlet do servlet request declare warning execution http servlet do servlet request2 class http servlet protected void do post public class mock delaying servlet extends mock servlet private static final long serial version uid public class mock servlet4 extends mock delaying servlet protected void do post compiler output should have warnings including two mock servlet4 devel workspace test src mock servlet java 16 warning servlet request protected void do post method execution void mock servlet do post see also devel workspace test src mock servlet java 20 devel workspace test src mock servlet java 16 warning servlet request2 protected void do post method execution void mock servlet do post see also devel workspace test src mock servlet java 21 devel workspace test src mock servlet java 26 warning servlet request protected void do post method execution void http servlet do post see also devel workspace test src mock servlet java 20 devel workspace test src mock servlet java 26 warning servlet request2 protected void do post method execution void http servlet do post see also devel workspace test src mock servlet java 21 devel workspace test src mock servlet4 java warning servlet request2 protected void do post method execution void mock servlet4 do post see also devel workspace test src mock servlet java 21 warnings execution matching override doubly derived method
whenever change any file save auto compile get popup class cast exception thrown org aspectj ajdt internal compiler lookup eclipse source type cannot cast org aspectj weaver bcel bcel object type started happening when wrote aspects before started happening ide showed line error support fire property change property oldval null oldval new string oldval new string newval package com blueprint util mixin test import java beans property change listener import java beans property change support import java lang reflect field import com blueprint util mixin test import org aspectj lang signature public aspect property support aspect property change support property support support new property change support public interface property support public void add property change listener property change listener listener public void add property change listener string property name property change listener listener public void remove property change listener string property name property change listener listener public void remove property change listener property change listener listener public void has listeners string property name public void property support add property change listener property change listener listener support add property change listener listener public void property support add property change listener string property name property change listener listener support add property change listener property name listener public void property support remove property change listener string property name property change listener listener support remove property change listener property name listener public void property support remove property change listener property change listener listener support remove property change listener listener public void property support has listeners string property name support has listeners property name pointcut call setter bean call public void com blueprint util test bean set name string target void around bean call setter string property name get field join point static part get signature get name system out println property property name string old value get name proceed fire property change property name old value get name private field get field signature signature field field null system out println getting field name signature get name try string method name signature get name field signature get declaring type get declared field method name substring method name length lower case field set accessible true catch field exception nsfe nsfe print stack trace return field void fire property change bean string property string oldval string newval system out println property property system out println old value oldval system out println new value newval support fire property change property oldval null oldval new string oldval new string newval import java io serializable public class bean implements serializable private string name public string get name return name public void set name string name name name public aspect bean support declare parents bean implements property support aspect property support class cast exception popup
after compiling attached source file class file ajc inpath outjar jar tracer aj any 0m2 june 2005 snapshot attempting run gij classpath jar classpath test following error obtained exception thread main java lang verify error verification failed pc test new test around body2 ltest branch out range java lang vmclass loader resolve class java lang class usr lib libgcj so java lang class initialize class usr lib libgcj so java lang class name java lang string boolean java lang class loader usr lib libgcj so gnu java lang main thread run usr lib libgcj so excerpt from output javap private classpath jar test shows generated switch indeed bogus private static final test new test around body2 int code iload tableswitch 1157627302 default 16 20 method init 23 areturn verify error after weaving around trivial switch statement
compiler error correct code when aspect performs method introdiction method introduction contains invocation method from class invocation inside appropriate try block ajc compiler performs wrong check exception types understand better please see attached example compiler error due wrong exception check try blocks
bcexception illegal change pointcut declaration calls nothing
ajdt ignoring suppress warnings unchecked annotation giving me type safety warning when don specify type when declaring generic even though have suppress warnings unchecked annotation specified suppress warnings unchecked ignoring type safety checks
get compiler error when override redefine final pointcut public class main static void walk static void run public static void main string args walk run abstract aspect aa public final pointcut public pointcut call void walk before public pointcut system out print here join point aspect aa1 extends aa expecting error here pointcut final public pointcut public pointcut call void run when run picks out run rather than walk expect error when overriding final pointcuts
we really should barf early get void opposed just compiling through treating something ll never match rated minor since just error message issue field pattern void type should compile time error
following code fragment class foo public void bar long before long after system out println before after leads following parser error java 25 error syntax error token invalid assignment operator system out println before after problems seems vanish when rename before variable jdt parser parser error system out printf after before
user attempts define itd using type pattern illegal since aspect get back compiler error message following form my aspect java error syntax error token around expected public string foo bar name clearer error message informing user use illegal syntax would help wildcarding itds needs clearer compiler error message
following reported compile error using aspect compiler development built monday jun 20 2005 08 14 57 gmt now crashes using aspect compiler development built wednesday aug 10 2005 13 12 53 gmt import java util vector works java util used public class bug extends vector works vector extended void test does exist argument works without argument also bug only appears flag used regression argument causes bcel generic signature type xconverter java 203
org aspectj weaver patterns wild type pattern maybe get clean name wild type pattern java 500
very bad bug snip below get method says null factory actually thinking test static method aspect jbug main instead assert wondering why we don catch test suite what could happen recently around something am confused about doubt jp get signature get method supposed return null some cases though aspect public class sam pointcut call public void method calls around method calls within alex sam sam within alex public object around method calls proceeding join point jp throws throwable string type name jp get signature get declaring type name system out println decl type type name system out println method method signature jp get signature get method return jp proceed class assert public static void test system out println run assert test class aspect jbug main extends assert public static void main string args test public static void test system out println run aspect jbug main test static method call from subclass signature wrong
example program generates npe cvs head m2 attach ajcore file public abstract aspect worker example after returning request context new context call request context new system out println constructing new context join point long string from enclosing join point static part public abstract class request context public final object execute return do execute template method public abstract object do execute public static void main string args new runnable public void run run aspect concrete alpha extends worker example object around final object runnable execution void runnable run runnable system out println monitoring operation runnable join point join point get request context request context new request context public object do execute return proceed runnable return request context execute aspect concrete beta extends worker example object around call void awqeyuwqer request context request context new connection request context public object do execute return proceed return request context execute npe syntax error
some notes formal binding impl aj code style advice signature always looking same bindings org aspectj lang part join point static part join point join point org aspectj lang part enclosing join point static part style user defined current impl handling formal binding way only args target can bound had add some conditionals handles cases like void my advice join point jp object target where target binding index while index unbound actually virtually bound joinpoint pointcut thus having virtually bounded names string list arguments which we don want any complain bound one populated during extraction pointcut concretize make sure info lost when composition occurs per clause only issue currently binding jp sjp esjp themselves possible args jp my advice join point jp join point current jp big issue may impact could impact some use cases around mock testing aj formal binding impl
when using intertype declaration add method generic class method correctly inherited bug doesn apply fields strangely enough raw types generic types instantiated without specifying type parameter inherit methods properly class generic parent class child extends generic parent integer class generic child extends generic parent integer aspect injector public void generic parent inherited method public int generic parent inherited field public void test int inherited field inherited field new generic child inherited field works inherited field new generic child integer inherited field works inherited field new child inherited field works new generic child inherited method works new generic child integer inherited method unresolved new child inherited method unresolved generics itds methods inherited from generic parent
ajc crashes null pointer exception when intertype declaration tries modify inner class enclosing outer class generic class outer class inner class generic outer class inner aspect injector int outer outer works int outer inner inner works int generic outer outer works int generic outer inner inner crashes home user sgelin3 dev java ajc new bug bug java error internal compiler error java lang null pointer exception org aspectj ajdt internal compiler lookup eclipse factory from binding eclipse factory java 202 org aspectj ajdt internal compiler ast inter type field declaration build inter type field declaration java 173 org aspectj ajdt internal compiler ast aspect declaration build inter type per clause aspect declaration java 1020 org aspectj ajdt internal compiler lookup aj lookup environment build inter type per clause aj lookup environment java 306 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 122 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 302 org aspectj org eclipse jdt internal compiler compiler compile compiler java 316 generics itds inner class generic enclosing class
inter type declaration generic inner class crashes compiler class outer class inner class generic inner class generic outer aspect injector int outer outer works int outer inner inner works int generic outer outer works int outer generic inner inner crashes home user sgelin3 dev java ajc new bug bug java error internal compiler error java lang runtime exception can handle class generic inner raw extends null typenull enclosing type outer null fieldsnull methods org aspectj ajdt internal compiler lookup inter type scope make source type binding inter type scope java 35 org aspectj ajdt internal compiler lookup inter type scope init inter type scope java 28 org aspectj ajdt internal compiler ast inter type declaration resolve inter type declaration java 101 org aspectj ajdt internal compiler ast inter type field declaration resolve inter type field declaration java 141 org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1076 org aspectj ajdt internal compiler ast aspect declaration resolve aspect declaration java 110 org aspectj org eclipse jdt internal compiler ast type declaration resolve type declaration java 1125 generics itds itd generic inner class crashes ajc
got following error my class2 java error import my class my method cannot resolved import static my class my method other import static statements strings enums appear work import static fails when importing method
following cannot parsed call int integer see modules weaver pointcut visitor test uncomment test temp see fixme av adrian comments pattern parser half fix fails other tests adrian can you have look thanks parser cannot parse varargs correctly
proposed fix like input how best add test cases so can submit tested patch believe work because you uncomment work around line works change line 63 from method declaring type get declared method get name get parameter types method get declaring type get declared method get name get parameter types test source package reflect import org aspectj lang import org aspectj lang reflect import java lang reflect aspect test before call within test method signature sig method signature join point get signature sig get declaring type uncomment work around method method sig get method public class minimal err public static void main string args try inner foo catch throwable print stack trace public static class inner public static void foo npe reflect
java lang array index out bounds exception can provide much more information please see attached compiler dump eclipse adapter utils java 83
aspect load time weaving cvs head isn loading aop xml files properly from jar file without specifying global flag following patch fixes problem me so can load aop xml files from jars classpath without global flag class loader weaving adaptor java 109 enumeration xmls loader get resources meta inf aop xml enumeration xmls loader get resources meta inf aop xml get resources doesn work leading separator least sun vm jrock windows writing unit test would require significant changes loadtime module so wrote standalone test api public class test api extends test case public void test load resource throws exception url url list new url file testsrc org aspectj weaver loadtime test sample jar class loader loader new urlclass loader url list enumeration xmls loader get resources meta inf aop xml version fails enumeration xmls loader get resources meta inf aop xml assert true xmls has more elements patch support loading aop xml properly
compile time explodes when adding statements pointcuts same ajc 5m2 although 5m2 little bit faster compile time still explodes example pointcut pc2 execution test sl enabled execution test sl enabled compiled about second up conditions eg pointcut pc7 execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled also compiled quite quickly seconds both ajc 5m2 now adding another condition lines causes seconds compile time adding yet another condition line ex lines causes min compile time 10 lines even more than minutes sample source code below aspect aj public aspect aspect private static final simple logger sl new simple logger pointcut pc execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled execution test sl enabled before pc sl log before after pc sl log after test java exploding compile time statements pointcut
see fixme binding annotation type pattern resolve binding eclipse source type get annotation types finish runtime retention checking
attached project generate internal compiler error single class extends array list object class extends just array list compiler error does occur note extends array list object class compiles successuflly without aspectj nature exception severity description resource folder location creation time internal compiler error java lang null pointer exception org aspectj org eclipse jdt internal compiler lookup class scope detect hierarchy cycle class scope java 945 org aspectj org eclipse jdt internal compiler ast single type reference internal resolve type single type reference java 143 org aspectj org eclipse jdt internal compiler ast single type reference resolve type single type reference java 208 org aspectj org eclipse jdt internal compiler ast type reference resolve super type type reference java 112 org aspectj org eclipse jdt internal compiler lookup class scope find supertype class scope java 1092 org aspectj org eclipse jdt internal compiler lookup class scope connect superclass class scope java 747 org aspectj org eclipse jdt internal compiler lookup class scope connect type hierarchy class scope java 884 org aspectj org eclipse jdt internal compiler lookup compilation unit scope connect type hierarchy compilation unit scope java 249 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 91 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 331 org aspectj org eclipse jdt internal compiler compiler compile compiler java 348 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 682 org aspectj ajdt internal core builder aj build manager do build aj build manager java 168 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 102 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 165 flattened list extends array list object java opentrader infra src org opentrader infra february 28 2005 59 42 am internal compiler error generics
java langauge features enums annotations need supported ajdoc ajdoc update ajdoc support java language features
getting class cast exception while compiling following code test java class aclass void method aspect aspect pointcut annt cflow execution before annt system out println before annt here output compiler out java lang class cast exception org aspectj weaver resolved member org aspectj weaver bcel bcel weaver weave bcel weaver java 933 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 244 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 119 org aspectj org eclipse jdt internal compiler compiler compile compiler java 385 cut problem caused cflow unresolved existing jointpoint when you uncomment method class problem disappears found bug when introducing aspect which has pointcuts based annotations fresh object oriented system without annotated classes when started annotate classes problem disappeared following code illustates simplified situation test2 java import java lang annotation target element type method interface ann class aclass ann void method aspect aspect pointcut annt cflow execution ann before annt system out println before annt attaching those sources ajcore files best regards michal unresolved joinpoint cflow causes class cast exception bcel weaver 933
compiler aborts following introduction code aspect introduction private array list array new array list public void add tmp array add tmp error message error method add type array list applicable arguments array add tmp compiling aspect development version 2005 02 18 compilation error generic member introduction
tried different things remove compiler warnings about generics which you get when you switch jdk use collections last fall back jdk following code compiles aspect jdk compliance level public aspect subject aspect private set subject observers new hash set public void subject add observer subject observer observer observers add observer after switching compliance level get error message method add type set applicable arguments subject observer don know similar problem like 87550 means older projects which use collections can switch jdk generics problem set does compile aspect
when compile any two aspects ajc exception thrown compiler import java util public aspect test bug1 static void add env map string env string key value env put key value import java util public aspect test bug2 static lookup env map string env string key return env get key methods placed classes instead aspects all works fine exception thrown following java lang null pointer exception org aspectj ajdt internal compiler lookup eclipse factory get name eclipse factory java 143 org aspectj ajdt internal compiler lookup eclipse factory from binding eclipse factory java 166 org aspectj ajdt internal compiler lookup eclipse factory from bindings eclipse factory java 176 org aspectj ajdt internal compiler lookup eclipse factory make resolved member eclipse factory java 254 org aspectj ajdt internal compiler lookup eclipse factory make resolved member eclipse factory java 249 org aspectj ajdt internal compiler lookup eclipse source type fill declared members eclipse source type java 115 org aspectj ajdt internal compiler lookup eclipse source type get declared pointcuts eclipse source type java 146 org aspectj ajdt internal compiler ast aspect declaration build inter type per clause aspect declaration java 977 org aspectj ajdt internal compiler lookup aj lookup environment build inter type per clause aj lookup environment java 303 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 119 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 331 org aspectj org eclipse jdt internal compiler compiler compile compiler java 348 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 683 org aspectj ajdt internal core builder aj build manager do build aj build manager java 168 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 102 org aspectj ajdt ajc ajdt command do command ajdt command java 109 org aspectj ajdt ajc ajdt command run command ajdt command java 60 org aspectj tools ajc main run main java 291 org aspectj tools ajc main run main main java 227 org aspectj tools ajc main main main java 80 npe eclipse factory java 143 when using generic methods aspects
work oli pull examples generating all lint messages
declaring annotations declare type constructor method field currently doesn show message when show weave info option set ajc appropriate messages should displayed show weave info declare annotations
null pointer exception thrown ajc compiler
declare soft currently advises advised would possible add softens softened softens exception exception softened structure model request new type relationship structure model
getting verify error exception when try use args following code test3 java import java lang annotation target element type type retention retention policy runtime interface ann ann class aclass public class test3 void abc aclass public static void main string args new test3 abc new aclass aspect annotations before ann ann call test3 args ann system out println before join point jrock it5 jre aspect 0m2 get following result java lang verify error class test3 method main signature ljava lang string unable pop operand off empty stack getting similar error sun jre older versions aspect j5 from 10th feb args causes verify error unable pop operand off empty stack
have following code aspect project declare type main class my annotation believe correct syntax should declare type main class my annotation however when saved my aspect first version got following null pointer exception java lang null pointer exception org aspectj ajdt internal compiler ast declare annotation declaration post parse declare annotation declaration java 83 org aspectj org eclipse jdt internal compiler lookup class scope post parse class scope java 175 org aspectj org eclipse jdt internal compiler lookup class scope build fields ethods class scope java 154 org aspectj org eclipse jdt internal compiler lookup compilation unit scope build fields methods compilation unit scope java 63 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindi ngs aj lookup environment java 104 org aspectj org eclipse jdt internal compiler compiler begin compile compiler java 331 org aspectj org eclipse jdt internal compiler compiler compile compiler java 348 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 683 org aspectj ajdt internal core builder aj build manager do build aj build manager java 191 org aspectj ajdt internal core builder aj build manager incremental build aj build manager java 109 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 165 null pointer exception when declare type spelt capital letter
enable asm java core via uniform element handles
compiler verifyerror npe
improvements incremental compilation
ll use bug capture info declare annotation itds
bcexception bad type name type name signature type java 635
aspectpath option compiler only allows jar zip files directories inpath classpath allow directories capability would improve handling aspects spanning multiple projects eclipse ajdt can currently only support jar zip files aspect path which requires one projects create outjar instead writing bin directory usual iajc ant task could also enhanced support aspectpath directories allow aspect path contain directories
order find out which other pointcuts referenced pointcut definition need access private members cflow pointcut pointcut pointcut pattern nodes found weaver module unlike pointcut pointcut classes missing appropriate getter methods some pointcut pattern nodes missing getters traverse syntax tree
get warning my code though actually do specify array type signature want match following constructor signature public touple object formula handle object propositions touple implements irelation pointcut use following pointcut call touple new should actually match signature shouldn aspect however complains warning array type last parameter signature does match varargs declared method void ltlrv touple init java lang object java lang object xlint cant match array type varargs also even had stated array type should match even imho since arrays varargs actually same java array type last parameter signature does match varargs declared method
see attached mini project reproduce npe when unresolved type bound var pointcut expression eclipse factory java 224
annotations circularity declare precedence
just downloaded ajdt version am running eclipse 1m4 tried use aspect existing java project aspects yet just straight java project runs just fine standard java project when add aspect nature try compile project class files generated get error generated type internal compiler error org aspectj weaver bcexception bad type name org aspectj weaver type name signature type java 634 org aspectj weaver type name type java 87 org aspectj ajdt internal compiler lookup eclipse factory from binding eclipse factory java 155 org aspectj ajdt internal compiler lookup eclipse factory from bindings eclipse factory java 163 org aspectj ajdt internal compiler lookup eclipse factory make resolved member eclipse factory java 229 org aspectj ajdt internal compiler lookup eclipse factory make resolved member eclipse factory java 224 org aspectj ajdt internal core builder asm hierarchy builder visit asm hierarchy builder java 675 org aspectj org eclipse jdt internal compiler ast constructor declaration traverse constructor declaration java 447 org aspectj org eclipse jdt internal compiler ast type declaration traverse type declaration java 1133 org aspectj org eclipse jdt internal compiler ast compilation unit declaration traverse compilation unit declaration java 314 org aspectj ajdt internal core builder asm hierarchy builder internal build asm hierarchy builder java 171 org aspectj ajdt internal core builder asm hierarchy builder build structure compilation unit asm hierarchy builder java 111 org aspectj ajdt internal compiler lookup eclipse factory finished compilation unit eclipse factory java 354 org aspectj ajdt internal compiler aj compiler adapter after processing aj compiler adapter java 138 org aspectj org eclipse jdt internal compiler compiler compile compiler java 373 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 682 org aspectj ajdt internal core builder aj build manager do build aj build manager java 168 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 102 org aspectj ajde internal compiler adapter compile compiler adapter java 122 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 165 source code file generates error package mj compiler ast import java util vector import mj compiler driver import mj compiler visitor public class sequence extends ast extends ast private vector elements new vector public sequence super public sequence element super element elements add element public int length return elements size public element int return elements element public sequence add element elements add element return public sequence add int pos element elements add pos element return public sequence add all sequence others others null return elements add all others elements return public void visit children visitor ast element elements element visit public void replace child ast old ast gnu new gnu int elements size elements get old elements set new return throw new driver compile error can find child replace child start generated visitor protocol todo public void visit mj compiler visitor visit sequence end generated visitor protocol hope helps something ps am able create run very simple aspect project aspect advice some java syntax bcexception bad type name thrown when compiling
andy wants patch format bugzilla aj work due some funny license issue here drafted aj
handing inner classes
given scenario class define method m1 proteceted visibility class extends class implements interface override method m1 public visibility interface define method m1 public visibility code correct compile using java let modify scenario move method m1 method introduction aspect class extends class apsect intosuces method m1 public visibility makes implemts declare parents before compiler reports error java error inherited method m1 cannot hide public abstract method class extends complier error when mixing inheritance overriding polymorphism
using ajdoc under ajdt 12 aspect commandline has following aspect has problems public abstract aspect aspect private pointcut private pointcut protected pointcut protected pointcut public pointcut public pointcut private void private method public void protected method public void public method asking protected gives all pointcuts public protected private aspect entry wrong public abstract class aspect methods inherited section has leading comma clone equals finalize visibility selector ignored pointcuts
using ajdt 0m2 java jre xp sp2 install spacewar example generate spacewar docs result output has cross references displays special ajdt tags stderr lists exception java lang string index out bounds exception string index out range java lang abstract string builder insert abstract string builder java 980 java lang string buffer insert string buffer java 447 org aspectj tools ajdoc html decorator insert declarations details html decorator java 350 org aspectj tools ajdoc html decorator add aspect html decorator java 234 org aspectj tools ajdoc html decorator decorate htmlfile html decorator java 188 org aspectj tools ajdoc html decorator decorate htmlfrom decl html decorator java 116 org aspectj tools ajdoc html decorator decorate htmlfrom decls html decorator java 54 org aspectj tools ajdoc html decorator decorate htmlfrom input files html decorator java 43 org aspectj tools ajdoc main main main java 210 fails doc spacewar using ajdt 0m2
order test exception scenarios existing framework have created aspect inject exception exception injected some code running within try catch finally block after exception thrown am expecting control pass catch block however what happening catch block code executed control passes through finally block undeclared exception thrown calling method here distilled test case public class main class protected integer counter private int public static void main string args main class mh new main class try mh do something catch exception system out println exception thrown do something print stack trace public void do something int while counter null try counter get counter counter null break commit catch throwable system out println caught exception finally system out println finally block protected integer get counter return new integer protected void commit throws sqlexception system out println main commit following aspect injects exception public aspect simple exception throwing aspect pointcut commit operation call main class commit before throws sqlexception commit operation throw new sqlexception dummy sql exception 55102 expected output caught exception java sql sqlexception dummy sql exception finally block actual output finally block exception thrown do something java sql sqlexception dummy sql exception nz govt moh test simple exception throwing aspect ajc before nz govt moh test simple exception throwing aspect 292c82f1 simple exception throwing aspect aj 10 nz govt moh test main class do something main class java 32 nz govt moh test main class main main class java 14 removing break statement from main class java causes expected output produced injecting exception while loop break statement causes catch block ignored
aspect m2 should implement backwards binary aspect form
annotation matching using within pcd doesn appear working
would wonderful weave message object would provide two additional things affected class name aspect name could use determine which aspect woven which class during load time weaving need dependency management weave message should provide more information
project containing one class one aspect public class hello class public static void main string args new hello class say hello public void say hello system out println hello public aspect a1 pointcut test get system out declare warning test within a1 test warning pointcut another test execution void hello class say hello after returning another test system out println returning following returned from structure model asm rel map entry hello class say hello relationship advised target a1 after returning another test asm rel map entry a1 after returning another test relationship uses pointcut target a1 another test asm rel map entry a1 after returning another test relationship advises target hello class say hello asm rel map entry hello class say hello relationship advised target a1 after returning another test asm rel map entry a1 another test relationship pointcut used target a1 after returning another test asm rel map entry a1 declare warning test warning relationship matched target hello class say hello other words model saying two entries same asm rel map entry hello class say hello relationship advised target a1 after returning another test whereas one should matches declare relationship relating declare warning changing aspect public aspect a1 pointcut test get system out declare warning test within a1 test warning pointcut another test execution void hello class say hello after returning another test system out println returning after returning test system out println returning again means map does now contain matches declare relationship all aspect m1 some cases structure model doesn contain matches declare relationship
currently order which you specify types when passing them compiler can affect how woven example we have class class extends also aspect declare parents implements serializable depending whether we see first we may may make serializable fix when we weave type we first weave its supertype its were also passed compiler problematic construct declare parents so we only process types special order declare parents around also because we can currently do decp when binary weaving order processing logic only being put source weaving pipeline order types passed compiler determines weaving behavior
default setting load time weaver 1rc1 produce weaving messages rather than ignore them think default should changed ignore them also cannot override default setting daj weaver versose false implied syntax from docs examples build xml has changed build xml should updated otherwise weaver should fixed use load time weaver default verbose setting
calling ajde get default get structure search manager find matches aspect project has been built results null pointer exception structure search manager find matches helper line 58 simple patch attached null pointer exception structure search manager
we don currently include version class files come out weaver can cause problems example we add new attribute class file future version aspect attribute cause older versions aspect blow up encounter we include version class file we can rev version number when we add attributes change class file form another way checking version number weaver we can better determine whether we should fail we encounter new attribute other change safe continue processing add new weaver version attribute includes shorts major minor encountering major version class file greater than version particular weaver designed understand cause compilation fail encountering minor version class file greater than minor version particular weaver designed understand cause compilation fail we assume safe continue add versions woven class files enabling better backwards
class org aspectj weaver resolved type name method coerceable from am having trouble line resolved member name other get declared methods cast always safe comment suggests cast always safe my case cast safe because have some additional resolved type some solution just remove cast since method get declared methods already defined abstract type other resolved type so cast seems obsolete anyway unnecessary cast causing problems
reference cflow within vs within cflowbelow within aspectj users mailing list aspect trace class below doesn print any message when pointcut defined cflow within trace other defintion within trace cflowbelow within trace works fine wes isberg his reply explained cflow should never used alone he thought bug two here class some class static public void main string args some class aspect trace class members static private int level static private void offset int level system out print offset pointcut pc cflow within trace within trace cflowbelow within trace before pc offset system out println join point level after pc level offset system out println join point trace class order try figure out what happening within trace class added second aspect trace trace just trace trace class aspect trace trace members static private int level static private void offset int level system out print offset pointcut pc within trace class before pc offset system out println join point level after pc level offset system out println join point trace trace here what trace trace prints when trace class uses cflow within trace trace class clinit set int trace class level set int trace class level trace class trace class execution trace class execution trace class trace class trace class clinit after advice executed before after cflow within trace prints nothing
anonymous classes unaware abstract classes error can find type local
appears ajc updates classfile timestamps even compilation fails breaks integration ant build system using ant javac task adapter interface compilation may fail first attempt succeed second attempt because ajc has touched timestamp ant hence decides nothing needs recompiled did happen ajc reproduce examples observer folder run build ajc sourceroots edit demo java class insert line dont compile run compilation again compiler displays correct error message demo class file has been updated compile time timestamp ajc changes classfile timestamps even compilation fails regression
when used cflow pointcut my applet couldn launch applet java lang exception initializer error sand aspect ajc pre clinit sand aspect aj sand aspect clinit sand aspect aj sand applet init sand applet java sun applet applet panel run applet panel java 353 java lang thread run thread java 534 caused java security access control exception access denied java util proper ty permission aspectj runtime cflowstack read java security access control context check permission access control conte xt java 269 java security access controller check permission access controller java 401 java lang security manager check permission security manager java 524 java lang security manager check property access security manager java 12 76 java lang system get property system java 612 org aspectj runtime internal cflow stack select factory vmversion cfl ow stack java 124 org aspectj runtime internal cflow stack clinit cflow stack java 59 more because cflow stack uses system get property method try catch block applet doesn have permission read system property aspectj runtime cflowstack workaround modify cflow stack java line 123 124 like private static string get system property security exception string property name string default value try return system get property property name default value catch java lang security exception return default value private static void select factory vmversion string override get system property security exception aspectj runtime cflowstack unspecified think defining get system property security exception more simple name method some utility class using where you call system get property better way applet which uses cflow pointcut gets access control exception
compiling program below results constructor class sce2 throwing exception which declared throw either source code generated bytecode declare soft statement removed super call sce2 constructor correctly reported throwing undeclared exception seems declare soft statement turns off exception checking super call despite being join point which covers call would actually soften exception using development built monday aug 16 2004 13 50 47 gmt public class super cons exc public super cons exc throws exception throw new exception public static void main string args new sce2 class sce2 extends super cons exc public sce2 super aspect sceaspect declare soft exception within sce2 declare soft can cause programs invalid exception behaviour generated
discovered andy brodie cp shorthand classpath supported jdt compiler aspect does correctly support cp option look example aspectj1 ajc inpath injar jar outjar outjar jar cp lib aspectjrt jar error can find type org aspectj lang join point error aspectj1 ajc inpath injar jar outjar outjar jar classpath lib aspectjrt jar due arg parser aspect only recognizing classpath doesn fail when encounters cp just ignores passes down jdt processing fix recognize cp too aspect does correctly support cp
we have recently renamed our copy bcel use different package prefix so our version never clashes another version might around users system enhancement do same thing our copy org eclipse jdt code shadows project part packaging shadows project create jdtcore jar files bin src we rename packages from org eclipse jdt org aspectj org eclipse jdt has really nice side effect we can make our version compiler accessible ide should now possible ajdt work more closely get features like eager parsing work care taken we don accidentally make merge process nightmare avoid clashes org eclipse namespace renaming our duplicates
have following bug running eclipse ajdt 12 have following class import java io file found exception import java io file output stream import org w3c dom import org w3c dom domerror import org w3c dom domerror handler import org w3c dom document import org w3c dom document fragment import org w3c dom node list import org w3c dom ls ls import org w3c dom ls lsinput import org w3c dom ls lsoutput import org w3c dom ls lsparser import com dcbank common lssingleton public class domhelper public static final string class id full filespec domhelper java java public static void save document document string filename throws class found exception exception illegal access exception file found exception document normalize document which compiles very fine jdk 02 windows xp soon dom2 xml apis jar dom3 xerces impl jar added beginning jre container included jar library list before system jar soon convert project aspect project code does compile anymore aspect compiler does find normalize document which included one two additional jars method any more kind regards arno schmidmeier compiling possible
have aspect captures around pcd returns object though actual methods being instrumented might return any valid pojo array understand aspect take care casting assignment expected following code work properly runtime get java lang verify error shown below wd hello ajbrowser hello world lst java lang verify error class de rohith printer world method return array cl oning signature ljava lang integer incompatible argument function de rohith hello world main hello world java 18 exception thread main suspect compiler fails notice return types methods being caught compile time have tested code both ajbrowser well ajdt both result same error output hello world aspect java package de rohith import java lang object public aspect hello world aspect private int call depth public hello world aspect pointcut hello within hello world aspect pointcut method execution public de pointcut cloning call java lang object clone declare warning method hello returning method called object around cflow method cloning hello print enclosing join point static part object ret proceed return object ret clone private void print string prefix object message int spaces call depth spaces system out print system out println prefix message printer world java package de rohith public class printer world private integer int array new integer public printer world public void print system out println hello world public integer return int return new integer public integer return array cloning int int array length int array new integer return integer int array clone public integer return array without cloning return int array hello world java package de rohith public class hello world public static void main string args printer world new printer world print integer return int integer int array return array cloning integer array2 return array without cloning around advice throws java lang verify error runtime
aspectj generate code does de compile cleanly
am heavily using runtime signature information from join point get signature string method causes heavy string operations each time string method called would possible cache resulting string example method signature impl similar classes other signatures performance improvements runtime library
when attempting compile following aspect resulting error message should say something like abstract method pointcut tracing scope type tracing can only defined abstract aspect public aspect tracing public abstract pointcut tracing scope bogus error message abstract method ajc pointcut tracing scope a2 type tracing can only defined abstract class
ajc possible bug static nested classes
declare warning warns wrong points
when compiler terminates abnormally exception behaves unexpectedly warning error abort simple dump compiler state should produced aid problem diagnosis content conditions under which dump produced should configurable user facility should enabled default exceptions consequently its inclusion should have negligible impact compiler performance footprint file should attached bug reports give complete objective description users environment support problem resolution where testcase cannot provided one approach write uniquely name file using date time current directory ajcore 20040818 105200 txt which should human readable can zipped large allow user potentially diagnose own problems remove potentially sensitive data before submission should contain basic information aspect version system properties command line well failure information full exception stack trace compiler messages internal compiler state support simple dump file
ajdoc doesn support encoding docencoding charset options javadoc especially doesn pass encoding ajc your project uses source file encoding utf differing form platform standard some java identifiers use characters byond standard ascii range you won able use ajdoc all ajdoc should able set encoding like javadoc
weaving 3rd party library wrote aspect should affect both base class derived class wove only derived class resulted following error would like weaver catch kind error weave link time rather than creating code results rt error get error final fairly recent version from cvs head java lang abstract method error ajee logging log manager ajc inter method dispatch1 ajee logging log manager ajee logging loggable get logger log manager java ajee tracing execution tracer ajc before ajee tracing execution tracer 926 execution tracer java 62 library derived init derived java 46 line call super ve attached small example reproduces another error think related devel test ctors two pass build devel test ctors two pass call ajc outjar full base jar sample base java sampl derived java exception thread main java lang exception initializer error sample derived init derived java sample derived main derived java 13 caused org aspectj lang aspect bound exception sample trace aspect trace aj sample trace init trace aj sample trace ajc post clinit trace aj sample trace clinit trace aj more weaver results rt error affected base class exposed
when introducing new member functions existing classes via inter type declarations scoping rules apply itd bodies same aspect example private members target class cannot accessed unless aspect privileged similarly protected members classes different packages should visible itds unless aspect privileged rule only enforced protected members declared target class protected members inherited visible from itds aspects different packages following example package foo public class foo extends ancient foo protected int return 42 public static void main string args new foo do stuff public void do stuff protected int ancient return 42 class ancient foo protected int ancient return 42 protected int ancient return package bar import foo foo aspect bar public void foo doing try system out println fails ajc system out println ancient fails ajc system out println ancient succeeds system out println clone succeeds catch throwable before foo call do stuff target doing all four calls foo doing should fail refer protected members foo foo from package bar however only first ones directly declared overridden foo foo detected errors removing them makes rest compile execute best wishes pavel scoping protected members itds
reported ajdt newsgroup go preferences java compiler javadoc set missing javadoc comments warning you get warnings against things you wouldn expect after advice comment public aspect world pointcut greeting execution hello say hello comment after returning greeting system out println world gives two warnings one aspect itself one after returning advice warnings occur both without existence javadoc comments missing javadoc comments aren missing
when clinit class contains after throwing advice may catch exception initializer errors due embedded advice aspect fails exception intializer error does get properly reported example below public class main static int 13 int public main 14 public static void main string args main new main system out println hi aspect aspect before within system out println before join point static part get kind join point static part get source location after within system out println after join point static part get kind join point static part get source location when compiled ajc run following exception given exception thread main java lang class def found error main clinit main java when really one wants following exception thread main java lang exception initializer error main caused org aspectj lang aspect bound exception aspect aspect aspect here fix give decompiled clinit main java indicate comments look ljh what can woven fix basically catch block after throwing when clinit should first check caught exception exception initializer error so just throw static org aspectj runtime reflect factory r1 java lang throwable r2 r31 int i0 r1 new factory main java class name main ajc tjp r1 make sjp field set r1 make field sig main int ajc tjp r1 make sjp r1 make initializer sig main ajc tjp 10 r1 make sjp r1 make constructor sig main ajc tjp r1 make sjp field set r1 make field sig main int ajc tjp r1 make sjp constructor execution r1 make constructor sig main ajc tjp r1 make sjp constructor call r1 make constructor sig main 10 ajc tjp r1 make sjp field set r1 make field sig main int 11 ajc tjp r1 make sjp field get r1 make field sig 19 out java lang system java io print stream 12 ajc tjp r1 make sjp method call r1 make method sig println java io print stream java lang string arg0 void 12 ajc tjp r1 make sjp method execution r1 make method sig main main ljava lang string args void 10 ajc tjp r1 make sjp r1 make constructor sig main try aspect aspect ajc before aspect 36f01b1c ajc tjp i0 13 try aspect aspect ajc before aspect 36f01b1c ajc tjp i0 catch throwable r30 ljh insert here r30 instanceof exception intializer error throw r30 r31 r30 aspect aspect ajc after aspect 36f01b1c ajc tjp throw r31 aspect aspect ajc after aspect 36f01b1c ajc tjp catch throwable r36 ljh insert here r36 instanceof exception intializer error throw r36 r2 r36 aspect aspect ajc after aspect 36f01b1c ajc tjp throw r2 aspect aspect ajc after aspect 36f01b1c ajc tjp proper handling exception intializer inside clinit presence after throwing advice
see screenshots outline view shows anonymous inner classes different way than jdt outline
from irum godil aspectj users posting package public class itd private void return nothing object package import privileged aspect public void itd new fun return nothing returns devel test priv aj error method return nothing object from type itd visible return nothing error which should aspect does give error work around use return nothing privileged aspect access problem across packages
you checkout jar using project project from org eclipse ajdt test manual testing ajdt 12 tree look advised entries outline view context menu gutter annotation windows you get injar aspect abstract aspect aj linux you get injar aspect test eclipse workspace jar generating project src p1 abstract aspect aj windows style path indicates location original class files jar file which clearly built windows bad injar aspect name linux
version bcel libraries allow graceful failure when wrong version found
according scope rules intertype method declarations interpreted from originating aspect only exceptions thought use super which refer target type according program below type correct ajc generates two error messages shown comments relevant lines note ok access private static fields aspect use private classes aspect feature bug what precise scope rules intertype method declarations aspect aspect private static int private class int private static void happy system out println happy accessing private field private static void foo system out println error type aspect visible public void bar foo new error type visible class public class public static void main string args new bar scope intertype methods
following code does compile because message uses string operator public class warning sample public void method public void another method method aspect warning aspect pointcut illegal call call warning sample method within warning sample same thing happens declare error declare warning illegal call hey don do nice you should do something else compile time declarations warning error do accept string
initialisers intertype fields should match field set pointcuts example below output should set field set int set field set int get field get int set field set int first field set picked up aspect aspect private int 13 before get system out println get field join point static part before set system out println set field join point static part public void foo class int 20 public class itfields advice public static void main string args new foo intertype initialisers should match field set pointcuts
class test public static void main string args new test method public void method new test2 method2 class test2 public void method2 aspect plain before test call void target ajc crashes when compiling following program binding target
using method named proceed around advice confuses compiler least ways shown below true current tree untested workaround now rename method first problem npe compiler java lang null pointer exception org aspectj ajdt internal compiler ast make decls public visitor end visit make decls public visitor java 44 public class proceeding public static void main string args static aspect interface iproceed void proceed runnable next iproceed decorator void around execution void main string decorator proceed new runnable public void run proceed second problem incorrect error wrt number arguments public class proceeding public static void main string args static aspect void around execution void main string proceeding proceed null bug treated proceed object static void proceed object third hypothetical we should document how ambiguity resolved public class proceeding public static void main string args static aspect void around execution void main string proceed special form proceeding proceed void proceed proceed used method name around advice
weaver fails bcel large classes
ajc use join point corresponds object type join point where join point object has four components which can retrieved using accessor methods get target get target args get args static join point get static part case args object returned object array means advice decl can overwrite args another advice which shares same join point see changed args here small example aspect before advice changes arg always laurie after advice always say laurie won million pounds behaviour intended would have thought interface args should values can only read otherwise very strange interactions between advice decls could occur public class main public static main new main void lottery string arg system out println arg lottery arg public static void main string args lottery oege lottery ganesh public aspect aspect pair advice decls demonstrates advice can change args join point before call lottery java lang string within aspect system out println before join point join point static part get source location object args join point get args system out println arg args args laurie system out println now join point get args after call lottery java lang string within aspect system out println after join point join point static part get source location join point get args equals laurie system out println laurie wins million pounds value args array can changed one advice decl updated values seen another advice decl
pointcuts should match call joint points advice however aspect does match calls private methods around advice same applies get set pointcuts private fields probably because testcase below call private method body around advice call accessor method ajc inline access method bug nnnn join point around advice bug nnnn join point aro und advice private method around public aspect join point around advice private static set private calls new hash set private static set public calls new hash set pointcut internal call call join point around advice private method before internal call private calls add join point pointcut external call call join point around advice public method before external call public calls add join point pointcut exec test execution join point around advice test before exec test private method before public method before void around exec test private method around public method around proceed void around exec test runnable runnable new runnable public void run private method around closure public method proceed runnable run after exec test private method after public method after private static void private method string from system out println private method from public static void public method string from system out println public method from public static void test system out println test private method test public method test public static void main string args test private calls size public calls size throw new runtime exception missing join point else system out println success cannot advise private method call around advice
have experienced situations where iajc outputs message like end compilation iajc can find type org xxx some test my case one time highly confusing since did expect class question referred anywhere project have date still located reference cases would extremely nice error message would display why need class name refering class es aspect es possibly reasonable cutoff seldom need list all referals so would like message like iajc can find type org xxx some test referred org yyy some class org yy some other class need better error message can find type
my classpath entry config lst file resolved relative working directory rather than config lst file build arg parser java looks like would also true extdirs injars aspectpath sourceroots lst file entries resolved relative list file boot classpath extdirs
incomplete bug report sorry time further isolate running ajdt get dozens warnings warning does match because declaring type java lang object match desired use target st ata mc exim datastore reader xlint unmatched super type call blah aj project src package dir line 22 something like code import pack interface pointcut dsr call call interface warning here each warning points pointcut join point shadow npe running from command line latest tree attach npe incorrect xlint unmatched super type call warning
ah joy build mostly self explanatory trace from build monday apr 2004 08 46 01 gmt duplicate entry meta inf manifest mf duplicate entry meta inf manifest mf java util zip zip exception duplicate entry meta inf manifest mf java util zip zip output stream put next entry zip output stream java 163 java util jar jar output stream put next entry jar output stream java 90 org aspectj ajdt internal core builder aj build manager write resource aj build manager java 344 org aspectj ajdt internal core builder aj build manager copy resources from jar file aj build manager java 288 org aspectj ajdt internal core builder aj build manager copy resources destination aj build manager java 253 org aspectj ajdt internal core builder aj build manager do build aj build manager java 195 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 94 org aspectj ajdt ajc ajdt command do command ajdt command java 102 org aspectj ajdt ajc ajdt command run command ajdt command java 53 org aspectj tools ajc main run main java 280 org aspectj tools ajc main run main main java 217 org aspectj tools ajc main main main java 79 duplicate manifests cause resource copying gack
hi am getting null pointer exceptions whenever try specify pointcut withincode signature clause public aspect detect system out error usage pointcut all system out system err accesses get system out get system err declare warning all system out system err accesses within com tivoli act test within com tivoli act log execution com tivoli act main execution com tivoli act usage withincode com tivoli act main withincode com tivoli act usage warning use system out system err consider logging instead above example excluding main usage methods from pointcut using execution clause shows works using withincode clause commented always yields npe trouble null java lang null pointer exception org aspectj weaver patterns signature pattern matches signature pattern java 87 org aspectj weaver patterns withincode pointcut match withincode pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 45 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver shadow munger match shadow munger java 62 org aspectj weaver checker match checker java 48 org aspectj weaver bcel bcel class weaver match bcel class weaver java 1121 org aspectj weaver bcel bcel class weaver match init bcel class weaver java 895 org aspectj weaver bcel bcel class weaver match bcel class weaver java 793 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 343 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 80 org aspectj weaver bcel bcel weaver weave bcel weaver java 724 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 689 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 615 org aspectj weaver bcel bcel weaver weave bcel weaver java 563 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 239 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 114 org eclipse jdt internal compiler compiler compile compiler java 376 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 601 org aspectj ajdt internal core builder aj build manager do build aj build manager java 160 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 94 org aspectj ajde internal compiler adapter compile compiler adapter java 108 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 165 session jun 18 2004 10 49 48 666 eclipse build id java version 03 java vendor sun microsystems inc boot loader constants os win32 arch x86 ws win32 nl de ch entry org eclipse ajdt ui jun 18 2004 10 49 48 666 message null pointer exception thrown null stack java lang null pointer exception org aspectj weaver patterns signature pattern matches signature pattern java 87 org aspectj weaver patterns withincode pointcut match withincode pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 45 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver patterns pointcut match pointcut java 42 org aspectj weaver shadow munger match shadow munger java 62 org aspectj weaver checker match checker java 48 org aspectj weaver bcel bcel class weaver match bcel class weaver java 1121 org aspectj weaver bcel bcel class weaver match init bcel class weaver java 895 org aspectj weaver bcel bcel class weaver match bcel class weaver java 793 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 343 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 80 org aspectj weaver bcel bcel weaver weave bcel weaver java 724 org aspectj weaver bcel bcel weaver weave without dump bcel weaver java 689 org aspectj weaver bcel bcel weaver weave notify bcel weaver java 615 org aspectj weaver bcel bcel weaver weave bcel weaver java 563 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 239 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 114 org eclipse jdt internal compiler compiler compile compiler java 376 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 601 org aspectj ajdt internal core builder aj build manager do build aj build manager java 160 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 94 org aspectj ajde internal compiler adapter compile compiler adapter java 108 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 165 michael nullpointer exception pointcuts using withincode clause
aspect 11 eclipse build id also previous 10 eclipse version build id 200406351208 enable incremental compilation make change file typing space deleting editing comment get conncurrent modification exception thrown null error aspect error conncurrent modification exception thrown null
aspect compiler 1beta4 program aspect foo pointcut p1 execution void cflow execution void f1 pointcut p2 execution void cflow execution void f2 before p1 after p1 before p2 after p2 class void f1 void f2 void results errors circular dependency method execution void circular dependency method execution void circular dependency method execution void circular dependency method execution void errors comment out any one four pieces advice all errors go away also assuming valid reason printing error sometimes how come line number doug spurious circular dependency error
see following code public class test2 public static void main string args system out println hi aspect aspect2 shouldn one have say java instead java following note first advice incorrect one passes front end does match whereas second one does match believe front end should reject first one before call java within test2 system out println incorrect one before call method java package before call java within test2 system out println correct one before call method java package front end bug shouldn allow patterns form foo should foo
fast match efficient pattern matching pointcuts constant pool currrently only implemented within pointcut am planning provide further other pointcuts release special case false require dynamic test
java lang null pointer exception weaver message handler class
ajc should emit available options help request latter like java get more traffic feedback experimental options should output available options
using introduction possible hide instance methods static methods example class super public void class sub aspect public static void sub acccording java language allowed behaviour desired also possible override static methods instance methods wich causes compile time error java hiding instance methods static methods
cosmetic mistake error message expected can bind type name unknown error actual can bind type name unknown error sure why would ever munged public class test public static void main string args test static void test throw new error hello static aspect declare soft unknown error call void test ce can bind type message has type name declare soft
following program causes ajc abort public class conflict public static void main string args aspect conflict1 declare precedence conflict1 conflict2 before execution aspect conflict2 declare precedence conflict2 conflict1 after execution compiler aborts conflicting dominates orders circular declare precedences
problem ajdoc public
ajdoc fails when using default package
addition accepting java source files ajdoc needs accept aj files ajdoc does support aj files
using aspect 2rc1 windows xp report highlights problem ve seen using ajdoc bat windows issue applies equally ajc bat ajbrowser bat files well aspectj home bin ajdoc bat file users run launch ajdoc tool imposes limit only command line arguments may passed class org aspectj tools ajdoc main scenarios where sourcepath classpath etc options used easy eat up list arguments passed jvm long list packages entered end ajdoc bat command can truncated possibly even ignored which case error message output telling user classes packages have been specified order prevent limit being put number arguments passed launched jvm invocation line needs end rather than list currently uses proposed fix also seems could somebody else confirm sort out another problem regarding ajdoc bat file which long semi colon delimited paths supplied arguments sourcepath classpath options seem get split apart passed jvm separate arguments unless entire path list supplied inside quotes should necessary seems batch file processor interprets semi colons path list delimiters between arguments consequently each element path list treated separate argument instead being part one big string representing sourcepath classpath ajdoc launch script windows can lose arguments
message handler weaving adapter load time weaving says public boolean handle message imessage message throws abort exception ignoring message get kind verbose system err println message get message throw new abort exception message return true means warnings goes bang so even declare warning meant tell user something during ltw cause code blow up fix simply log warning messages only fail error messages am waiting testcase from matthew before checking fix load time weaving aborts any kind warning declare xlint
faster machines my linux desktop andy home pc several tests ajc tests xml failing suite attached appears due race condition between checking directory contents waiting compilation complete have environment which can test candidate fixes you can give me pointer what tweak race condition test suite incremental
problem current cflow stack version till rc1 stores all threads hashtable threads removes after several calls methods get thread stack our cases 70 calls our project cycle much long we have soveral long running threads which grap quite lot lot memory memory can only freed after threads have been removed from cflow stack our production code we sum up more than 300 threads stored different cflow stack varaibles often results out memory errors added patch provides improved freeing scheme checks size table has grown has checks can remove some threads cflow stack removes threads late
core compiler changes have resulted ajde build cancelling mechanism once core canceling behavior stabilizes needs restored restore build cancelling swing based ides
tried add aspect java awt label compile aspect via ajc inpath usr local j2sdk nb j2sdk1 jre lib rt jar timestamp java here aspect timestamp java aspect timestamp private int java awt label ts read private int java awt label ts write pointcut write op call void java awt label set text string pointcut read op call string java awt label get text after java awt label returning read op target ts read after java awt label returning write op target ts write system out println ts write public static void main string args java awt label b1 new java awt label b1 set text abc here error message get from ajc null java lang null pointer exception org aspectj ajdt internal core builder eclipse adapter utils make location context eclipse adapter utils java 50 org aspectj ajdt internal core builder eclipse adapter utils make source location eclipse adapter utils java 120 org aspectj ajdt internal core builder eclipse adapter utils make message eclipse adapter utils java 129 org aspectj ajdt internal core builder aj build manager accept result aj build manager java 663 org aspectj ajdt internal compiler aj compiler adapter accept result aj compiler adapter java 178 org aspectj ajdt internal compiler weaver adapter finished weaver adapter java 203 org aspectj ajdt internal compiler weaver adapter weave completed weaver adapter java 167 org aspectj weaver bcel bcel weaver weave bcel weaver java 570 org aspectj ajdt internal compiler aj compiler adapter weave aj compiler adapter java 239 org aspectj ajdt internal compiler aj compiler adapter after compiling aj compiler adapter java 114 org eclipse jdt internal compiler compiler compile compiler java 376 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 600 org aspectj ajdt internal core builder aj build manager do build aj build manager java 160 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 94 org aspectj ajdt ajc ajdt command do command ajdt command java 102 org aspectj ajdt ajc ajdt command run command ajdt command java 53 org aspectj tools ajc main run main java 280 org aspectj tools ajc main run main main java 217 org aspectj tools ajc main main main java 79 fail abort null pointer exception while weaving java awt label
java beta reports class format error when running programs spacewar compiled ajc latest cvs head sun java beta binary docs say some obfuscators violated class format so those class files fail when run under docs also say still incomplete although still beta we would want submit bug sun our techniques valid so we don have change those techniques we should document we don fix since many people using java fails run classes produced ajc
exceptions thrown from compiler used printed once submit bug header now printed twice without header true cvs version exception printing
when compiling binary concrete aspect library later ltw consisting more than one aspect performs itd target class exposed weaver get following error error type mismatch cannot convert from java lang string java lang string error does oocur complete build weave performed testcase attached error type mismatch cannot convert from java lang string java lang string
hi discussed mailing list few days ago implemented weaving class loader enable bytecode based weaving class loading time class loader based urlclass loader can used like any other urlclass loader addition you can add aspects weaving loader aspects got woven each class loaded test cases class loader aren implemented yet am still thinking about how implement them contribute them later okay martin weaving class loader
compiler silently accepts public class declare precedence public static void main string args system out println hello aspect dp declare precedence declare precedence dp before declare precedence system out println ok since likely mistake error would nice however would mean saying target class target class pick out aspect subtypes target class declare precedence class should compile time error
private members introduced via interface classes introduced members visible inside classes themselves although visibility supposed relative aspect here sample public class sample public static void main string args sample new sample method public void method introduced following aspect private so should accessible here system out println have aspect sample aspect private interface tag private int tag declare parents sample implements tag private members introduced via interface visible class
during incremental compilation aj state records classes generated from source files following initial compile phase before weaving so can passed weaver subsequent iteration we need reweave world during weaving given class file weaver may generate additional class files around closures get written output orginal source file deleted additional weaver generated classes deleted from output since aj state does know about them incremental compilation does delete weaver generated class files
build can cancelled during bytecode weaving stage build cancel during weaving
call ajc sourceroots mydir outjar my jar output file created jar extension valid jar file because manifest mf file see text ajc says outjar file put output classes zip file file which might imply supposed zip file parameter called outjar which creates zip file doesn really make sense outjar used resulting file should valid jar file meta inf manifest mf file inside ajc outjar jarfile does contain manifest mf
either fix class file deleting etc work jars always do batch build when working outjars incremental support does work outjar
when added support outjar test harness surprised find duplicate entry exceptions coming from output file writing outjar traced through found every source file passed incremental compile fact compiled twice first time round we note references course each file has reference itself we call aj state get files compile looking see any further files compile another iteration method does remember set files just compiled so since we have referenced each type we just compiled we have reord fact we compile them again second time around bytecodes identical previous go so record class file doesn note dependents thus time we terminate incremental compilation does twice much work necessary
introduce unknown type class causes null pointer exception
when writing aspects cycles advice precedence get warning circular dependency join point should circular advice dependency circular advice precedences join point reorder advice aspect fwiw here example circularity advice precedence aspect pointcut crun execution void run before crun after returning crun void around crun proceed see programming guide more discussion circularity advice precedence retitle warning circular advice dependency
first class class declares only one method some exceptions throws clause void throws exception second class class extends without redefinig method aspect declares method introduction class same name signature return type one class without throws clause legal override second class class each invocation overriden method doesn need try catch block because refers his hown method raises exception code compiles using ajc version built jul 24 2002 21 pm pst running java using aspect compiler aspect compiler class public public void throws exception class extends public public void some code aspect public void fail compiling aspect overriding method introduction different throws clause
inter type declarations cause jrockit crash
get following exception when weaving attached aspect dev build java lang class cast exception org aspectj weaver patterns pointcut concretize1 pointcut java 156 org aspectj weaver patterns pointcut concretize pointcut java 143 org aspectj weaver patterns pointcut concretize pointcut java 119 org aspectj weaver checker concretize checker java 35 org aspectj weaver crosscutting members add shadow munger crosscutting members java 78 org aspectj weaver crosscutting members add declare crosscutting members java 102 org aspectj weaver crosscutting members add declares crosscutting members java 92 org aspectj weaver crosscutting members set add advice like declares crosscutting members set java 65 org aspectj ajdt internal compiler lookup aj lookup environment add advice like declares aj lookup environment java 147 org aspectj ajdt internal compiler lookup aj lookup environment complete type bindings aj lookup environment java 122 org eclipse jdt internal compiler compiler begin compile compiler java 300 org eclipse jdt internal compiler compiler compile compiler java 314 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 384 org aspectj ajdt internal core builder aj build manager do build aj build manager java 125 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 70 org aspectj ajdt ajc ajdt command do command ajdt command java 104 org aspectj ajdt ajc ajdt command run command ajdt command java 53 org aspectj tools ajc main run main java 234 org aspectj tools ajc main run main main java 170 org aspectj tools ajc main main main java 81 classcast exception false
support xreweavable option
java lang verify error thrown runtime complaining about bad access protected data when advice sub aspect calls protected method super aspect woven class however another call same method woven same class due advice declared super aspect works fine aspects were woven precompiled sun javac classes verify error occurs under both sun blackdowns vms presumably all vms workaround making protected method public fixes verify error test case available cvs tests bugs protectedvf tests ajc test failing xml advice calling protected super method causing java lang verify error bad access protected data
some elements have wrong kinds when saved structure model loaded close re open eclipse workbench classes shown interface outline view also traverse tree code below get wrong kinds assigned classed interfaces aspects import declarations list list structure model util get packages model iterator list iterator has next object object next iprogram element node iprogram element list files structure model util get files package node iterator i2 files iterator i2 has next iprogram element file iprogram element i2 next system out println file file get kind string file get name boolean added2 false list file children file get children file children can classes aspects other things iterator i3 file children iterator i3 has next iprogram element file child iprogram element i3 next system out println kind file child get kind string file child get name structure model wrong when re opened
looks like get parameter name operation org aspectj lang reflect catch clause signature working instead returning name exception declared matched handler returns string value missing here test case shows problem start test case code public class my app public void do something get around unreachable code error true throw new business exception surprise system out println busy doing something public static void main string args try my app new my app do something catch business exception system out println exception caught get message class business exception extends runtime exception business exception string message super message aspect app monitor pointcut problem handling handler throwable before problem handling catch clause signature sig catch clause signature join point static part get signature system out println monitor caught sig get parameter type get name called sig get parameter name end test case code output from running above monitor caught business exception called missing exception caught surprise operating system windows xp aspect final also latest from cvs head catch clause signature has broken operation
cases where body advice refers non statically evaluable portion join point so can optimized compiler join point static part join point object currently always created before entering advice body even join point object would never actually accessed because test within advice example since join point often used tracing applications tracing applications tend very pervasive must have low overhead when tracing disabled creation join point objects expensive expensive compared just testing flag would nice way create join point objects lazily first actual reference within advice body lazy join point
complete set surfaced structure model including support declare parents etc mik you had document listing things yet done here complete relationship information structure model
aspectjrt jar manifest file name needs changing upper case
npe when compiling intertype declaration
getting out memory error when compiling ajc rc1 know very descriptive maybe you can point me direction getting more output here some additional information though code base medium size about 1500 classfiles removed all my aspects still receive error running from command line ajc classpath whateveritis sourceroots whateveritis whateveritis out memory error when compiling
soft exceptions should print only trace also wrapped throwable we should able set flag class whether we running under implement under using init cause otherwise direct delegation can do fix we re agreed soft exception print stack trace should print wrapped throwable too
version aspectj does handle correctly inter type declarations abstract base classes appears when following pattern present code suppose interface interface another interface interface third interface interface extending interface interface containing some method declarations its own suppose also aspect aspect contains inter type declarations providing default all interface methods both own inherited now suppose we have class hierarchy emanating from abstract class base class aspect base class aspect declaring base class implements interface aspect base class aspect declare parents base class implements interface during compilation iajc complains each offspring base class does implement any abstract methods interface interface interface own does happen when base class abstract does occur version aspectj anomalous handling inter type declarations abstract base classes aspectj
erroneous exception conversion
compiler complains inner aspects must static whenever try qualify inner static aspect privileged matter what enclosing type aspect interface class using j2sdk1 02 aspect eclipse ajdt test case base class public class capsule private int hidden public int visible public capsule int priv int pub hidden priv visible pub public void do something system out println hidden visible public static void main string args capsule capsule new capsule capsule do something aspect public aspect outer static privileged just try uncomment aspect inner pointcut call2do something capsule capsule call void capsule do something target capsule before capsule capsule call2do something capsule capsule visible capsule hidden interface public interface marker static privileged just try uncomment aspect inner pointcut call2do something capsule capsule call void capsule do something target capsule before capsule capsule call2do something capsule capsule visible capsule hidden compiler issues error inner aspects when privilieged
following code doesn work ajc ajc built from cvs head yesterday nor ajc output devel test exc handling java after throwing ctor exception thread main java lang illegal state exception crash foo init val after throwing ctor java 21 after throwing ctor ajc inter field init after throwing ctor foo val after hrowing ctor java foo init after throwing ctor java 13 after throwing ctor main after throwing ctor java correct output threw java lang illegal state exception crash execution foo exception thread main java lang illegal state exception crash foo init val after throwing ctor java 21 after throwing ctor ajc inter field init after throwing ctor foo val after hrowing ctor java foo init after throwing ctor java 13 after throwing ctor main after throwing ctor java input source public aspect after throwing ctor after throwing throwable execution foo new system err println threw join point static part public static void main string args new foo private object foo val foo init val class foo foo you uncomment line comment out inter type decl advice runs correctly private object val init val static object init val throw new illegal state exception crash aspect runs after throwing advice correctly field declared normally aspect fails do even after throwing advice ctors doesn execute inter type decls
config parser java 132
exception logging after throwing advice can convert throwable obj string ajc aborts
xlint warning call pcd using subtype defining type
attached example throws class load time please note bug results different exception when happens different setup when class loaded jboss more cryptic talking about generic class format error exception thread main java lang class format error com netvisor nvsr client invalid byte code bug test itest illegal method modifiers 0x409 java lang class loader define class0 native method java lang class loader define class class loader java 537 java security secure class loader define class secure class loader java 123 java net urlclass loader define class urlclass loader java 251 java net urlclass loader access 100 urlclass loader java 55 java net urlclass loader run urlclass loader java 194 java security access controller do privileged native method java net urlclass loader find class urlclass loader java 187 java lang class loader load class class loader java 289 sun misc launcher app class loader load class launcher java 274 java lang class loader load class class loader java 235 java lang class loader load class internal class loader java 302 java lang class loader define class0 native method java lang class loader define class class loader java 537 java security secure class loader define class secure class loader java 123 java net urlclass loader define class urlclass loader java 251 java net urlclass loader access 100 urlclass loader java 55 java net urlclass loader run urlclass loader java 194 java security access controller do privileged native method java net urlclass loader find class urlclass loader java 187 java lang class loader load class class loader java 289 sun misc launcher app class loader load class launcher java 274 java lang class loader load class class loader java 235 java lang class loader load class internal class loader java 302 com netvisor nvsr client invalid byte code bug run invalid byte code bug java 15 com netvisor nvsr client invalid byte code bug main invalid byte code bug java illegal method modifier
soft exception should implement get cause public throwable get cause return inner pointed out ramnivas misc mail messages code comments using get cause means chain should print expected esp when soft exception itself wrapped remote exception since get cause replicates get wrapped throwable we could deprecate we must continue support maintain upwards binary runtime classes alias get cause get wrapped throwable soft exception
compiler might detecting overloaded pointcut names when parameters bound might implementing pointcut correctly below context from my reply ron bodkin aspectj dev proper behavior overloaded pointcut definitions have checked code recently submitted test case nor have evaluated whether my code below actually replicates ron bug context from email programming guide says error two pointcuts named same name same class aspect declaration when compile overloaded pointcut names do get error pointcut pc runnable target call void run pointcut pc sub runnable target call void run aspectj classpath ajrt11 overloaded pointcut java overloaded pointcut java 14 duplicate pointcut name pc overloaded pointcut java 15 duplicate pointcut name pc when use pointcuts bound parameters get error before runnable pc log pc runnable before sub runnable pc log pc sub runnable when use pointcuts type parameters get errors before pc runnable log pc runnable before pc sub runnable log pc sub runnable before pc log pc my code public class overloaded pointcut public static void main string args new run class public void run aspect declare parents implements runnable declare parents implements sub runnable interface sub runnable extends runnable pointcut pc runnable target call void run pointcut pc sub runnable target call void run before runnable pc log pc runnable before sub runnable pc log pc sub runnable before pc runnable log pc runnable before pc sub runnable log pc sub runnable before pc log pc void log string system out println ron code following program compiles warnings produces output when run under aspect appears behave more specific definition only definition pointcut here simple program illustrates question odd behavior package lib public class runnable pointcuts public pointcut runnable calls runnable runnable object caller call run target runnable caller public pointcut special runnable calls special runnable runnable object caller public pointcut runnable calls special runnable runnable object caller call run target runnable caller package lib public interface special runnable extends runnable package client import lib runnable pointcuts import lib special runnable public aspect use before object caller runnable pointcuts runnable calls caller target my runnable system out println my runnable called from caller public static void main string args use aspect do public void do new my runnable run advice run you make implement special runnable class my runnable implements special runnable class my runnable implements runnable public void run error overloaded pointcuts unless binding variables
org aspectj asm kind all array should contain all kinds may have three possible kinds defined java advice declare declare inter type kind all does only contain advice declare can lead array index out bounds exception org aspectj asm kind all does contain all kinds
ajdt very stable when eclipse project contains errors like missing classes wrong package statements etc etc may occurs when refactoring project sometimes changing source outside eclipse note am using eclipse ajdt incremental compilation generally lot exceptions occur mostly nullpointer here some them java lang null pointer exception org aspectj asm internal program element link label string program element java 403 org eclipse ajdt internal core view node get label view node java 171 org eclipse ajdt internal core view node adapter get label view node adapter java 89 org eclipse ui model workbench label provider get text workbench label provider java 142 ii java lang null pointer exception org eclipse ajdt internal ui editor aspect jeditor run aspect jeditor java 242 org eclipse swt widgets runnable lock run runnable lock java 35 iii java lang null pointer exception org aspectj ajde internal compiler adapter compile compiler adapter java 79 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 165 ajdt very stable when confronted java aspect errors
java lang null pointer exception org aspectj weaver asm relationship provider checker munger asm relationship provider java 51 org aspectj weaver checker match checker java 58 org aspectj weaver bcel bcel class weaver match bcel class weaver java 985 org aspectj weaver bcel bcel class weaver match bcel class weaver java 791 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 291 org aspectj weaver bcel bcel class weaver weave bcel class weaver java 77 org aspectj weaver bcel bcel weaver weave bcel weaver java 417 org aspectj weaver bcel bcel weaver weave bcel weaver java 390 org aspectj weaver bcel bcel weaver weave bcel weaver java 316 org aspectj ajdt internal core builder aj build manager weave generate class file aj build manager java 256 org aspectj ajdt internal core builder aj build manager do build aj build manager java 156 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 70 org aspectj ajde internal compiler adapter compile compiler adapter java 103 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 165 npe compile
have library aspect includes advice which compile outjar my client project extend make concrete pointcut results library aspect affecting parts my system bug enhancement request here bug when you look structure view affected classes problem you try navigate from calls advice ajdt results npe here stack trace ajdt java lang null pointer exception org aspectj asm internal program element link label string program element java 403 org eclipse ajdt internal core view node get label view node java 171 org eclipse ajdt internal core view node adapter get label view node adapter java 89 org eclipse ui model workbench label provider get text workbench label provider java 142 org eclipse jface viewers tree viewer do update item tree viewer java 95 org eclipse jface viewers abstract tree viewer update item safe runnable run abstract tree viewer java 87 org eclipse core internal runtime internal platform run internal platform java 1006 org eclipse core runtime platform run platform java 413 org eclipse jface viewers abstract tree viewer do update item abstract tree viewer java 406 org eclipse jface viewers structured viewer update item safe runnable run structured viewer java 119 org eclipse core internal runtime internal platform run internal platform java 1006 org eclipse core runtime platform run platform java 413 org eclipse jface viewers structured viewer update item structured viewer java 1271 org eclipse jface viewers abstract tree viewer create tree item abstract tree viewer java 320 org eclipse jface viewers abstract tree viewer run abstract tree viewer java 303 org eclipse swt custom busy indicator show while busy indicator java 69 org eclipse jface viewers abstract tree viewer create children abstract tree viewer java 289 org eclipse jface viewers abstract tree viewer handle tree expand abstract tree viewer java 697 org eclipse jface viewers abstract tree viewer tree expanded abstract tree viewer java 709 org eclipse swt widgets typed listener handle event typed listener java 175 org eclipse swt widgets event table send event event table java 81 org eclipse swt widgets widget send event widget java 840 org eclipse swt widgets widget send event widget java 865 org eclipse swt widgets widget send event widget java 849 org eclipse swt widgets tree wm notify child tree java 1909 org eclipse swt widgets control wm notify control java 3815 org eclipse swt widgets composite wm notify composite java 642 org eclipse swt widgets control window proc control java 2816 org eclipse swt widgets display window proc display java 2361 org eclipse swt internal win32 os call window proc native method org eclipse swt internal win32 os call window proc os java 1236 org eclipse swt widgets tree call window proc tree java 156 org eclipse swt widgets tree wm lbuttondown tree java 1517 org eclipse swt widgets control window proc control java 2799 org eclipse swt widgets display window proc display java 2361 org eclipse swt internal win32 os dispatch message native method org eclipse swt internal win32 os dispatch message os java 1303 org eclipse swt widgets display read dispatch display java 1543 org eclipse ui internal workbench run event loop workbench java 1402 org eclipse ui internal workbench run workbench java 1385 org eclipse core internal boot internal boot loader run internal boot loader java 858 org eclipse core boot boot loader run boot loader java 461 sun reflect native method accessor impl invoke0 native method sun reflect native method accessor impl invoke unknown source sun reflect delegating method accessor impl invoke unknown source java lang reflect method invoke unknown source org eclipse core launcher main basic run main java 291 org eclipse core launcher main run main java 747 org eclipse core launcher main main main java 583 enhancement request concrete aspect applies advice should also show what affected project course would also nice see how given concrete library aspect aspect path affects your project too structure view crash when extending library aspects
compiler crash ajc head post rc1 erroneous program
see attached file verify bug jar source files you won need anything else compiler reproduce bug bug ls abstract caching java tree node java verify bug jar container caching java tree node folding java workspace group java container loader java tree panel java workspace node java makefile tree workspace java bug gmake cygdrive aspectj1 bin ajc classpath aspectj1 lib aspectjrt jar version aspect compiler cygdrive aspectj1 bin ajc classpath aspectj1 lib aspectjrt jar java java classpath aspectj1 lib aspectjrt jar tree node java lang verify error class tree node method do show action signature unable pop operand off empty stack exception thread main make all error java lang verify error generated code
file aspect bug java public aspect aspect bug extends abstract caching perthis execution container loader new declare parents container descriptor implements abstract caching key protected pointcut load executions key key container loader container loads key abstract aspect abstract caching interface key protected abstract pointcut load executions key key class key class container descriptor class active container class container loader public active container create container container descriptor return null public pointcut container loads container loader loader container descriptor container desc loader args container desc execution active container container loader create container container descriptor first here versions aspect using bash shell under cygwin windows xp classpath aspectj1 lib aspectjrt jar cygdrive aspectj1 bin ajc version ajc version built jul 24 2002 21 pm pst running java 02 classpath aspectj1 lib aspectjrt jar cygdrive aspectj1 bin ajc version aspect compiler classpath aspectj1 1rc1 lib aspectjrt jar cygdrive aspectj1 1rc1 bin ajc version aspect compiler 1rc1 classpath aspectj1 lib aspectjrt jar cygdrive aspectj1 bin ajc version aspect compiler all four compilers give them aspect bug java file which attached classpath aspectj1 lib aspectjrt jar cygdrive aspectj1 bin ajc aspect bug java classpath aspectj1 lib aspectjrt jar cygdrive aspectj1 bin ajc aspect bug java classpath aspectj1 1rc1 lib aspectjrt jar cygdrive aspectj1 1rc1 bin ajc aspect bug java classpath aspectj1 lib aspectjrt jar cygdrive aspectj1 bin ajc aspect bug java documents settings macneil shonle aspect bug java incompatible type expected container descriptor found binding type pattern abstract caching key error you can see only final run sept 11 build ajc do we see incompatible type error regression desirable result how should code ported language regression possible language improvement
error occurs both head cvs 03 compiler crash output from cvs head version end may related 42739 may distinct problems sample source created sep 2003 copyright 2003 new aspects security all rights reserved aspect library public pointcut executions throwing checked execution throws exception runtime exception public aspect sample exception handling public pointcut scope within org atrack model public pointcut executions throwing checked library executions throwing checked scope declare error executions throwing checked checked exceptions sample compile eclipse workspace atrack ajc src sample exception handling java java lang exception stack trace java lang thread dump stack thread java 1071 org aspectj weaver patterns reference pointcut concretize1 reference po intcut java 215 org aspectj weaver patterns pointcut concretize1 pointcut java 88 org aspectj weaver patterns reference pointcut concretize1 reference po intcut java 272 org aspectj weaver patterns pointcut concretize1 pointcut java 88 org aspectj weaver patterns reference pointcut concretize1 reference po intcut java 272 org aspectj weaver patterns pointcut concretize pointcut java 127 org aspectj weaver patterns pointcut concretize pointcut java 120 org aspectj weaver checker concretize checker java 37 org aspectj weaver crosscutting members add shadow munger crosscutting me mbers java 78 org aspectj weaver crosscutting members add declare crosscutting members java 102 org aspectj weaver crosscutting members add declares crosscutting member java 92 org aspectj weaver resolved type collect crosscutting members resolved ype java 332 org aspectj weaver crosscutting members set add replace aspect crosscut ting members set java 50 org aspectj ajdt internal compiler ast aspect declaration build inter ty pe per clause aspect declaration java 754 org aspectj ajdt internal compiler lookup aj lookup environment build ter type per clause aj lookup environment java 124 org aspectj ajdt internal compiler lookup aj lookup environment complet type bindings aj lookup environment java 91 org eclipse jdt internal compiler compiler begin compile compiler ja va 310 org eclipse jdt internal compiler compiler compile compiler java 324 org aspectj ajdt internal core builder aj build manager perform compilat ion aj build manager java 373 org aspectj ajdt internal core builder aj build manager do build aj build manager java 125 org aspectj ajdt internal core builder aj build manager batch build aj bu ild manager java 70 org aspectj ajdt ajc ajdt command do command ajdt command java 99 org aspectj ajdt ajc ajdt command run command ajdt command java 53 org aspectj tools ajc main run main java 217 org aspectj tools ajc main run main main java 155 org aspectj tools ajc main main main java 72 eclipse workspace atrack src sample exception handling java 15 circular pointcu declaration involving executions throwing checked error declare error fails pointcuts composed from multiple classes
given following point cut advice public aspect exception aspect pointcut exception thrower execution public exception bug test throws exception declare warning exception thrower throws exception aspected code public class exception bug test class my exception extends exception public void method1 throws exception public void method2 throws my exception listing file default lst temp ajc bug exception aspect aj temp ajc bug exception bug test java ajc does advise exception bug test method2 output from compilation following temp ajc bug ajc argfile default lst classpath aspectj home lib aspectjrt jar eclipse workspace ajc bug exception bug test java 11 throws exception from aspect mailing list contributed jim hugunin lt detail gt bug caused because code throws pattern mistakenly used internal protected method type pattern matches exactly instead external public method type pattern matches statically because classes were same package java rules allowed would nice easy way specifiy method could only accessed from subtypes lt detail gt throw derivative pointcuts advised
when percflow aspect woven source code from jar using aspect path compiler option produces only one instance aspect each entrypoint defined source code percflow aspects compiled from jars share one instance all entry points
call pcd fails when given subtype defining type
build i20030625 old tasks view showed summary number tasks errors warnings infos status line missing reworked view tasks summary shown status line
revise asm create interfaces
sample run fails using injars devel test library weave ajc ajee testing execution monitor aj devel test library weave jar cf ajee jar ajee testing class devel test library weave ajc injars ajee jar model bus obj java model monitor us obj java devel test library weave model bus obj java class must implement inherite abstract method execution monitor monitored item ajc inter method dispatch2 ajee esting execution monitor record string string public class bus obj error works single pass compilation devel test library weave ajc ajee testing execution monitor aj model bus obj jav model monitor bus obj java devel test library weave sample source code package ajee testing public aspect execution monitor public interface monitored item private void monitored item record string event type string event name package model public class bus obj package model import ajee testing execution monitor public aspect monitor bus obj declare parents bus obj implements execution monitor monitored item weaving failure when using injars
present declare warning declare error compiler provides detailed information about what user code has led generation compile time warning error consider following test case public class public static void main string args new do something system out println all done void do something system out println doing something end class public aspect my aspect pointcut doing call do something declare warning doing don do when compile two files get following warning src java 16 don do which great all want know where offending code nearly enough want know what line contravening policy policies have specified my aspect above example would even more useful warning message something like src java 16 don do calling method void do something large projects where imperative reduce completely remove coupling between certain components declare warning error would far greater use could return more detailed info say why just where desired enforcement rules have been broken declare warning error output more detail required
relative paths longer parser properly ajde parsing paths lst files broken
command line specifies both classpath entry lst file classpath entry lst file entry seems replace rather than supplement command line entry expect options cumulative see tests bugs options classpath classpath entries lst files overwrite command line classpath entries
check bug add erroneous line lst file compile ajde error message returned project specific should specific lst file which error originated message needs source location lst file parsing errors should include sourceline information
when compiled observer subject protocol example jbuilder7 integrated ajde strange internal error jbuilder7 extras aspectj 110 doc examples observer observer java internal compiler error java lang null pointer exception org aspectj ajdt internal compiler lookup eclipse world make resolved member unknown source org aspectj ajdt internal core builder asm builder visit unknown source org eclipse jdt internal compiler ast method declaration traverse unknown source org eclipse jdt internal compiler ast type declaration traverse unknown source org eclipse jdt internal compiler ast compilation unit declaration traverse unknown source org aspectj ajdt internal core builder asm builder internal build unknown source org aspectj ajdt internal core builder asm builder build unknown source org aspectj ajdt internal compiler lookup eclipse world finished compilation unit unknown source org aspectj ajdt internal compiler aj compiler process unknown source org eclipse jdt internal compiler compiler compile unknown source org eclipse jdt internal core builder abstract image builder compile unknown source org eclipse jdt internal core builder abstract image builder compile unknown source org aspectj ajdt internal core builder aj build manager batch builder run unknown source org aspectj ajdt internal core builder aj build manager batch build unknown source org aspectj ajde internal compiler adapter compile unknown source org aspectj ajde internal aspect jbuild manager compiler thread run unknown source firstly fix changing interface subject observer like interface observer void update interface subject object get data could compile successfully however immediately got another confusing compiler only made display java observer java subject java subject observer protocol java subject observer protocol impl java ignoring others don know why seems bug meanwhile use ajc command line compile example can get through without any exceptions some strange error when compiling observer example jbuilder7 integrated ajde
use aspect from within eclipse after some time developing get following stack trace wrapped eclipse gui when try compile java file huge amount syntax errors missing variables other problems soon have fixed issues can comnpile normally ever unfortunatly can provide any more detailed information because errors pops up randomly disappears when bug fixed have neither time nor permission create more accurate sample java lang null pointer exception java lang string init string java 214 org aspectj ajdt internal core builder asm builder visit asm builder java 231 org aspectj ajdt internal core builder asm builder visit asm builder java 259 org eclipse jdt internal compiler ast anonymous local type declaration traverse anonymous local type declaration java 138 org eclipse jdt internal compiler ast qualified allocation expression traverse qualified allocation expression java 342 org eclipse jdt internal compiler ast message send traverse message send java 299 org eclipse jdt internal compiler ast block traverse block java 147 org eclipse jdt internal compiler ast statement traverse statement java 347 org eclipse jdt internal compiler ast method declaration traverse method declaration java 157 org eclipse jdt internal compiler ast type declaration traverse type declaration java 946 org eclipse jdt internal compiler ast compilation unit declaration traverse compilation unit declaration java 303 org aspectj ajdt internal core builder asm builder internal build asm builder java 169 org aspectj ajdt internal core builder asm builder build asm builder java 66 org aspectj ajdt internal compiler lookup eclipse factory finished compilation unit eclipse factory java 303 org aspectj ajdt internal compiler aj compiler process aj compiler java 67 org eclipse jdt internal compiler compiler compile compiler java 338 org aspectj ajdt internal core builder aj build manager perform compilation aj build manager java 372 org aspectj ajdt internal core builder aj build manager do build aj build manager java 133 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 78 org aspectj ajde internal compiler adapter compile compiler adapter java 117 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 164 load test java crefo client src com dcbank scoring socketserver kind regards arno schmidmeier compiler error when compiling buggy class
made package attach bug name bug zip which shows sample java program correctly runs when compiled javac have classloading problems every time compiled ajc please see file readme demonstrate bug inside bug zip archive detailed although simple instructions reproducing bug two shell scripts attached make things easier please keep me informed status issue ajc compiler generates invalid class files under certain
declare parents member declarations report kind method instead what asm treats declare parents methods
trying create special jsp compilation servlet tomcat uses aspectj compiler can plug compiler adapter don have control ant code use invoke compiler so like use environment variable do apparently only mechanism do support doing so can pass aspectpath weave aspects compiled jsp servlet allow use environment variable set compiler arguments
ajde apis coupled javax swing org aspectj ajde editor manager editor manager needs refactored have swing specific parts moved org aspectj ajde ui swing org aspectj ajbrowser ajde apis unnecessariy coupled swing
ajdt eclipse build jdk program under eclipse using jdk appropriate build library should selected project properties java build path however aspect continues use jdk associated eclipse so errors result from using apis same occur running eclipse under compiling programs testcase run eclipse under jdk create java project which uses jdk write java classes uses apis public class test string buffer public static void main string args new string buffer test index convert aspect project aspect does honour libraries defined via project properties
from email sent user list 26 2003 ajc npe when aspect declares hashcode follows interface identifiable void set id id id id get id aspect identifiable aspect private id identifiable id null public id identifiable get id return id public void identifiable set id id id id id public int identifiable hash code return get id null super hash code get id hash code workaround callers compiler controls replace declaration around advice int around identifiable target call public int hash code return get id null proceed get id hash code ajc stack trace declaring hashcode method aspect
compiler crash ajc
ajc needs option while correctly compiling classes from subpackage
following code produces xlint unresolvable member warning class class type string class class public void test public void test2 test aspect void around call void test withincode void test2 proceed warning text warning java 22 can resolve member void catch java lang class found exception xlint unresolvable member line 22 line aspect says withincode comment out aspect warning goes away also comment out default constructor goes away string class seems have something do warning can reproduce 1rc1 1rc2 unexpected xlint unresolvable member warning withincode
declare warning messages when targeting class files from injars source path listed form app main class rather than app main java aj see tests new binary warnings code run see problem limitations tests tests return false positives when detecting error because filename checking enabled harness verification messages have also see filenames appear all tests do reproduce problem saw ajdt so perhaps filename makes sense ajdt ajdt simply omits source path wrong declare warning binary files
aspect compiler 1beta4 program public aspect foo pointcut int call void produces error messages negation doesn allow binding formal unbound pointcut errors should say something like binding only allowed state based pointcuts should print file line number doug lame error message negation doesn allow binding
using aspect rc1 public aspect asp public class trg member string class public class trg public static void main string args new trg system out println all ok compiling ajc asp java trg java running trg prints all ok should compiling ajc trg java asp java running trg gives exception thread main java lang field error class asp ajc inter field init asp trg member asp java trg init trg java trg main trg java note introduced field must type class array classes works fine else error when introducing members type class
compiling spacewar without specifying aspectjrt jar classpath causes npe expected error message aspectjrt jar required steps reproduce install latest cd doc examples java jar lib aspectjtools jar verbose spacewar debug lst result npe attached log npe compiling without aspectjrt jar
iajc expected state resolved got concrete iajc expected state resolved got concrete iajc org aspectj weaver bcexception expected state resolved got concrete iajc org aspectj weaver patterns pointcut assert state pointcut java 236 iajc org aspectj weaver patterns pointcut concretize pointcut java 126 iajc org aspectj weaver patterns cflow pointcut concretize1 cflow pointcut java 143 iajc org aspectj weaver patterns pointcut concretize1 pointcut java 94 iajc org aspectj weaver patterns pointcut concretize1 pointcut java 88 iajc org aspectj weaver patterns reference pointcut concretize1 reference pointcut java 270 iajc org aspectj weaver patterns pointcut concretize1 pointcut java 88 iajc org aspectj weaver patterns reference pointcut concretize1 reference pointcut java 270 iajc org aspectj weaver patterns pointcut concretize pointcut java 127 iajc org aspectj weaver patterns pointcut concretize pointcut java 120 iajc org aspectj weaver advice concretize advice java 207 iajc org aspectj weaver crosscutting members add shadow munger crosscutting members java 78 iajc org aspectj weaver crosscutting members add shadow mungers crosscutting members java 72 iajc org aspectj weaver resolved type collect crosscutting members resolved type java 328 iajc org aspectj weaver crosscutting members set add replace aspect crosscutting members set java 54 iajc org aspectj weaver bcel bcel weaver prepare weave bcel weaver java 164 iajc org aspectj weaver bcel bcel weaver weave bcel weaver java 214 iajc org aspectj ajdt internal core builder aj build manager weave generate class file aj build manager java 394 iajc org aspectj ajdt internal core builder aj build manager batch build aj build manager java 149 iajc org aspectj ajdt ajc ajdt command run command ajdt command java 55 iajc org aspectj tools ajc main run main java 216 iajc org aspectj tools ajc main run main main java 155 iajc org aspectj tools ant taskdefs ajc task execute ajc task java 646 iajc org apache tools ant unknown element execute unknown element java 193 iajc org apache tools ant task perform task java 341 iajc org apache tools ant target execute target java 309 iajc org apache tools ant target perform tasks target java 336 iajc org apache tools ant project execute target project java 1339 iajc org apache tools ant project execute targets project java 1255 iajc org apache tools ant main run build main java 609 iajc org apache tools ant main start main java 196 iajc org apache tools ant main main main java 235 bcexception thrown aspect 1rc1
using aspect j1 1b4 running following program crashes message inconsistent stack height while reducing my original program minimum example below had also stack height guess related so didn reproduce mail me you need too mport java lang reflect method public class stack error public static void main string args void assert true string msg boolean public void test equals null stack error one new stack error stack error two new stack error assert true equal one equals two does work boolean yes one equals two works public boolean equals object other return true aspect equals contract pointcut equals call object one object other one target object target one call public boolean equals object args other one within equals contract boolean around object one object other one equals call one other one boolean result proceed one other one class cls one get class string name cls get name boolean has hash code false try method cls get declared method hash code null string look public int name hash code has hash code look equals string catch method exception nsme return result program does crash you comment out line indicated does work comment note line below comment works does work inconsistant stack height
eclipse 200302211557 aspect get following internal error when using join point get static part around advice call joinpoit source below using just join point fine java lang null pointer exception org eclipse jdt internal compiler ast message send analyse code message send java 40 org eclipse jdt internal compiler ast message send analyse code message send java 44 org eclipse jdt internal compiler ast abstract method declaration analyse code abstract method declaration java 106 org eclipse jdt internal compiler ast type declaration analyse code type declaration java 445 org eclipse jdt internal compiler ast compilation unit declaration analyse code compilation unit declaration java 76 org eclipse jdt internal compiler compiler process compiler java 539 org aspectj ajdt internal compiler aj compiler process aj compiler java 65 org eclipse jdt internal compiler compiler compile compiler java 340 org eclipse jdt internal core builder abstract image builder compile abstract image builder java 232 org eclipse jdt internal core builder abstract image builder compile abstract image builder java 171 org aspectj ajdt internal core builder aj build manager batch builder run aj build manager java 655 org aspectj ajdt internal core builder aj build manager batch build aj build manager java 139 org aspectj ajde internal compiler adapter compile compiler adapter java 92 org aspectj ajde internal aspect jbuild manager compiler thread run aspect jbuild manager java 213 exceptions java aspect bugs src compiler source package compiler import java io author websterm change generated comment go window preferences java code generation code comments public class test public static void main string args throws exception file input stream new file input stream test created 14 apr 03 change generated comment go window preferences java code generation code comments package compiler import java io import org aspectj lang author websterm change generated comment go window preferences java code generation code comments public aspect exceptions pointcut exception methods call java io throws ioexception object around throws ioexception exception methods within exceptions object obj proceed system out println join point get static part return obj internal compiler error
following code shows what believe incorrect error base class aimpl made concrete aspect af compilation bimpl does recognize fact problem version 1rc1 seen java package intf public interface aimpl java package impl import intf public class aimpl implements af java package impl import intf aspect af public aimpl system out println called return null java package intf import intf public interface extends bimpl java package impl import impl aimpl import intf public class bimpl extends aimpl implements public system out println called return null compiler error bimpl java class must implement inherited abstract method intf inter type declaration base class seen derived class
error occurs when you do inter type declaration interface use declare parents make abstract base class implement try use declared method fails you make base class concrete doesn fail following code demonstrates error you run java driver you get java lang abstract method error derived get executions ljava lang string driver main driver java 23 exception thread main public class driver public static void main string args derived generator new derived system out println generator get executions process events static aspect monitor base declare parents base implements execution monitor monitored item class derived extends base public string get name return null abstract class base abstract public string get name aspect execution monitor marker interface indicate execution monitor should track calls executions class public interface monitored item int get executions string method name map events mutable integers public int monitored item get executions string method name return inter type declaration bug abstract classes
bad source locations declare error warning
compiler crash yesterday rc1 build
weaver crash
ajc aspectpath fails npe cflow pointcuts
when program below run produces null pointer exception java lang null pointer exception a2 ajc around a2 3b6proceed cflow cycles java a2 ajc around a2 3b6 around body3 cflow cycles java 35 target run cflow cycles java 24 cflow cycles run around body4 cflow cycles java cflow cycles main around body6 cflow cycles java 24 cflow cycles main cflow cycles java 24 new cflow cycles java ajc tests failing xml import org aspectj testing tester testcase cflow cycles advice from different aspects public class cflow cycles public static void main string args tester expect event target a1 tester expect event target a2 new target run tester check all events ignore dups class target public void run aspect a1 pointcut target run flow ok cflow within target execution within a1 within a1 new new cflow within target execution within a1 object around target run flow tester event target a1 return proceed ok same class aspect a2 pointcut target run within target execution within a2 object around target run tester event target a2 return proceed runtime null pointer exception when applying around advice other around advice
dumps assembly code object used args bcel renderer java 152
may caused bug 32399 file transaction test java import sub execution monitor public class transaction test static transaction transaction private void assert committed transaction get count method execution commit static aspect monitor test declare parents transaction implements execution monitor monitored item class transaction file sub execution monitor aj package sub public aspect execution monitor public interface monitored item int get count string event type string event name public int monitored item get count string event type string event name return sample compilation devel ajc transaction test java sub execution monitor aj can bind type name execution monitor monitored item devel transaction test java method get count java lang string java lang string undefined type transaction transaction get count method execution commit errors can resolve nested public interfaces
get error inter type declaration from conflicts existing member when declaring arg constructor aspect another type which has constructors likely compiler generating default constructor which collides weaver see test case tests bugs constructor declaration java can weaver reliably check default constructor generated compiler ours javac otherwise could known limitation inter type arg constructor declaration conflict compiler generated constructor
version aspect compiler 1beta4 ajc compiler issues spurious error message exits negative error code when weaving code containing static declaration nested class compiler seem write classfiles correctly negative exit status causes problems when using ajc compiler adapter ant reproduce extract following two files empty directory file aj aspect pointcut within test within test pointcut call handle order within test call handle order object around call handle order return dummy inserted aspect end file aj file test java public class test commenting out static declaration makes everything work ok static class static nested class public static void main string args system out println new test handle order test private string handle order string return end test java compile files ajc sourceroots verbose output compiling aspectj1 doc examples bug aj compiling aspectj1 doc examples bug test java weaving might need weave unwoven class file null test static nested class unwoven class file null unwoven class file null test world true wrote class file aspectj1 doc examples bug class can find type test wrote class file aspectj1 doc examples bug test static nested class class wrote class file aspectj1 doc examples bug test class error ajc reports error when encountering static declaration nested classes
negation pointcut does work
following program get null pointer exception during compiling warning source code object available weaving public class null ptr public static void main string args null ptr np new null ptr np null public void finalize throws throwable aspect finalize contract pointcut finalize call object object execution void finalize void around object throws throwable finalize call finalize error null ptr finalize ok proceed works comment out line indicated error comment declare aspect privileged null pointer exception when compiling
pointcut does seem pick advice execution join points beta4 here program shows problem public class test public static void main string args aspect aspect1 before execution test system out println reached join point aspect aspect2 before within aspect2 system out println reached join point aop bugs b4 ajc version aspect compiler 1beta4 aop bugs b4 ajc test java aop bugs b4 java test reached execution void test main string pointcut does work
error certain combination advice
aspect compiler 1beta4 program aspect foo void foo void foo super foo class class extends class main public static void main string args new causes error runtime exception thread main java lang verify error class method ajc super dispatch foo signature illegal use nonvirtual function call main main foo java 11 note foo never even called error happens load time when new expression causes class loaded error either one foo methods declared its class directly kind showstopper doug super call intertype method declaration body causes verify error
org aspectj ajde build options adapter interface does yet support new aspect compiler options need added interface any old renamed options deprecated correct processing needs happen within ajde pass options compiler enhancement needed various ide projects aspect support ajde does support new aspect compiler options
use aspectj1 1b4 version list box did let me choose offered only unspecified compiling program below yields warning affected type exposed weaver running crashes program message java lang verify error class verify error method finalize signature incompatible object argument public class verify error public static void main string args verify error ve new verify error protected void finalize aspect finalize contract pointcut finalize call object object execution void finalize void around object throws throwable finalize call super finalize proceed verify error accessing objects accessible weaver incompatible object argument
ajc emacssym chokes pointcut includes intertype method
you don find exception below bug please add new bug make bug priority please include test program can reproduce exception bad non abstract method code private native int native message pump initialize public class plc comm pvi pvi com link event handler impl bad non abstract method code private native int native message pump initialize public class plc comm pvi pvi com link event handler impl java lang runtime exception bad non abstract method code private native int native message pump initialize public class plc comm pvi pvi com link event handler impl org aspectj weaver bcel lazy method gen init unknown source org aspectj weaver bcel lazy class gen init unknown source org aspectj weaver bcel bcel object type get lazy class gen unknown source org aspectj weaver bcel bcel weaver weave unknown source org aspectj weaver bcel bcel weaver weave unknown source org aspectj ajdt internal core builder aj build manager weave generate class files unknown source org aspectj ajdt internal core builder aj build manager batch build unknown source org aspectj ajdt ajc ajdt command run command unknown source org aspectj tools ajc main run unknown source org aspectj tools ajc main run main unknown source org aspectj tools ajc main main unknown source waever tries weave native methods
aspect below fails compile 1b2 producing compilation error ajc com ibm amc java com ibm amc ejb java eclipse runtime workspace ajsamples mock ejbs com ibm amc demo bean ejb java cannot assign value final field com ibm amc demo bean ajc inter field co ibm amc verbose source information available error package com ibm amc import com ibm amc ejb session bean author colyer change generated comment edit template variable typecomment window preferences java templates enable disable creation type comments go window preferences java code generation public aspect demo bean ejb declare parents demo bean implements session bean next line culprit static final boolean demo bean verbose true private transient string demo bean ctx public void demo bean ejb activate verbose system out println ejb activate called making inter type declaration non final solves problem compiler error when introducing final field
